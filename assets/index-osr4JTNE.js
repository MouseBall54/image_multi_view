(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const l of i)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const l={};return i.integrity&&(l.integrity=i.integrity),i.referrerPolicy&&(l.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?l.credentials="include":i.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(i){if(i.ep)return;i.ep=!0;const l=n(i);fetch(i.href,l)}})();function ec(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var tc={exports:{}},ka={},nc={exports:{}},be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mi=Symbol.for("react.element"),Fd=Symbol.for("react.portal"),bd=Symbol.for("react.fragment"),Td=Symbol.for("react.strict_mode"),Od=Symbol.for("react.profiler"),Bd=Symbol.for("react.provider"),Hd=Symbol.for("react.context"),Wd=Symbol.for("react.forward_ref"),Ud=Symbol.for("react.suspense"),$d=Symbol.for("react.memo"),Vd=Symbol.for("react.lazy"),Cs=Symbol.iterator;function Gd(e){return e===null||typeof e!="object"?null:(e=Cs&&e[Cs]||e["@@iterator"],typeof e=="function"?e:null)}var rc={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ic=Object.assign,ac={};function Dr(e,t,n){this.props=e,this.context=t,this.refs=ac,this.updater=n||rc}Dr.prototype.isReactComponent={};Dr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Dr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function lc(){}lc.prototype=Dr.prototype;function ko(e,t,n){this.props=e,this.context=t,this.refs=ac,this.updater=n||rc}var So=ko.prototype=new lc;So.constructor=ko;ic(So,Dr.prototype);So.isPureReactComponent=!0;var js=Array.isArray,oc=Object.prototype.hasOwnProperty,Eo={current:null},sc={key:!0,ref:!0,__self:!0,__source:!0};function uc(e,t,n){var r,i={},l=null,a=null;if(t!=null)for(r in t.ref!==void 0&&(a=t.ref),t.key!==void 0&&(l=""+t.key),t)oc.call(t,r)&&!sc.hasOwnProperty(r)&&(i[r]=t[r]);var o=arguments.length-2;if(o===1)i.children=n;else if(1<o){for(var s=Array(o),h=0;h<o;h++)s[h]=arguments[h+2];i.children=s}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:mi,type:e,key:l,ref:a,props:i,_owner:Eo.current}}function Kd(e,t){return{$$typeof:mi,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Co(e){return typeof e=="object"&&e!==null&&e.$$typeof===mi}function Yd(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Ms=/\/+/g;function Ha(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yd(""+e.key):t.toString(36)}function Bi(e,t,n,r,i){var l=typeof e;(l==="undefined"||l==="boolean")&&(e=null);var a=!1;if(e===null)a=!0;else switch(l){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case mi:case Fd:a=!0}}if(a)return a=e,i=i(a),e=r===""?"."+Ha(a,0):r,js(i)?(n="",e!=null&&(n=e.replace(Ms,"$&/")+"/"),Bi(i,t,n,"",function(h){return h})):i!=null&&(Co(i)&&(i=Kd(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(Ms,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=r===""?".":r+":",js(e))for(var o=0;o<e.length;o++){l=e[o];var s=r+Ha(l,o);a+=Bi(l,t,n,s,i)}else if(s=Gd(e),typeof s=="function")for(e=s.call(e),o=0;!(l=e.next()).done;)l=l.value,s=r+Ha(l,o++),a+=Bi(l,t,n,s,i);else if(l==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function Si(e,t,n){if(e==null)return e;var r=[],i=0;return Bi(e,r,"","",function(l){return t.call(n,l,i++)}),r}function Xd(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var gt={current:null},Hi={transition:null},Zd={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Hi,ReactCurrentOwner:Eo};function cc(){throw Error("act(...) is not supported in production builds of React.")}be.Children={map:Si,forEach:function(e,t,n){Si(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Si(e,function(){t++}),t},toArray:function(e){return Si(e,function(t){return t})||[]},only:function(e){if(!Co(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};be.Component=Dr;be.Fragment=bd;be.Profiler=Od;be.PureComponent=ko;be.StrictMode=Td;be.Suspense=Ud;be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zd;be.act=cc;be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ic({},e.props),i=e.key,l=e.ref,a=e._owner;if(t!=null){if(t.ref!==void 0&&(l=t.ref,a=Eo.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(s in t)oc.call(t,s)&&!sc.hasOwnProperty(s)&&(r[s]=t[s]===void 0&&o!==void 0?o[s]:t[s])}var s=arguments.length-2;if(s===1)r.children=n;else if(1<s){o=Array(s);for(var h=0;h<s;h++)o[h]=arguments[h+2];r.children=o}return{$$typeof:mi,type:e.type,key:i,ref:l,props:r,_owner:a}};be.createContext=function(e){return e={$$typeof:Hd,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Bd,_context:e},e.Consumer=e};be.createElement=uc;be.createFactory=function(e){var t=uc.bind(null,e);return t.type=e,t};be.createRef=function(){return{current:null}};be.forwardRef=function(e){return{$$typeof:Wd,render:e}};be.isValidElement=Co;be.lazy=function(e){return{$$typeof:Vd,_payload:{_status:-1,_result:e},_init:Xd}};be.memo=function(e,t){return{$$typeof:$d,type:e,compare:t===void 0?null:t}};be.startTransition=function(e){var t=Hi.transition;Hi.transition={};try{e()}finally{Hi.transition=t}};be.unstable_act=cc;be.useCallback=function(e,t){return gt.current.useCallback(e,t)};be.useContext=function(e){return gt.current.useContext(e)};be.useDebugValue=function(){};be.useDeferredValue=function(e){return gt.current.useDeferredValue(e)};be.useEffect=function(e,t){return gt.current.useEffect(e,t)};be.useId=function(){return gt.current.useId()};be.useImperativeHandle=function(e,t,n){return gt.current.useImperativeHandle(e,t,n)};be.useInsertionEffect=function(e,t){return gt.current.useInsertionEffect(e,t)};be.useLayoutEffect=function(e,t){return gt.current.useLayoutEffect(e,t)};be.useMemo=function(e,t){return gt.current.useMemo(e,t)};be.useReducer=function(e,t,n){return gt.current.useReducer(e,t,n)};be.useRef=function(e){return gt.current.useRef(e)};be.useState=function(e){return gt.current.useState(e)};be.useSyncExternalStore=function(e,t,n){return gt.current.useSyncExternalStore(e,t,n)};be.useTransition=function(){return gt.current.useTransition()};be.version="18.3.1";nc.exports=be;var Q=nc.exports;const fc=ec(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qd=Q,Jd=Symbol.for("react.element"),qd=Symbol.for("react.fragment"),e0=Object.prototype.hasOwnProperty,t0=Qd.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n0={key:!0,ref:!0,__self:!0,__source:!0};function dc(e,t,n){var r,i={},l=null,a=null;n!==void 0&&(l=""+n),t.key!==void 0&&(l=""+t.key),t.ref!==void 0&&(a=t.ref);for(r in t)e0.call(t,r)&&!n0.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Jd,type:e,key:l,ref:a,props:i,_owner:t0.current}}ka.Fragment=qd;ka.jsx=dc;ka.jsxs=dc;tc.exports=ka;var p=tc.exports,jl={},hc={exports:{}},Dt={},pc={exports:{}},vc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(F,b){var B=F.length;F.push(b);e:for(;0<B;){var G=B-1>>>1,H=F[G];if(0<i(H,b))F[G]=b,F[B]=H,B=G;else break e}}function n(F){return F.length===0?null:F[0]}function r(F){if(F.length===0)return null;var b=F[0],B=F.pop();if(B!==b){F[0]=B;e:for(var G=0,H=F.length,Y=H>>>1;G<Y;){var pe=2*(G+1)-1,ve=F[pe],we=pe+1,xe=F[we];if(0>i(ve,B))we<H&&0>i(xe,ve)?(F[G]=xe,F[we]=B,G=we):(F[G]=ve,F[pe]=B,G=pe);else if(we<H&&0>i(xe,B))F[G]=xe,F[we]=B,G=we;else break e}}return b}function i(F,b){var B=F.sortIndex-b.sortIndex;return B!==0?B:F.id-b.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;e.unstable_now=function(){return l.now()}}else{var a=Date,o=a.now();e.unstable_now=function(){return a.now()-o}}var s=[],h=[],u=1,c=null,v=3,y=!1,k=!1,w=!1,x=typeof setTimeout=="function"?setTimeout:null,d=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(F){for(var b=n(h);b!==null;){if(b.callback===null)r(h);else if(b.startTime<=F)r(h),b.sortIndex=b.expirationTime,t(s,b);else break;b=n(h)}}function _(F){if(w=!1,f(F),!k)if(n(s)!==null)k=!0,ce(E);else{var b=n(h);b!==null&&q(_,b.startTime-F)}}function E(F,b){k=!1,w&&(w=!1,d(D),D=-1),y=!0;var B=v;try{for(f(b),c=n(s);c!==null&&(!(c.expirationTime>b)||F&&!L());){var G=c.callback;if(typeof G=="function"){c.callback=null,v=c.priorityLevel;var H=G(c.expirationTime<=b);b=e.unstable_now(),typeof H=="function"?c.callback=H:c===n(s)&&r(s),f(b)}else r(s);c=n(s)}if(c!==null)var Y=!0;else{var pe=n(h);pe!==null&&q(_,pe.startTime-b),Y=!1}return Y}finally{c=null,v=B,y=!1}}var C=!1,M=null,D=-1,R=5,A=-1;function L(){return!(e.unstable_now()-A<R)}function O(){if(M!==null){var F=e.unstable_now();A=F;var b=!0;try{b=M(!0,F)}finally{b?z():(C=!1,M=null)}}else C=!1}var z;if(typeof m=="function")z=function(){m(O)};else if(typeof MessageChannel<"u"){var U=new MessageChannel,J=U.port2;U.port1.onmessage=O,z=function(){J.postMessage(null)}}else z=function(){x(O,0)};function ce(F){M=F,C||(C=!0,z())}function q(F,b){D=x(function(){F(e.unstable_now())},b)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(F){F.callback=null},e.unstable_continueExecution=function(){k||y||(k=!0,ce(E))},e.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<F?Math.floor(1e3/F):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(s)},e.unstable_next=function(F){switch(v){case 1:case 2:case 3:var b=3;break;default:b=v}var B=v;v=b;try{return F()}finally{v=B}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(F,b){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var B=v;v=F;try{return b()}finally{v=B}},e.unstable_scheduleCallback=function(F,b,B){var G=e.unstable_now();switch(typeof B=="object"&&B!==null?(B=B.delay,B=typeof B=="number"&&0<B?G+B:G):B=G,F){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=B+H,F={id:u++,callback:b,priorityLevel:F,startTime:B,expirationTime:H,sortIndex:-1},B>G?(F.sortIndex=B,t(h,F),n(s)===null&&F===n(h)&&(w?(d(D),D=-1):w=!0,q(_,B-G))):(F.sortIndex=H,t(s,F),k||y||(k=!0,ce(E))),F},e.unstable_shouldYield=L,e.unstable_wrapCallback=function(F){var b=v;return function(){var B=v;v=b;try{return F.apply(this,arguments)}finally{v=B}}}})(vc);pc.exports=vc;var r0=pc.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0=Q,Nt=r0;function he(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gc=new Set,qr={};function Xn(e,t){_r(e,t),_r(e+"Capture",t)}function _r(e,t){for(qr[e]=t,e=0;e<t.length;e++)gc.add(t[e])}var ln=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ml=Object.prototype.hasOwnProperty,a0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ns={},Ds={};function l0(e){return Ml.call(Ds,e)?!0:Ml.call(Ns,e)?!1:a0.test(e)?Ds[e]=!0:(Ns[e]=!0,!1)}function o0(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function s0(e,t,n,r){if(t===null||typeof t>"u"||o0(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mt(e,t,n,r,i,l,a){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=a}var ut={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ut[e]=new mt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ut[t]=new mt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ut[e]=new mt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ut[e]=new mt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ut[e]=new mt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ut[e]=new mt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ut[e]=new mt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ut[e]=new mt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ut[e]=new mt(e,5,!1,e.toLowerCase(),null,!1,!1)});var jo=/[\-:]([a-z])/g;function Mo(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(jo,Mo);ut[t]=new mt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(jo,Mo);ut[t]=new mt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(jo,Mo);ut[t]=new mt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ut[e]=new mt(e,1,!1,e.toLowerCase(),null,!1,!1)});ut.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ut[e]=new mt(e,1,!1,e.toLowerCase(),null,!0,!0)});function No(e,t,n,r){var i=ut.hasOwnProperty(t)?ut[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(s0(t,n,i,r)&&(n=null),r||i===null?l0(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var cn=i0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ei=Symbol.for("react.element"),rr=Symbol.for("react.portal"),ir=Symbol.for("react.fragment"),Do=Symbol.for("react.strict_mode"),Nl=Symbol.for("react.profiler"),mc=Symbol.for("react.provider"),wc=Symbol.for("react.context"),Ro=Symbol.for("react.forward_ref"),Dl=Symbol.for("react.suspense"),Rl=Symbol.for("react.suspense_list"),Ao=Symbol.for("react.memo"),dn=Symbol.for("react.lazy"),yc=Symbol.for("react.offscreen"),Rs=Symbol.iterator;function Lr(e){return e===null||typeof e!="object"?null:(e=Rs&&e[Rs]||e["@@iterator"],typeof e=="function"?e:null)}var Xe=Object.assign,Wa;function Br(e){if(Wa===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Wa=t&&t[1]||""}return`
`+Wa+e}var Ua=!1;function $a(e,t){if(!e||Ua)return"";Ua=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var r=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){r=h}e.call(t.prototype)}else{try{throw Error()}catch(h){r=h}e()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),l=r.stack.split(`
`),a=i.length-1,o=l.length-1;1<=a&&0<=o&&i[a]!==l[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==l[o]){if(a!==1||o!==1)do if(a--,o--,0>o||i[a]!==l[o]){var s=`
`+i[a].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}while(1<=a&&0<=o);break}}}finally{Ua=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Br(e):""}function u0(e){switch(e.tag){case 5:return Br(e.type);case 16:return Br("Lazy");case 13:return Br("Suspense");case 19:return Br("SuspenseList");case 0:case 2:case 15:return e=$a(e.type,!1),e;case 11:return e=$a(e.type.render,!1),e;case 1:return e=$a(e.type,!0),e;default:return""}}function Al(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ir:return"Fragment";case rr:return"Portal";case Nl:return"Profiler";case Do:return"StrictMode";case Dl:return"Suspense";case Rl:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wc:return(e.displayName||"Context")+".Consumer";case mc:return(e._context.displayName||"Context")+".Provider";case Ro:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ao:return t=e.displayName||null,t!==null?t:Al(e.type)||"Memo";case dn:t=e._payload,e=e._init;try{return Al(e(t))}catch{}}return null}function c0(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Al(t);case 8:return t===Do?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function jn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function xc(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function f0(e){var t=xc(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,l=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(a){r=""+a,l.call(this,a)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ci(e){e._valueTracker||(e._valueTracker=f0(e))}function _c(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=xc(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Ji(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Ll(e,t){var n=t.checked;return Xe({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function As(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=jn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function kc(e,t){t=t.checked,t!=null&&No(e,"checked",t,!1)}function zl(e,t){kc(e,t);var n=jn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Il(e,t.type,n):t.hasOwnProperty("defaultValue")&&Il(e,t.type,jn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ls(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Il(e,t,n){(t!=="number"||Ji(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Hr=Array.isArray;function vr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+jn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Pl(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(he(91));return Xe({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function zs(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(he(92));if(Hr(n)){if(1<n.length)throw Error(he(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:jn(n)}}function Sc(e,t){var n=jn(t.value),r=jn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Is(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ec(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Fl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ec(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ji,Cc=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ji=ji||document.createElement("div"),ji.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ji.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ei(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var $r={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d0=["Webkit","ms","Moz","O"];Object.keys($r).forEach(function(e){d0.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),$r[t]=$r[e]})});function jc(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||$r.hasOwnProperty(e)&&$r[e]?(""+t).trim():t+"px"}function Mc(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=jc(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var h0=Xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bl(e,t){if(t){if(h0[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(he(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(he(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(he(61))}if(t.style!=null&&typeof t.style!="object")throw Error(he(62))}}function Tl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ol=null;function Lo(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Bl=null,gr=null,mr=null;function Ps(e){if(e=xi(e)){if(typeof Bl!="function")throw Error(he(280));var t=e.stateNode;t&&(t=Ma(t),Bl(e.stateNode,e.type,t))}}function Nc(e){gr?mr?mr.push(e):mr=[e]:gr=e}function Dc(){if(gr){var e=gr,t=mr;if(mr=gr=null,Ps(e),t)for(e=0;e<t.length;e++)Ps(t[e])}}function Rc(e,t){return e(t)}function Ac(){}var Va=!1;function Lc(e,t,n){if(Va)return e(t,n);Va=!0;try{return Rc(e,t,n)}finally{Va=!1,(gr!==null||mr!==null)&&(Ac(),Dc())}}function ti(e,t){var n=e.stateNode;if(n===null)return null;var r=Ma(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(he(231,t,typeof n));return n}var Hl=!1;if(ln)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){Hl=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{Hl=!1}function p0(e,t,n,r,i,l,a,o,s){var h=Array.prototype.slice.call(arguments,3);try{t.apply(n,h)}catch(u){this.onError(u)}}var Vr=!1,qi=null,ea=!1,Wl=null,v0={onError:function(e){Vr=!0,qi=e}};function g0(e,t,n,r,i,l,a,o,s){Vr=!1,qi=null,p0.apply(v0,arguments)}function m0(e,t,n,r,i,l,a,o,s){if(g0.apply(this,arguments),Vr){if(Vr){var h=qi;Vr=!1,qi=null}else throw Error(he(198));ea||(ea=!0,Wl=h)}}function Zn(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function zc(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fs(e){if(Zn(e)!==e)throw Error(he(188))}function w0(e){var t=e.alternate;if(!t){if(t=Zn(e),t===null)throw Error(he(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var l=i.alternate;if(l===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===l.child){for(l=i.child;l;){if(l===n)return Fs(i),e;if(l===r)return Fs(i),t;l=l.sibling}throw Error(he(188))}if(n.return!==r.return)n=i,r=l;else{for(var a=!1,o=i.child;o;){if(o===n){a=!0,n=i,r=l;break}if(o===r){a=!0,r=i,n=l;break}o=o.sibling}if(!a){for(o=l.child;o;){if(o===n){a=!0,n=l,r=i;break}if(o===r){a=!0,r=l,n=i;break}o=o.sibling}if(!a)throw Error(he(189))}}if(n.alternate!==r)throw Error(he(190))}if(n.tag!==3)throw Error(he(188));return n.stateNode.current===n?e:t}function Ic(e){return e=w0(e),e!==null?Pc(e):null}function Pc(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pc(e);if(t!==null)return t;e=e.sibling}return null}var Fc=Nt.unstable_scheduleCallback,bs=Nt.unstable_cancelCallback,y0=Nt.unstable_shouldYield,x0=Nt.unstable_requestPaint,qe=Nt.unstable_now,_0=Nt.unstable_getCurrentPriorityLevel,zo=Nt.unstable_ImmediatePriority,bc=Nt.unstable_UserBlockingPriority,ta=Nt.unstable_NormalPriority,k0=Nt.unstable_LowPriority,Tc=Nt.unstable_IdlePriority,Sa=null,Qt=null;function S0(e){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Sa,e,void 0,(e.current.flags&128)===128)}catch{}}var Vt=Math.clz32?Math.clz32:j0,E0=Math.log,C0=Math.LN2;function j0(e){return e>>>=0,e===0?32:31-(E0(e)/C0|0)|0}var Mi=64,Ni=4194304;function Wr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function na(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,l=e.pingedLanes,a=n&268435455;if(a!==0){var o=a&~i;o!==0?r=Wr(o):(l&=a,l!==0&&(r=Wr(l)))}else a=n&~i,a!==0?r=Wr(a):l!==0&&(r=Wr(l));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,l=t&-t,i>=l||i===16&&(l&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Vt(t),i=1<<n,r|=e[n],t&=~i;return r}function M0(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function N0(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,l=e.pendingLanes;0<l;){var a=31-Vt(l),o=1<<a,s=i[a];s===-1?(!(o&n)||o&r)&&(i[a]=M0(o,t)):s<=t&&(e.expiredLanes|=o),l&=~o}}function Ul(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Oc(){var e=Mi;return Mi<<=1,!(Mi&4194240)&&(Mi=64),e}function Ga(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function wi(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Vt(t),e[t]=n}function D0(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Vt(n),l=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~l}}function Io(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Vt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Be=0;function Bc(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Hc,Po,Wc,Uc,$c,$l=!1,Di=[],wn=null,yn=null,xn=null,ni=new Map,ri=new Map,pn=[],R0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ts(e,t){switch(e){case"focusin":case"focusout":wn=null;break;case"dragenter":case"dragleave":yn=null;break;case"mouseover":case"mouseout":xn=null;break;case"pointerover":case"pointerout":ni.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":ri.delete(t.pointerId)}}function Ir(e,t,n,r,i,l){return e===null||e.nativeEvent!==l?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:l,targetContainers:[i]},t!==null&&(t=xi(t),t!==null&&Po(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function A0(e,t,n,r,i){switch(t){case"focusin":return wn=Ir(wn,e,t,n,r,i),!0;case"dragenter":return yn=Ir(yn,e,t,n,r,i),!0;case"mouseover":return xn=Ir(xn,e,t,n,r,i),!0;case"pointerover":var l=i.pointerId;return ni.set(l,Ir(ni.get(l)||null,e,t,n,r,i)),!0;case"gotpointercapture":return l=i.pointerId,ri.set(l,Ir(ri.get(l)||null,e,t,n,r,i)),!0}return!1}function Vc(e){var t=bn(e.target);if(t!==null){var n=Zn(t);if(n!==null){if(t=n.tag,t===13){if(t=zc(n),t!==null){e.blockedOn=t,$c(e.priority,function(){Wc(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Wi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Vl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ol=r,n.target.dispatchEvent(r),Ol=null}else return t=xi(n),t!==null&&Po(t),e.blockedOn=n,!1;t.shift()}return!0}function Os(e,t,n){Wi(e)&&n.delete(t)}function L0(){$l=!1,wn!==null&&Wi(wn)&&(wn=null),yn!==null&&Wi(yn)&&(yn=null),xn!==null&&Wi(xn)&&(xn=null),ni.forEach(Os),ri.forEach(Os)}function Pr(e,t){e.blockedOn===t&&(e.blockedOn=null,$l||($l=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,L0)))}function ii(e){function t(i){return Pr(i,e)}if(0<Di.length){Pr(Di[0],e);for(var n=1;n<Di.length;n++){var r=Di[n];r.blockedOn===e&&(r.blockedOn=null)}}for(wn!==null&&Pr(wn,e),yn!==null&&Pr(yn,e),xn!==null&&Pr(xn,e),ni.forEach(t),ri.forEach(t),n=0;n<pn.length;n++)r=pn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<pn.length&&(n=pn[0],n.blockedOn===null);)Vc(n),n.blockedOn===null&&pn.shift()}var wr=cn.ReactCurrentBatchConfig,ra=!0;function z0(e,t,n,r){var i=Be,l=wr.transition;wr.transition=null;try{Be=1,Fo(e,t,n,r)}finally{Be=i,wr.transition=l}}function I0(e,t,n,r){var i=Be,l=wr.transition;wr.transition=null;try{Be=4,Fo(e,t,n,r)}finally{Be=i,wr.transition=l}}function Fo(e,t,n,r){if(ra){var i=Vl(e,t,n,r);if(i===null)nl(e,t,r,ia,n),Ts(e,r);else if(A0(i,e,t,n,r))r.stopPropagation();else if(Ts(e,r),t&4&&-1<R0.indexOf(e)){for(;i!==null;){var l=xi(i);if(l!==null&&Hc(l),l=Vl(e,t,n,r),l===null&&nl(e,t,r,ia,n),l===i)break;i=l}i!==null&&r.stopPropagation()}else nl(e,t,r,null,n)}}var ia=null;function Vl(e,t,n,r){if(ia=null,e=Lo(r),e=bn(e),e!==null)if(t=Zn(e),t===null)e=null;else if(n=t.tag,n===13){if(e=zc(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ia=e,null}function Gc(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_0()){case zo:return 1;case bc:return 4;case ta:case k0:return 16;case Tc:return 536870912;default:return 16}default:return 16}}var gn=null,bo=null,Ui=null;function Kc(){if(Ui)return Ui;var e,t=bo,n=t.length,r,i="value"in gn?gn.value:gn.textContent,l=i.length;for(e=0;e<n&&t[e]===i[e];e++);var a=n-e;for(r=1;r<=a&&t[n-r]===i[l-r];r++);return Ui=i.slice(e,1<r?1-r:void 0)}function $i(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Ri(){return!0}function Bs(){return!1}function Rt(e){function t(n,r,i,l,a){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=l,this.target=a,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(n=e[o],this[o]=n?n(l):l[o]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?Ri:Bs,this.isPropagationStopped=Bs,this}return Xe(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ri)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ri)},persist:function(){},isPersistent:Ri}),t}var Rr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},To=Rt(Rr),yi=Xe({},Rr,{view:0,detail:0}),P0=Rt(yi),Ka,Ya,Fr,Ea=Xe({},yi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Oo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Fr&&(Fr&&e.type==="mousemove"?(Ka=e.screenX-Fr.screenX,Ya=e.screenY-Fr.screenY):Ya=Ka=0,Fr=e),Ka)},movementY:function(e){return"movementY"in e?e.movementY:Ya}}),Hs=Rt(Ea),F0=Xe({},Ea,{dataTransfer:0}),b0=Rt(F0),T0=Xe({},yi,{relatedTarget:0}),Xa=Rt(T0),O0=Xe({},Rr,{animationName:0,elapsedTime:0,pseudoElement:0}),B0=Rt(O0),H0=Xe({},Rr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),W0=Rt(H0),U0=Xe({},Rr,{data:0}),Ws=Rt(U0),$0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},V0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K0(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=G0[e])?!!t[e]:!1}function Oo(){return K0}var Y0=Xe({},yi,{key:function(e){if(e.key){var t=$0[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=$i(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?V0[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Oo,charCode:function(e){return e.type==="keypress"?$i(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?$i(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),X0=Rt(Y0),Z0=Xe({},Ea,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Us=Rt(Z0),Q0=Xe({},yi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Oo}),J0=Rt(Q0),q0=Xe({},Rr,{propertyName:0,elapsedTime:0,pseudoElement:0}),eh=Rt(q0),th=Xe({},Ea,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),nh=Rt(th),rh=[9,13,27,32],Bo=ln&&"CompositionEvent"in window,Gr=null;ln&&"documentMode"in document&&(Gr=document.documentMode);var ih=ln&&"TextEvent"in window&&!Gr,Yc=ln&&(!Bo||Gr&&8<Gr&&11>=Gr),$s=" ",Vs=!1;function Xc(e,t){switch(e){case"keyup":return rh.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ar=!1;function ah(e,t){switch(e){case"compositionend":return Zc(t);case"keypress":return t.which!==32?null:(Vs=!0,$s);case"textInput":return e=t.data,e===$s&&Vs?null:e;default:return null}}function lh(e,t){if(ar)return e==="compositionend"||!Bo&&Xc(e,t)?(e=Kc(),Ui=bo=gn=null,ar=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yc&&t.locale!=="ko"?null:t.data;default:return null}}var oh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!oh[e.type]:t==="textarea"}function Qc(e,t,n,r){Nc(r),t=aa(t,"onChange"),0<t.length&&(n=new To("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kr=null,ai=null;function sh(e){uf(e,0)}function Ca(e){var t=sr(e);if(_c(t))return e}function uh(e,t){if(e==="change")return t}var Jc=!1;if(ln){var Za;if(ln){var Qa="oninput"in document;if(!Qa){var Ks=document.createElement("div");Ks.setAttribute("oninput","return;"),Qa=typeof Ks.oninput=="function"}Za=Qa}else Za=!1;Jc=Za&&(!document.documentMode||9<document.documentMode)}function Ys(){Kr&&(Kr.detachEvent("onpropertychange",qc),ai=Kr=null)}function qc(e){if(e.propertyName==="value"&&Ca(ai)){var t=[];Qc(t,ai,e,Lo(e)),Lc(sh,t)}}function ch(e,t,n){e==="focusin"?(Ys(),Kr=t,ai=n,Kr.attachEvent("onpropertychange",qc)):e==="focusout"&&Ys()}function fh(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ca(ai)}function dh(e,t){if(e==="click")return Ca(t)}function hh(e,t){if(e==="input"||e==="change")return Ca(t)}function ph(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Kt=typeof Object.is=="function"?Object.is:ph;function li(e,t){if(Kt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Ml.call(t,i)||!Kt(e[i],t[i]))return!1}return!0}function Xs(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Zs(e,t){var n=Xs(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xs(n)}}function ef(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ef(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tf(){for(var e=window,t=Ji();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ji(e.document)}return t}function Ho(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function vh(e){var t=tf(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ef(n.ownerDocument.documentElement,n)){if(r!==null&&Ho(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,l=Math.min(r.start,i);r=r.end===void 0?l:Math.min(r.end,i),!e.extend&&l>r&&(i=r,r=l,l=i),i=Zs(n,l);var a=Zs(n,r);i&&a&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),l>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gh=ln&&"documentMode"in document&&11>=document.documentMode,lr=null,Gl=null,Yr=null,Kl=!1;function Qs(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kl||lr==null||lr!==Ji(r)||(r=lr,"selectionStart"in r&&Ho(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yr&&li(Yr,r)||(Yr=r,r=aa(Gl,"onSelect"),0<r.length&&(t=new To("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=lr)))}function Ai(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var or={animationend:Ai("Animation","AnimationEnd"),animationiteration:Ai("Animation","AnimationIteration"),animationstart:Ai("Animation","AnimationStart"),transitionend:Ai("Transition","TransitionEnd")},Ja={},nf={};ln&&(nf=document.createElement("div").style,"AnimationEvent"in window||(delete or.animationend.animation,delete or.animationiteration.animation,delete or.animationstart.animation),"TransitionEvent"in window||delete or.transitionend.transition);function ja(e){if(Ja[e])return Ja[e];if(!or[e])return e;var t=or[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nf)return Ja[e]=t[n];return e}var rf=ja("animationend"),af=ja("animationiteration"),lf=ja("animationstart"),of=ja("transitionend"),sf=new Map,Js="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(e,t){sf.set(e,t),Xn(t,[e])}for(var qa=0;qa<Js.length;qa++){var el=Js[qa],mh=el.toLowerCase(),wh=el[0].toUpperCase()+el.slice(1);Nn(mh,"on"+wh)}Nn(rf,"onAnimationEnd");Nn(af,"onAnimationIteration");Nn(lf,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(of,"onTransitionEnd");_r("onMouseEnter",["mouseout","mouseover"]);_r("onMouseLeave",["mouseout","mouseover"]);_r("onPointerEnter",["pointerout","pointerover"]);_r("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ur="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ur));function qs(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,m0(r,t,void 0,e),e.currentTarget=null}function uf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var l=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],s=o.instance,h=o.currentTarget;if(o=o.listener,s!==l&&i.isPropagationStopped())break e;qs(i,o,h),l=s}else for(a=0;a<r.length;a++){if(o=r[a],s=o.instance,h=o.currentTarget,o=o.listener,s!==l&&i.isPropagationStopped())break e;qs(i,o,h),l=s}}}if(ea)throw e=Wl,ea=!1,Wl=null,e}function Ue(e,t){var n=t[Jl];n===void 0&&(n=t[Jl]=new Set);var r=e+"__bubble";n.has(r)||(cf(t,e,2,!1),n.add(r))}function tl(e,t,n){var r=0;t&&(r|=4),cf(n,e,r,t)}var Li="_reactListening"+Math.random().toString(36).slice(2);function oi(e){if(!e[Li]){e[Li]=!0,gc.forEach(function(n){n!=="selectionchange"&&(yh.has(n)||tl(n,!1,e),tl(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Li]||(t[Li]=!0,tl("selectionchange",!1,t))}}function cf(e,t,n,r){switch(Gc(t)){case 1:var i=z0;break;case 4:i=I0;break;default:i=Fo}n=i.bind(null,t,n,e),i=void 0,!Hl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function nl(e,t,n,r,i){var l=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(a===4)for(a=r.return;a!==null;){var s=a.tag;if((s===3||s===4)&&(s=a.stateNode.containerInfo,s===i||s.nodeType===8&&s.parentNode===i))return;a=a.return}for(;o!==null;){if(a=bn(o),a===null)return;if(s=a.tag,s===5||s===6){r=l=a;continue e}o=o.parentNode}}r=r.return}Lc(function(){var h=l,u=Lo(n),c=[];e:{var v=sf.get(e);if(v!==void 0){var y=To,k=e;switch(e){case"keypress":if($i(n)===0)break e;case"keydown":case"keyup":y=X0;break;case"focusin":k="focus",y=Xa;break;case"focusout":k="blur",y=Xa;break;case"beforeblur":case"afterblur":y=Xa;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=Hs;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=b0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=J0;break;case rf:case af:case lf:y=B0;break;case of:y=eh;break;case"scroll":y=P0;break;case"wheel":y=nh;break;case"copy":case"cut":case"paste":y=W0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=Us}var w=(t&4)!==0,x=!w&&e==="scroll",d=w?v!==null?v+"Capture":null:v;w=[];for(var m=h,f;m!==null;){f=m;var _=f.stateNode;if(f.tag===5&&_!==null&&(f=_,d!==null&&(_=ti(m,d),_!=null&&w.push(si(m,_,f)))),x)break;m=m.return}0<w.length&&(v=new y(v,k,null,n,u),c.push({event:v,listeners:w}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",y=e==="mouseout"||e==="pointerout",v&&n!==Ol&&(k=n.relatedTarget||n.fromElement)&&(bn(k)||k[on]))break e;if((y||v)&&(v=u.window===u?u:(v=u.ownerDocument)?v.defaultView||v.parentWindow:window,y?(k=n.relatedTarget||n.toElement,y=h,k=k?bn(k):null,k!==null&&(x=Zn(k),k!==x||k.tag!==5&&k.tag!==6)&&(k=null)):(y=null,k=h),y!==k)){if(w=Hs,_="onMouseLeave",d="onMouseEnter",m="mouse",(e==="pointerout"||e==="pointerover")&&(w=Us,_="onPointerLeave",d="onPointerEnter",m="pointer"),x=y==null?v:sr(y),f=k==null?v:sr(k),v=new w(_,m+"leave",y,n,u),v.target=x,v.relatedTarget=f,_=null,bn(u)===h&&(w=new w(d,m+"enter",k,n,u),w.target=f,w.relatedTarget=x,_=w),x=_,y&&k)t:{for(w=y,d=k,m=0,f=w;f;f=Jn(f))m++;for(f=0,_=d;_;_=Jn(_))f++;for(;0<m-f;)w=Jn(w),m--;for(;0<f-m;)d=Jn(d),f--;for(;m--;){if(w===d||d!==null&&w===d.alternate)break t;w=Jn(w),d=Jn(d)}w=null}else w=null;y!==null&&eu(c,v,y,w,!1),k!==null&&x!==null&&eu(c,x,k,w,!0)}}e:{if(v=h?sr(h):window,y=v.nodeName&&v.nodeName.toLowerCase(),y==="select"||y==="input"&&v.type==="file")var E=uh;else if(Gs(v))if(Jc)E=hh;else{E=fh;var C=ch}else(y=v.nodeName)&&y.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(E=dh);if(E&&(E=E(e,h))){Qc(c,E,n,u);break e}C&&C(e,v,h),e==="focusout"&&(C=v._wrapperState)&&C.controlled&&v.type==="number"&&Il(v,"number",v.value)}switch(C=h?sr(h):window,e){case"focusin":(Gs(C)||C.contentEditable==="true")&&(lr=C,Gl=h,Yr=null);break;case"focusout":Yr=Gl=lr=null;break;case"mousedown":Kl=!0;break;case"contextmenu":case"mouseup":case"dragend":Kl=!1,Qs(c,n,u);break;case"selectionchange":if(gh)break;case"keydown":case"keyup":Qs(c,n,u)}var M;if(Bo)e:{switch(e){case"compositionstart":var D="onCompositionStart";break e;case"compositionend":D="onCompositionEnd";break e;case"compositionupdate":D="onCompositionUpdate";break e}D=void 0}else ar?Xc(e,n)&&(D="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(D="onCompositionStart");D&&(Yc&&n.locale!=="ko"&&(ar||D!=="onCompositionStart"?D==="onCompositionEnd"&&ar&&(M=Kc()):(gn=u,bo="value"in gn?gn.value:gn.textContent,ar=!0)),C=aa(h,D),0<C.length&&(D=new Ws(D,e,null,n,u),c.push({event:D,listeners:C}),M?D.data=M:(M=Zc(n),M!==null&&(D.data=M)))),(M=ih?ah(e,n):lh(e,n))&&(h=aa(h,"onBeforeInput"),0<h.length&&(u=new Ws("onBeforeInput","beforeinput",null,n,u),c.push({event:u,listeners:h}),u.data=M))}uf(c,t)})}function si(e,t,n){return{instance:e,listener:t,currentTarget:n}}function aa(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,l=i.stateNode;i.tag===5&&l!==null&&(i=l,l=ti(e,n),l!=null&&r.unshift(si(e,l,i)),l=ti(e,t),l!=null&&r.push(si(e,l,i))),e=e.return}return r}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function eu(e,t,n,r,i){for(var l=t._reactName,a=[];n!==null&&n!==r;){var o=n,s=o.alternate,h=o.stateNode;if(s!==null&&s===r)break;o.tag===5&&h!==null&&(o=h,i?(s=ti(n,l),s!=null&&a.unshift(si(n,s,o))):i||(s=ti(n,l),s!=null&&a.push(si(n,s,o)))),n=n.return}a.length!==0&&e.push({event:t,listeners:a})}var xh=/\r\n?/g,_h=/\u0000|\uFFFD/g;function tu(e){return(typeof e=="string"?e:""+e).replace(xh,`
`).replace(_h,"")}function zi(e,t,n){if(t=tu(t),tu(e)!==t&&n)throw Error(he(425))}function la(){}var Yl=null,Xl=null;function Zl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Ql=typeof setTimeout=="function"?setTimeout:void 0,kh=typeof clearTimeout=="function"?clearTimeout:void 0,nu=typeof Promise=="function"?Promise:void 0,Sh=typeof queueMicrotask=="function"?queueMicrotask:typeof nu<"u"?function(e){return nu.resolve(null).then(e).catch(Eh)}:Ql;function Eh(e){setTimeout(function(){throw e})}function rl(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),ii(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);ii(t)}function _n(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ru(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ar=Math.random().toString(36).slice(2),Zt="__reactFiber$"+Ar,ui="__reactProps$"+Ar,on="__reactContainer$"+Ar,Jl="__reactEvents$"+Ar,Ch="__reactListeners$"+Ar,jh="__reactHandles$"+Ar;function bn(e){var t=e[Zt];if(t)return t;for(var n=e.parentNode;n;){if(t=n[on]||n[Zt]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ru(e);e!==null;){if(n=e[Zt])return n;e=ru(e)}return t}e=n,n=e.parentNode}return null}function xi(e){return e=e[Zt]||e[on],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function sr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(he(33))}function Ma(e){return e[ui]||null}var ql=[],ur=-1;function Dn(e){return{current:e}}function $e(e){0>ur||(e.current=ql[ur],ql[ur]=null,ur--)}function We(e,t){ur++,ql[ur]=e.current,e.current=t}var Mn={},ht=Dn(Mn),kt=Dn(!1),Wn=Mn;function kr(e,t){var n=e.type.contextTypes;if(!n)return Mn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},l;for(l in n)i[l]=t[l];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function St(e){return e=e.childContextTypes,e!=null}function oa(){$e(kt),$e(ht)}function iu(e,t,n){if(ht.current!==Mn)throw Error(he(168));We(ht,t),We(kt,n)}function ff(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(he(108,c0(e)||"Unknown",i));return Xe({},n,r)}function sa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mn,Wn=ht.current,We(ht,e),We(kt,kt.current),!0}function au(e,t,n){var r=e.stateNode;if(!r)throw Error(he(169));n?(e=ff(e,t,Wn),r.__reactInternalMemoizedMergedChildContext=e,$e(kt),$e(ht),We(ht,e)):$e(kt),We(kt,n)}var tn=null,Na=!1,il=!1;function df(e){tn===null?tn=[e]:tn.push(e)}function Mh(e){Na=!0,df(e)}function Rn(){if(!il&&tn!==null){il=!0;var e=0,t=Be;try{var n=tn;for(Be=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}tn=null,Na=!1}catch(i){throw tn!==null&&(tn=tn.slice(e+1)),Fc(zo,Rn),i}finally{Be=t,il=!1}}return null}var cr=[],fr=0,ua=null,ca=0,zt=[],It=0,Un=null,nn=1,rn="";function Pn(e,t){cr[fr++]=ca,cr[fr++]=ua,ua=e,ca=t}function hf(e,t,n){zt[It++]=nn,zt[It++]=rn,zt[It++]=Un,Un=e;var r=nn;e=rn;var i=32-Vt(r)-1;r&=~(1<<i),n+=1;var l=32-Vt(t)+i;if(30<l){var a=i-i%5;l=(r&(1<<a)-1).toString(32),r>>=a,i-=a,nn=1<<32-Vt(t)+i|n<<i|r,rn=l+e}else nn=1<<l|n<<i|r,rn=e}function Wo(e){e.return!==null&&(Pn(e,1),hf(e,1,0))}function Uo(e){for(;e===ua;)ua=cr[--fr],cr[fr]=null,ca=cr[--fr],cr[fr]=null;for(;e===Un;)Un=zt[--It],zt[It]=null,rn=zt[--It],zt[It]=null,nn=zt[--It],zt[It]=null}var Mt=null,jt=null,Ve=!1,$t=null;function pf(e,t){var n=Pt(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function lu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Mt=e,jt=_n(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Mt=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Un!==null?{id:nn,overflow:rn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Pt(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Mt=e,jt=null,!0):!1;default:return!1}}function eo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function to(e){if(Ve){var t=jt;if(t){var n=t;if(!lu(e,t)){if(eo(e))throw Error(he(418));t=_n(n.nextSibling);var r=Mt;t&&lu(e,t)?pf(r,n):(e.flags=e.flags&-4097|2,Ve=!1,Mt=e)}}else{if(eo(e))throw Error(he(418));e.flags=e.flags&-4097|2,Ve=!1,Mt=e}}}function ou(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Mt=e}function Ii(e){if(e!==Mt)return!1;if(!Ve)return ou(e),Ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Zl(e.type,e.memoizedProps)),t&&(t=jt)){if(eo(e))throw vf(),Error(he(418));for(;t;)pf(e,t),t=_n(t.nextSibling)}if(ou(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(he(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){jt=_n(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=Mt?_n(e.stateNode.nextSibling):null;return!0}function vf(){for(var e=jt;e;)e=_n(e.nextSibling)}function Sr(){jt=Mt=null,Ve=!1}function $o(e){$t===null?$t=[e]:$t.push(e)}var Nh=cn.ReactCurrentBatchConfig;function br(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(he(309));var r=n.stateNode}if(!r)throw Error(he(147,e));var i=r,l=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===l?t.ref:(t=function(a){var o=i.refs;a===null?delete o[l]:o[l]=a},t._stringRef=l,t)}if(typeof e!="string")throw Error(he(284));if(!n._owner)throw Error(he(290,e))}return e}function Pi(e,t){throw e=Object.prototype.toString.call(t),Error(he(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function su(e){var t=e._init;return t(e._payload)}function gf(e){function t(d,m){if(e){var f=d.deletions;f===null?(d.deletions=[m],d.flags|=16):f.push(m)}}function n(d,m){if(!e)return null;for(;m!==null;)t(d,m),m=m.sibling;return null}function r(d,m){for(d=new Map;m!==null;)m.key!==null?d.set(m.key,m):d.set(m.index,m),m=m.sibling;return d}function i(d,m){return d=Cn(d,m),d.index=0,d.sibling=null,d}function l(d,m,f){return d.index=f,e?(f=d.alternate,f!==null?(f=f.index,f<m?(d.flags|=2,m):f):(d.flags|=2,m)):(d.flags|=1048576,m)}function a(d){return e&&d.alternate===null&&(d.flags|=2),d}function o(d,m,f,_){return m===null||m.tag!==6?(m=fl(f,d.mode,_),m.return=d,m):(m=i(m,f),m.return=d,m)}function s(d,m,f,_){var E=f.type;return E===ir?u(d,m,f.props.children,_,f.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===dn&&su(E)===m.type)?(_=i(m,f.props),_.ref=br(d,m,f),_.return=d,_):(_=Qi(f.type,f.key,f.props,null,d.mode,_),_.ref=br(d,m,f),_.return=d,_)}function h(d,m,f,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==f.containerInfo||m.stateNode.implementation!==f.implementation?(m=dl(f,d.mode,_),m.return=d,m):(m=i(m,f.children||[]),m.return=d,m)}function u(d,m,f,_,E){return m===null||m.tag!==7?(m=Hn(f,d.mode,_,E),m.return=d,m):(m=i(m,f),m.return=d,m)}function c(d,m,f){if(typeof m=="string"&&m!==""||typeof m=="number")return m=fl(""+m,d.mode,f),m.return=d,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case Ei:return f=Qi(m.type,m.key,m.props,null,d.mode,f),f.ref=br(d,null,m),f.return=d,f;case rr:return m=dl(m,d.mode,f),m.return=d,m;case dn:var _=m._init;return c(d,_(m._payload),f)}if(Hr(m)||Lr(m))return m=Hn(m,d.mode,f,null),m.return=d,m;Pi(d,m)}return null}function v(d,m,f,_){var E=m!==null?m.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return E!==null?null:o(d,m,""+f,_);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Ei:return f.key===E?s(d,m,f,_):null;case rr:return f.key===E?h(d,m,f,_):null;case dn:return E=f._init,v(d,m,E(f._payload),_)}if(Hr(f)||Lr(f))return E!==null?null:u(d,m,f,_,null);Pi(d,f)}return null}function y(d,m,f,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return d=d.get(f)||null,o(m,d,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ei:return d=d.get(_.key===null?f:_.key)||null,s(m,d,_,E);case rr:return d=d.get(_.key===null?f:_.key)||null,h(m,d,_,E);case dn:var C=_._init;return y(d,m,f,C(_._payload),E)}if(Hr(_)||Lr(_))return d=d.get(f)||null,u(m,d,_,E,null);Pi(m,_)}return null}function k(d,m,f,_){for(var E=null,C=null,M=m,D=m=0,R=null;M!==null&&D<f.length;D++){M.index>D?(R=M,M=null):R=M.sibling;var A=v(d,M,f[D],_);if(A===null){M===null&&(M=R);break}e&&M&&A.alternate===null&&t(d,M),m=l(A,m,D),C===null?E=A:C.sibling=A,C=A,M=R}if(D===f.length)return n(d,M),Ve&&Pn(d,D),E;if(M===null){for(;D<f.length;D++)M=c(d,f[D],_),M!==null&&(m=l(M,m,D),C===null?E=M:C.sibling=M,C=M);return Ve&&Pn(d,D),E}for(M=r(d,M);D<f.length;D++)R=y(M,d,D,f[D],_),R!==null&&(e&&R.alternate!==null&&M.delete(R.key===null?D:R.key),m=l(R,m,D),C===null?E=R:C.sibling=R,C=R);return e&&M.forEach(function(L){return t(d,L)}),Ve&&Pn(d,D),E}function w(d,m,f,_){var E=Lr(f);if(typeof E!="function")throw Error(he(150));if(f=E.call(f),f==null)throw Error(he(151));for(var C=E=null,M=m,D=m=0,R=null,A=f.next();M!==null&&!A.done;D++,A=f.next()){M.index>D?(R=M,M=null):R=M.sibling;var L=v(d,M,A.value,_);if(L===null){M===null&&(M=R);break}e&&M&&L.alternate===null&&t(d,M),m=l(L,m,D),C===null?E=L:C.sibling=L,C=L,M=R}if(A.done)return n(d,M),Ve&&Pn(d,D),E;if(M===null){for(;!A.done;D++,A=f.next())A=c(d,A.value,_),A!==null&&(m=l(A,m,D),C===null?E=A:C.sibling=A,C=A);return Ve&&Pn(d,D),E}for(M=r(d,M);!A.done;D++,A=f.next())A=y(M,d,D,A.value,_),A!==null&&(e&&A.alternate!==null&&M.delete(A.key===null?D:A.key),m=l(A,m,D),C===null?E=A:C.sibling=A,C=A);return e&&M.forEach(function(O){return t(d,O)}),Ve&&Pn(d,D),E}function x(d,m,f,_){if(typeof f=="object"&&f!==null&&f.type===ir&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Ei:e:{for(var E=f.key,C=m;C!==null;){if(C.key===E){if(E=f.type,E===ir){if(C.tag===7){n(d,C.sibling),m=i(C,f.props.children),m.return=d,d=m;break e}}else if(C.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===dn&&su(E)===C.type){n(d,C.sibling),m=i(C,f.props),m.ref=br(d,C,f),m.return=d,d=m;break e}n(d,C);break}else t(d,C);C=C.sibling}f.type===ir?(m=Hn(f.props.children,d.mode,_,f.key),m.return=d,d=m):(_=Qi(f.type,f.key,f.props,null,d.mode,_),_.ref=br(d,m,f),_.return=d,d=_)}return a(d);case rr:e:{for(C=f.key;m!==null;){if(m.key===C)if(m.tag===4&&m.stateNode.containerInfo===f.containerInfo&&m.stateNode.implementation===f.implementation){n(d,m.sibling),m=i(m,f.children||[]),m.return=d,d=m;break e}else{n(d,m);break}else t(d,m);m=m.sibling}m=dl(f,d.mode,_),m.return=d,d=m}return a(d);case dn:return C=f._init,x(d,m,C(f._payload),_)}if(Hr(f))return k(d,m,f,_);if(Lr(f))return w(d,m,f,_);Pi(d,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,m!==null&&m.tag===6?(n(d,m.sibling),m=i(m,f),m.return=d,d=m):(n(d,m),m=fl(f,d.mode,_),m.return=d,d=m),a(d)):n(d,m)}return x}var Er=gf(!0),mf=gf(!1),fa=Dn(null),da=null,dr=null,Vo=null;function Go(){Vo=dr=da=null}function Ko(e){var t=fa.current;$e(fa),e._currentValue=t}function no(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function yr(e,t){da=e,Vo=dr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(_t=!0),e.firstContext=null)}function bt(e){var t=e._currentValue;if(Vo!==e)if(e={context:e,memoizedValue:t,next:null},dr===null){if(da===null)throw Error(he(308));dr=e,da.dependencies={lanes:0,firstContext:e}}else dr=dr.next=e;return t}var Tn=null;function Yo(e){Tn===null?Tn=[e]:Tn.push(e)}function wf(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Yo(t)):(n.next=i.next,i.next=n),t.interleaved=n,sn(e,r)}function sn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var hn=!1;function Xo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function an(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Oe&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,sn(e,n)}return i=r.interleaved,i===null?(t.next=t,Yo(r)):(t.next=i.next,i.next=t),r.interleaved=t,sn(e,n)}function Vi(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Io(e,n)}}function uu(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?i=l=a:l=l.next=a,n=n.next}while(n!==null);l===null?i=l=t:l=l.next=t}else i=l=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:l,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function ha(e,t,n,r){var i=e.updateQueue;hn=!1;var l=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var s=o,h=s.next;s.next=null,a===null?l=h:a.next=h,a=s;var u=e.alternate;u!==null&&(u=u.updateQueue,o=u.lastBaseUpdate,o!==a&&(o===null?u.firstBaseUpdate=h:o.next=h,u.lastBaseUpdate=s))}if(l!==null){var c=i.baseState;a=0,u=h=s=null,o=l;do{var v=o.lane,y=o.eventTime;if((r&v)===v){u!==null&&(u=u.next={eventTime:y,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var k=e,w=o;switch(v=t,y=n,w.tag){case 1:if(k=w.payload,typeof k=="function"){c=k.call(y,c,v);break e}c=k;break e;case 3:k.flags=k.flags&-65537|128;case 0:if(k=w.payload,v=typeof k=="function"?k.call(y,c,v):k,v==null)break e;c=Xe({},c,v);break e;case 2:hn=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[o]:v.push(o))}else y={eventTime:y,lane:v,tag:o.tag,payload:o.payload,callback:o.callback,next:null},u===null?(h=u=y,s=c):u=u.next=y,a|=v;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;v=o,o=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(u===null&&(s=c),i.baseState=s,i.firstBaseUpdate=h,i.lastBaseUpdate=u,t=i.shared.interleaved,t!==null){i=t;do a|=i.lane,i=i.next;while(i!==t)}else l===null&&(i.shared.lanes=0);Vn|=a,e.lanes=a,e.memoizedState=c}}function cu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(he(191,i));i.call(r)}}}var _i={},Jt=Dn(_i),ci=Dn(_i),fi=Dn(_i);function On(e){if(e===_i)throw Error(he(174));return e}function Zo(e,t){switch(We(fi,t),We(ci,e),We(Jt,_i),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Fl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Fl(t,e)}$e(Jt),We(Jt,t)}function Cr(){$e(Jt),$e(ci),$e(fi)}function xf(e){On(fi.current);var t=On(Jt.current),n=Fl(t,e.type);t!==n&&(We(ci,e),We(Jt,n))}function Qo(e){ci.current===e&&($e(Jt),$e(ci))}var Ke=Dn(0);function pa(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var al=[];function Jo(){for(var e=0;e<al.length;e++)al[e]._workInProgressVersionPrimary=null;al.length=0}var Gi=cn.ReactCurrentDispatcher,ll=cn.ReactCurrentBatchConfig,$n=0,Ye=null,rt=null,at=null,va=!1,Xr=!1,di=0,Dh=0;function ct(){throw Error(he(321))}function qo(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Kt(e[n],t[n]))return!1;return!0}function es(e,t,n,r,i,l){if($n=l,Ye=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Gi.current=e===null||e.memoizedState===null?zh:Ih,e=n(r,i),Xr){l=0;do{if(Xr=!1,di=0,25<=l)throw Error(he(301));l+=1,at=rt=null,t.updateQueue=null,Gi.current=Ph,e=n(r,i)}while(Xr)}if(Gi.current=ga,t=rt!==null&&rt.next!==null,$n=0,at=rt=Ye=null,va=!1,t)throw Error(he(300));return e}function ts(){var e=di!==0;return di=0,e}function Xt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Ye.memoizedState=at=e:at=at.next=e,at}function Tt(){if(rt===null){var e=Ye.alternate;e=e!==null?e.memoizedState:null}else e=rt.next;var t=at===null?Ye.memoizedState:at.next;if(t!==null)at=t,rt=e;else{if(e===null)throw Error(he(310));rt=e,e={memoizedState:rt.memoizedState,baseState:rt.baseState,baseQueue:rt.baseQueue,queue:rt.queue,next:null},at===null?Ye.memoizedState=at=e:at=at.next=e}return at}function hi(e,t){return typeof t=="function"?t(e):t}function ol(e){var t=Tt(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=rt,i=r.baseQueue,l=n.pending;if(l!==null){if(i!==null){var a=i.next;i.next=l.next,l.next=a}r.baseQueue=i=l,n.pending=null}if(i!==null){l=i.next,r=r.baseState;var o=a=null,s=null,h=l;do{var u=h.lane;if(($n&u)===u)s!==null&&(s=s.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:e(r,h.action);else{var c={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};s===null?(o=s=c,a=r):s=s.next=c,Ye.lanes|=u,Vn|=u}h=h.next}while(h!==null&&h!==l);s===null?a=r:s.next=o,Kt(r,t.memoizedState)||(_t=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=s,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do l=i.lane,Ye.lanes|=l,Vn|=l,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function sl(e){var t=Tt(),n=t.queue;if(n===null)throw Error(he(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,l=t.memoizedState;if(i!==null){n.pending=null;var a=i=i.next;do l=e(l,a.action),a=a.next;while(a!==i);Kt(l,t.memoizedState)||(_t=!0),t.memoizedState=l,t.baseQueue===null&&(t.baseState=l),n.lastRenderedState=l}return[l,r]}function _f(){}function kf(e,t){var n=Ye,r=Tt(),i=t(),l=!Kt(r.memoizedState,i);if(l&&(r.memoizedState=i,_t=!0),r=r.queue,ns(Cf.bind(null,n,r,e),[e]),r.getSnapshot!==t||l||at!==null&&at.memoizedState.tag&1){if(n.flags|=2048,pi(9,Ef.bind(null,n,r,i,t),void 0,null),lt===null)throw Error(he(349));$n&30||Sf(n,t,i)}return i}function Sf(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Ef(e,t,n,r){t.value=n,t.getSnapshot=r,jf(t)&&Mf(e)}function Cf(e,t,n){return n(function(){jf(t)&&Mf(e)})}function jf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Kt(e,n)}catch{return!0}}function Mf(e){var t=sn(e,1);t!==null&&Gt(t,e,1,-1)}function fu(e){var t=Xt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:hi,lastRenderedState:e},t.queue=e,e=e.dispatch=Lh.bind(null,Ye,e),[t.memoizedState,e]}function pi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Ye.updateQueue,t===null?(t={lastEffect:null,stores:null},Ye.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Nf(){return Tt().memoizedState}function Ki(e,t,n,r){var i=Xt();Ye.flags|=e,i.memoizedState=pi(1|t,n,void 0,r===void 0?null:r)}function Da(e,t,n,r){var i=Tt();r=r===void 0?null:r;var l=void 0;if(rt!==null){var a=rt.memoizedState;if(l=a.destroy,r!==null&&qo(r,a.deps)){i.memoizedState=pi(t,n,l,r);return}}Ye.flags|=e,i.memoizedState=pi(1|t,n,l,r)}function du(e,t){return Ki(8390656,8,e,t)}function ns(e,t){return Da(2048,8,e,t)}function Df(e,t){return Da(4,2,e,t)}function Rf(e,t){return Da(4,4,e,t)}function Af(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Lf(e,t,n){return n=n!=null?n.concat([e]):null,Da(4,4,Af.bind(null,t,e),n)}function rs(){}function zf(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function If(e,t){var n=Tt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&qo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Pf(e,t,n){return $n&21?(Kt(n,t)||(n=Oc(),Ye.lanes|=n,Vn|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,_t=!0),e.memoizedState=n)}function Rh(e,t){var n=Be;Be=n!==0&&4>n?n:4,e(!0);var r=ll.transition;ll.transition={};try{e(!1),t()}finally{Be=n,ll.transition=r}}function Ff(){return Tt().memoizedState}function Ah(e,t,n){var r=En(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},bf(e))Tf(t,n);else if(n=wf(e,t,n,r),n!==null){var i=vt();Gt(n,e,r,i),Of(n,t,r)}}function Lh(e,t,n){var r=En(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(bf(e))Tf(t,i);else{var l=e.alternate;if(e.lanes===0&&(l===null||l.lanes===0)&&(l=t.lastRenderedReducer,l!==null))try{var a=t.lastRenderedState,o=l(a,n);if(i.hasEagerState=!0,i.eagerState=o,Kt(o,a)){var s=t.interleaved;s===null?(i.next=i,Yo(t)):(i.next=s.next,s.next=i),t.interleaved=i;return}}catch{}finally{}n=wf(e,t,i,r),n!==null&&(i=vt(),Gt(n,e,r,i),Of(n,t,r))}}function bf(e){var t=e.alternate;return e===Ye||t!==null&&t===Ye}function Tf(e,t){Xr=va=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Of(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Io(e,n)}}var ga={readContext:bt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},zh={readContext:bt,useCallback:function(e,t){return Xt().memoizedState=[e,t===void 0?null:t],e},useContext:bt,useEffect:du,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Ki(4194308,4,Af.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ki(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ki(4,2,e,t)},useMemo:function(e,t){var n=Xt();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Xt();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ah.bind(null,Ye,e),[r.memoizedState,e]},useRef:function(e){var t=Xt();return e={current:e},t.memoizedState=e},useState:fu,useDebugValue:rs,useDeferredValue:function(e){return Xt().memoizedState=e},useTransition:function(){var e=fu(!1),t=e[0];return e=Rh.bind(null,e[1]),Xt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Ye,i=Xt();if(Ve){if(n===void 0)throw Error(he(407));n=n()}else{if(n=t(),lt===null)throw Error(he(349));$n&30||Sf(r,t,n)}i.memoizedState=n;var l={value:n,getSnapshot:t};return i.queue=l,du(Cf.bind(null,r,l,e),[e]),r.flags|=2048,pi(9,Ef.bind(null,r,l,n,t),void 0,null),n},useId:function(){var e=Xt(),t=lt.identifierPrefix;if(Ve){var n=rn,r=nn;n=(r&~(1<<32-Vt(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=di++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Dh++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Ih={readContext:bt,useCallback:zf,useContext:bt,useEffect:ns,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Rf,useMemo:If,useReducer:ol,useRef:Nf,useState:function(){return ol(hi)},useDebugValue:rs,useDeferredValue:function(e){var t=Tt();return Pf(t,rt.memoizedState,e)},useTransition:function(){var e=ol(hi)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:_f,useSyncExternalStore:kf,useId:Ff,unstable_isNewReconciler:!1},Ph={readContext:bt,useCallback:zf,useContext:bt,useEffect:ns,useImperativeHandle:Lf,useInsertionEffect:Df,useLayoutEffect:Rf,useMemo:If,useReducer:sl,useRef:Nf,useState:function(){return sl(hi)},useDebugValue:rs,useDeferredValue:function(e){var t=Tt();return rt===null?t.memoizedState=e:Pf(t,rt.memoizedState,e)},useTransition:function(){var e=sl(hi)[0],t=Tt().memoizedState;return[e,t]},useMutableSource:_f,useSyncExternalStore:kf,useId:Ff,unstable_isNewReconciler:!1};function Wt(e,t){if(e&&e.defaultProps){t=Xe({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function ro(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Xe({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ra={isMounted:function(e){return(e=e._reactInternals)?Zn(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=vt(),i=En(e),l=an(r,i);l.payload=t,n!=null&&(l.callback=n),t=kn(e,l,i),t!==null&&(Gt(t,e,i,r),Vi(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=vt(),i=En(e),l=an(r,i);l.tag=1,l.payload=t,n!=null&&(l.callback=n),t=kn(e,l,i),t!==null&&(Gt(t,e,i,r),Vi(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=vt(),r=En(e),i=an(n,r);i.tag=2,t!=null&&(i.callback=t),t=kn(e,i,r),t!==null&&(Gt(t,e,r,n),Vi(t,e,r))}};function hu(e,t,n,r,i,l,a){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,l,a):t.prototype&&t.prototype.isPureReactComponent?!li(n,r)||!li(i,l):!0}function Bf(e,t,n){var r=!1,i=Mn,l=t.contextType;return typeof l=="object"&&l!==null?l=bt(l):(i=St(t)?Wn:ht.current,r=t.contextTypes,l=(r=r!=null)?kr(e,i):Mn),t=new t(n,l),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ra,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=l),t}function pu(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ra.enqueueReplaceState(t,t.state,null)}function io(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Xo(e);var l=t.contextType;typeof l=="object"&&l!==null?i.context=bt(l):(l=St(t)?Wn:ht.current,i.context=kr(e,l)),i.state=e.memoizedState,l=t.getDerivedStateFromProps,typeof l=="function"&&(ro(e,t,l,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ra.enqueueReplaceState(i,i.state,null),ha(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function jr(e,t){try{var n="",r=t;do n+=u0(r),r=r.return;while(r);var i=n}catch(l){i=`
Error generating stack: `+l.message+`
`+l.stack}return{value:e,source:t,stack:i,digest:null}}function ul(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function ao(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Fh=typeof WeakMap=="function"?WeakMap:Map;function Hf(e,t,n){n=an(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){wa||(wa=!0,go=r),ao(e,t)},n}function Wf(e,t,n){n=an(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){ao(e,t)}}var l=e.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){ao(e,t),typeof r!="function"&&(Sn===null?Sn=new Set([this]):Sn.add(this));var a=t.stack;this.componentDidCatch(t.value,{componentStack:a!==null?a:""})}),n}function vu(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Fh;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Zh.bind(null,e,t,n),t.then(e,e))}function gu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function mu(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=an(-1,1),t.tag=2,kn(n,t,1))),n.lanes|=1),e)}var bh=cn.ReactCurrentOwner,_t=!1;function pt(e,t,n,r){t.child=e===null?mf(t,null,n,r):Er(t,e.child,n,r)}function wu(e,t,n,r,i){n=n.render;var l=t.ref;return yr(t,i),r=es(e,t,n,r,l,i),n=ts(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,un(e,t,i)):(Ve&&n&&Wo(t),t.flags|=1,pt(e,t,r,i),t.child)}function yu(e,t,n,r,i){if(e===null){var l=n.type;return typeof l=="function"&&!fs(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=l,Uf(e,t,l,r,i)):(e=Qi(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(l=e.child,!(e.lanes&i)){var a=l.memoizedProps;if(n=n.compare,n=n!==null?n:li,n(a,r)&&e.ref===t.ref)return un(e,t,i)}return t.flags|=1,e=Cn(l,r),e.ref=t.ref,e.return=t,t.child=e}function Uf(e,t,n,r,i){if(e!==null){var l=e.memoizedProps;if(li(l,r)&&e.ref===t.ref)if(_t=!1,t.pendingProps=r=l,(e.lanes&i)!==0)e.flags&131072&&(_t=!0);else return t.lanes=e.lanes,un(e,t,i)}return lo(e,t,n,r,i)}function $f(e,t,n){var r=t.pendingProps,i=r.children,l=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},We(pr,Ct),Ct|=n;else{if(!(n&1073741824))return e=l!==null?l.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,We(pr,Ct),Ct|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=l!==null?l.baseLanes:n,We(pr,Ct),Ct|=r}else l!==null?(r=l.baseLanes|n,t.memoizedState=null):r=n,We(pr,Ct),Ct|=r;return pt(e,t,i,n),t.child}function Vf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function lo(e,t,n,r,i){var l=St(n)?Wn:ht.current;return l=kr(t,l),yr(t,i),n=es(e,t,n,r,l,i),r=ts(),e!==null&&!_t?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,un(e,t,i)):(Ve&&r&&Wo(t),t.flags|=1,pt(e,t,n,i),t.child)}function xu(e,t,n,r,i){if(St(n)){var l=!0;sa(t)}else l=!1;if(yr(t,i),t.stateNode===null)Yi(e,t),Bf(t,n,r),io(t,n,r,i),r=!0;else if(e===null){var a=t.stateNode,o=t.memoizedProps;a.props=o;var s=a.context,h=n.contextType;typeof h=="object"&&h!==null?h=bt(h):(h=St(n)?Wn:ht.current,h=kr(t,h));var u=n.getDerivedStateFromProps,c=typeof u=="function"||typeof a.getSnapshotBeforeUpdate=="function";c||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==r||s!==h)&&pu(t,a,r,h),hn=!1;var v=t.memoizedState;a.state=v,ha(t,r,a,i),s=t.memoizedState,o!==r||v!==s||kt.current||hn?(typeof u=="function"&&(ro(t,n,u,r),s=t.memoizedState),(o=hn||hu(t,n,o,r,v,s,h))?(c||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),a.props=r,a.state=s,a.context=h,r=o):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,yf(e,t),o=t.memoizedProps,h=t.type===t.elementType?o:Wt(t.type,o),a.props=h,c=t.pendingProps,v=a.context,s=n.contextType,typeof s=="object"&&s!==null?s=bt(s):(s=St(n)?Wn:ht.current,s=kr(t,s));var y=n.getDerivedStateFromProps;(u=typeof y=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==c||v!==s)&&pu(t,a,r,s),hn=!1,v=t.memoizedState,a.state=v,ha(t,r,a,i);var k=t.memoizedState;o!==c||v!==k||kt.current||hn?(typeof y=="function"&&(ro(t,n,y,r),k=t.memoizedState),(h=hn||hu(t,n,h,r,v,k,s)||!1)?(u||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,k,s),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,k,s)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=k),a.props=r,a.state=k,a.context=s,r=h):(typeof a.componentDidUpdate!="function"||o===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return oo(e,t,n,r,l,i)}function oo(e,t,n,r,i,l){Vf(e,t);var a=(t.flags&128)!==0;if(!r&&!a)return i&&au(t,n,!1),un(e,t,l);r=t.stateNode,bh.current=t;var o=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&a?(t.child=Er(t,e.child,null,l),t.child=Er(t,null,o,l)):pt(e,t,o,l),t.memoizedState=r.state,i&&au(t,n,!0),t.child}function Gf(e){var t=e.stateNode;t.pendingContext?iu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&iu(e,t.context,!1),Zo(e,t.containerInfo)}function _u(e,t,n,r,i){return Sr(),$o(i),t.flags|=256,pt(e,t,n,r),t.child}var so={dehydrated:null,treeContext:null,retryLane:0};function uo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Kf(e,t,n){var r=t.pendingProps,i=Ke.current,l=!1,a=(t.flags&128)!==0,o;if((o=a)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(l=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),We(Ke,i&1),e===null)return to(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(a=r.children,e=r.fallback,l?(r=t.mode,l=t.child,a={mode:"hidden",children:a},!(r&1)&&l!==null?(l.childLanes=0,l.pendingProps=a):l=za(a,r,0,null),e=Hn(e,r,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=uo(n),t.memoizedState=so,e):is(t,a));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return Th(e,t,a,r,o,i,n);if(l){l=r.fallback,a=t.mode,i=e.child,o=i.sibling;var s={mode:"hidden",children:r.children};return!(a&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=s,t.deletions=null):(r=Cn(i,s),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?l=Cn(o,l):(l=Hn(l,a,n,null),l.flags|=2),l.return=t,r.return=t,r.sibling=l,t.child=r,r=l,l=t.child,a=e.child.memoizedState,a=a===null?uo(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},l.memoizedState=a,l.childLanes=e.childLanes&~n,t.memoizedState=so,r}return l=e.child,e=l.sibling,r=Cn(l,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function is(e,t){return t=za({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fi(e,t,n,r){return r!==null&&$o(r),Er(t,e.child,null,n),e=is(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Th(e,t,n,r,i,l,a){if(n)return t.flags&256?(t.flags&=-257,r=ul(Error(he(422))),Fi(e,t,a,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(l=r.fallback,i=t.mode,r=za({mode:"visible",children:r.children},i,0,null),l=Hn(l,i,a,null),l.flags|=2,r.return=t,l.return=t,r.sibling=l,t.child=r,t.mode&1&&Er(t,e.child,null,a),t.child.memoizedState=uo(a),t.memoizedState=so,l);if(!(t.mode&1))return Fi(e,t,a,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,l=Error(he(419)),r=ul(l,r,void 0),Fi(e,t,a,r)}if(o=(a&e.childLanes)!==0,_t||o){if(r=lt,r!==null){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|a)?0:i,i!==0&&i!==l.retryLane&&(l.retryLane=i,sn(e,i),Gt(r,e,i,-1))}return cs(),r=ul(Error(he(421))),Fi(e,t,a,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Qh.bind(null,e),i._reactRetry=t,null):(e=l.treeContext,jt=_n(i.nextSibling),Mt=t,Ve=!0,$t=null,e!==null&&(zt[It++]=nn,zt[It++]=rn,zt[It++]=Un,nn=e.id,rn=e.overflow,Un=t),t=is(t,r.children),t.flags|=4096,t)}function ku(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),no(e.return,t,n)}function cl(e,t,n,r,i){var l=e.memoizedState;l===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=r,l.tail=n,l.tailMode=i)}function Yf(e,t,n){var r=t.pendingProps,i=r.revealOrder,l=r.tail;if(pt(e,t,r.children,n),r=Ke.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ku(e,n,t);else if(e.tag===19)ku(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(We(Ke,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&pa(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),cl(t,!1,i,n,l);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&pa(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}cl(t,!0,n,null,l);break;case"together":cl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Yi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function un(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Vn|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(he(153));if(t.child!==null){for(e=t.child,n=Cn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Cn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function Oh(e,t,n){switch(t.tag){case 3:Gf(t),Sr();break;case 5:xf(t);break;case 1:St(t.type)&&sa(t);break;case 4:Zo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;We(fa,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(We(Ke,Ke.current&1),t.flags|=128,null):n&t.child.childLanes?Kf(e,t,n):(We(Ke,Ke.current&1),e=un(e,t,n),e!==null?e.sibling:null);We(Ke,Ke.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Yf(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),We(Ke,Ke.current),r)break;return null;case 22:case 23:return t.lanes=0,$f(e,t,n)}return un(e,t,n)}var Xf,co,Zf,Qf;Xf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};co=function(){};Zf=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,On(Jt.current);var l=null;switch(n){case"input":i=Ll(e,i),r=Ll(e,r),l=[];break;case"select":i=Xe({},i,{value:void 0}),r=Xe({},r,{value:void 0}),l=[];break;case"textarea":i=Pl(e,i),r=Pl(e,r),l=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=la)}bl(n,r);var a;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var o=i[h];for(a in o)o.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(qr.hasOwnProperty(h)?l||(l=[]):(l=l||[]).push(h,null));for(h in r){var s=r[h];if(o=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&s!==o&&(s!=null||o!=null))if(h==="style")if(o){for(a in o)!o.hasOwnProperty(a)||s&&s.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in s)s.hasOwnProperty(a)&&o[a]!==s[a]&&(n||(n={}),n[a]=s[a])}else n||(l||(l=[]),l.push(h,n)),n=s;else h==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,o=o?o.__html:void 0,s!=null&&o!==s&&(l=l||[]).push(h,s)):h==="children"?typeof s!="string"&&typeof s!="number"||(l=l||[]).push(h,""+s):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(qr.hasOwnProperty(h)?(s!=null&&h==="onScroll"&&Ue("scroll",e),l||o===s||(l=[])):(l=l||[]).push(h,s))}n&&(l=l||[]).push("style",n);var h=l;(t.updateQueue=h)&&(t.flags|=4)}};Qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function Tr(e,t){if(!Ve)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ft(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Bh(e,t,n){var r=t.pendingProps;switch(Uo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ft(t),null;case 1:return St(t.type)&&oa(),ft(t),null;case 3:return r=t.stateNode,Cr(),$e(kt),$e(ht),Jo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ii(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,$t!==null&&(yo($t),$t=null))),co(e,t),ft(t),null;case 5:Qo(t);var i=On(fi.current);if(n=t.type,e!==null&&t.stateNode!=null)Zf(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(he(166));return ft(t),null}if(e=On(Jt.current),Ii(t)){r=t.stateNode,n=t.type;var l=t.memoizedProps;switch(r[Zt]=t,r[ui]=l,e=(t.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<Ur.length;i++)Ue(Ur[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":As(r,l),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!l.multiple},Ue("invalid",r);break;case"textarea":zs(r,l),Ue("invalid",r)}bl(n,l),i=null;for(var a in l)if(l.hasOwnProperty(a)){var o=l[a];a==="children"?typeof o=="string"?r.textContent!==o&&(l.suppressHydrationWarning!==!0&&zi(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(l.suppressHydrationWarning!==!0&&zi(r.textContent,o,e),i=["children",""+o]):qr.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&Ue("scroll",r)}switch(n){case"input":Ci(r),Ls(r,l,!0);break;case"textarea":Ci(r),Is(r);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(r.onclick=la)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{a=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ec(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=a.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),n==="select"&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[Zt]=t,e[ui]=r,Xf(e,t,!1,!1),t.stateNode=e;e:{switch(a=Tl(n,r),n){case"dialog":Ue("cancel",e),Ue("close",e),i=r;break;case"iframe":case"object":case"embed":Ue("load",e),i=r;break;case"video":case"audio":for(i=0;i<Ur.length;i++)Ue(Ur[i],e);i=r;break;case"source":Ue("error",e),i=r;break;case"img":case"image":case"link":Ue("error",e),Ue("load",e),i=r;break;case"details":Ue("toggle",e),i=r;break;case"input":As(e,r),i=Ll(e,r),Ue("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Xe({},r,{value:void 0}),Ue("invalid",e);break;case"textarea":zs(e,r),i=Pl(e,r),Ue("invalid",e);break;default:i=r}bl(n,i),o=i;for(l in o)if(o.hasOwnProperty(l)){var s=o[l];l==="style"?Mc(e,s):l==="dangerouslySetInnerHTML"?(s=s?s.__html:void 0,s!=null&&Cc(e,s)):l==="children"?typeof s=="string"?(n!=="textarea"||s!=="")&&ei(e,s):typeof s=="number"&&ei(e,""+s):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(qr.hasOwnProperty(l)?s!=null&&l==="onScroll"&&Ue("scroll",e):s!=null&&No(e,l,s,a))}switch(n){case"input":Ci(e),Ls(e,r,!1);break;case"textarea":Ci(e),Is(e);break;case"option":r.value!=null&&e.setAttribute("value",""+jn(r.value));break;case"select":e.multiple=!!r.multiple,l=r.value,l!=null?vr(e,!!r.multiple,l,!1):r.defaultValue!=null&&vr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=la)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ft(t),null;case 6:if(e&&t.stateNode!=null)Qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(he(166));if(n=On(fi.current),On(Jt.current),Ii(t)){if(r=t.stateNode,n=t.memoizedProps,r[Zt]=t,(l=r.nodeValue!==n)&&(e=Mt,e!==null))switch(e.tag){case 3:zi(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&zi(r.nodeValue,n,(e.mode&1)!==0)}l&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Zt]=t,t.stateNode=r}return ft(t),null;case 13:if($e(Ke),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ve&&jt!==null&&t.mode&1&&!(t.flags&128))vf(),Sr(),t.flags|=98560,l=!1;else if(l=Ii(t),r!==null&&r.dehydrated!==null){if(e===null){if(!l)throw Error(he(318));if(l=t.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(he(317));l[Zt]=t}else Sr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;ft(t),l=!1}else $t!==null&&(yo($t),$t=null),l=!0;if(!l)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ke.current&1?it===0&&(it=3):cs())),t.updateQueue!==null&&(t.flags|=4),ft(t),null);case 4:return Cr(),co(e,t),e===null&&oi(t.stateNode.containerInfo),ft(t),null;case 10:return Ko(t.type._context),ft(t),null;case 17:return St(t.type)&&oa(),ft(t),null;case 19:if($e(Ke),l=t.memoizedState,l===null)return ft(t),null;if(r=(t.flags&128)!==0,a=l.rendering,a===null)if(r)Tr(l,!1);else{if(it!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=pa(e),a!==null){for(t.flags|=128,Tr(l,!1),r=a.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)l=n,e=r,l.flags&=14680066,a=l.alternate,a===null?(l.childLanes=0,l.lanes=e,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=a.childLanes,l.lanes=a.lanes,l.child=a.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=a.memoizedProps,l.memoizedState=a.memoizedState,l.updateQueue=a.updateQueue,l.type=a.type,e=a.dependencies,l.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return We(Ke,Ke.current&1|2),t.child}e=e.sibling}l.tail!==null&&qe()>Mr&&(t.flags|=128,r=!0,Tr(l,!1),t.lanes=4194304)}else{if(!r)if(e=pa(a),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Tr(l,!0),l.tail===null&&l.tailMode==="hidden"&&!a.alternate&&!Ve)return ft(t),null}else 2*qe()-l.renderingStartTime>Mr&&n!==1073741824&&(t.flags|=128,r=!0,Tr(l,!1),t.lanes=4194304);l.isBackwards?(a.sibling=t.child,t.child=a):(n=l.last,n!==null?n.sibling=a:t.child=a,l.last=a)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=qe(),t.sibling=null,n=Ke.current,We(Ke,r?n&1|2:n&1),t):(ft(t),null);case 22:case 23:return us(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Ct&1073741824&&(ft(t),t.subtreeFlags&6&&(t.flags|=8192)):ft(t),null;case 24:return null;case 25:return null}throw Error(he(156,t.tag))}function Hh(e,t){switch(Uo(t),t.tag){case 1:return St(t.type)&&oa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cr(),$e(kt),$e(ht),Jo(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qo(t),null;case 13:if($e(Ke),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(he(340));Sr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return $e(Ke),null;case 4:return Cr(),null;case 10:return Ko(t.type._context),null;case 22:case 23:return us(),null;case 24:return null;default:return null}}var bi=!1,dt=!1,Wh=typeof WeakSet=="function"?WeakSet:Set,Ce=null;function hr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(e,t,r)}else n.current=null}function fo(e,t,n){try{n()}catch(r){Qe(e,t,r)}}var Su=!1;function Uh(e,t){if(Yl=ra,e=tf(),Ho(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,l=r.focusNode;r=r.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var a=0,o=-1,s=-1,h=0,u=0,c=e,v=null;t:for(;;){for(var y;c!==n||i!==0&&c.nodeType!==3||(o=a+i),c!==l||r!==0&&c.nodeType!==3||(s=a+r),c.nodeType===3&&(a+=c.nodeValue.length),(y=c.firstChild)!==null;)v=c,c=y;for(;;){if(c===e)break t;if(v===n&&++h===i&&(o=a),v===l&&++u===r&&(s=a),(y=c.nextSibling)!==null)break;c=v,v=c.parentNode}c=y}n=o===-1||s===-1?null:{start:o,end:s}}else n=null}n=n||{start:0,end:0}}else n=null;for(Xl={focusedElem:e,selectionRange:n},ra=!1,Ce=t;Ce!==null;)if(t=Ce,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ce=e;else for(;Ce!==null;){t=Ce;try{var k=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(k!==null){var w=k.memoizedProps,x=k.memoizedState,d=t.stateNode,m=d.getSnapshotBeforeUpdate(t.elementType===t.type?w:Wt(t.type,w),x);d.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(he(163))}}catch(_){Qe(t,t.return,_)}if(e=t.sibling,e!==null){e.return=t.return,Ce=e;break}Ce=t.return}return k=Su,Su=!1,k}function Zr(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var l=i.destroy;i.destroy=void 0,l!==void 0&&fo(t,n,l)}i=i.next}while(i!==r)}}function Aa(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ho(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Jf(e){var t=e.alternate;t!==null&&(e.alternate=null,Jf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Zt],delete t[ui],delete t[Jl],delete t[Ch],delete t[jh])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function qf(e){return e.tag===5||e.tag===3||e.tag===4}function Eu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||qf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function po(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=la));else if(r!==4&&(e=e.child,e!==null))for(po(e,t,n),e=e.sibling;e!==null;)po(e,t,n),e=e.sibling}function vo(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(vo(e,t,n),e=e.sibling;e!==null;)vo(e,t,n),e=e.sibling}var ot=null,Ut=!1;function fn(e,t,n){for(n=n.child;n!==null;)ed(e,t,n),n=n.sibling}function ed(e,t,n){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Sa,n)}catch{}switch(n.tag){case 5:dt||hr(n,t);case 6:var r=ot,i=Ut;ot=null,fn(e,t,n),ot=r,Ut=i,ot!==null&&(Ut?(e=ot,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ot.removeChild(n.stateNode));break;case 18:ot!==null&&(Ut?(e=ot,n=n.stateNode,e.nodeType===8?rl(e.parentNode,n):e.nodeType===1&&rl(e,n),ii(e)):rl(ot,n.stateNode));break;case 4:r=ot,i=Ut,ot=n.stateNode.containerInfo,Ut=!0,fn(e,t,n),ot=r,Ut=i;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var l=i,a=l.destroy;l=l.tag,a!==void 0&&(l&2||l&4)&&fo(n,t,a),i=i.next}while(i!==r)}fn(e,t,n);break;case 1:if(!dt&&(hr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Qe(n,t,o)}fn(e,t,n);break;case 21:fn(e,t,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,fn(e,t,n),dt=r):fn(e,t,n);break;default:fn(e,t,n)}}function Cu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Wh),t.forEach(function(r){var i=Jh.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var l=e,a=t,o=a;e:for(;o!==null;){switch(o.tag){case 5:ot=o.stateNode,Ut=!1;break e;case 3:ot=o.stateNode.containerInfo,Ut=!0;break e;case 4:ot=o.stateNode.containerInfo,Ut=!0;break e}o=o.return}if(ot===null)throw Error(he(160));ed(l,a,i),ot=null,Ut=!1;var s=i.alternate;s!==null&&(s.return=null),i.return=null}catch(h){Qe(i,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)td(t,e),t=t.sibling}function td(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Bt(t,e),Yt(e),r&4){try{Zr(3,e,e.return),Aa(3,e)}catch(w){Qe(e,e.return,w)}try{Zr(5,e,e.return)}catch(w){Qe(e,e.return,w)}}break;case 1:Bt(t,e),Yt(e),r&512&&n!==null&&hr(n,n.return);break;case 5:if(Bt(t,e),Yt(e),r&512&&n!==null&&hr(n,n.return),e.flags&32){var i=e.stateNode;try{ei(i,"")}catch(w){Qe(e,e.return,w)}}if(r&4&&(i=e.stateNode,i!=null)){var l=e.memoizedProps,a=n!==null?n.memoizedProps:l,o=e.type,s=e.updateQueue;if(e.updateQueue=null,s!==null)try{o==="input"&&l.type==="radio"&&l.name!=null&&kc(i,l),Tl(o,a);var h=Tl(o,l);for(a=0;a<s.length;a+=2){var u=s[a],c=s[a+1];u==="style"?Mc(i,c):u==="dangerouslySetInnerHTML"?Cc(i,c):u==="children"?ei(i,c):No(i,u,c,h)}switch(o){case"input":zl(i,l);break;case"textarea":Sc(i,l);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!l.multiple;var y=l.value;y!=null?vr(i,!!l.multiple,y,!1):v!==!!l.multiple&&(l.defaultValue!=null?vr(i,!!l.multiple,l.defaultValue,!0):vr(i,!!l.multiple,l.multiple?[]:"",!1))}i[ui]=l}catch(w){Qe(e,e.return,w)}}break;case 6:if(Bt(t,e),Yt(e),r&4){if(e.stateNode===null)throw Error(he(162));i=e.stateNode,l=e.memoizedProps;try{i.nodeValue=l}catch(w){Qe(e,e.return,w)}}break;case 3:if(Bt(t,e),Yt(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ii(t.containerInfo)}catch(w){Qe(e,e.return,w)}break;case 4:Bt(t,e),Yt(e);break;case 13:Bt(t,e),Yt(e),i=e.child,i.flags&8192&&(l=i.memoizedState!==null,i.stateNode.isHidden=l,!l||i.alternate!==null&&i.alternate.memoizedState!==null||(os=qe())),r&4&&Cu(e);break;case 22:if(u=n!==null&&n.memoizedState!==null,e.mode&1?(dt=(h=dt)||u,Bt(t,e),dt=h):Bt(t,e),Yt(e),r&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!u&&e.mode&1)for(Ce=e,u=e.child;u!==null;){for(c=Ce=u;Ce!==null;){switch(v=Ce,y=v.child,v.tag){case 0:case 11:case 14:case 15:Zr(4,v,v.return);break;case 1:hr(v,v.return);var k=v.stateNode;if(typeof k.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,k.props=t.memoizedProps,k.state=t.memoizedState,k.componentWillUnmount()}catch(w){Qe(r,n,w)}}break;case 5:hr(v,v.return);break;case 22:if(v.memoizedState!==null){Mu(c);continue}}y!==null?(y.return=v,Ce=y):Mu(c)}u=u.sibling}e:for(u=null,c=e;;){if(c.tag===5){if(u===null){u=c;try{i=c.stateNode,h?(l=i.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(o=c.stateNode,s=c.memoizedProps.style,a=s!=null&&s.hasOwnProperty("display")?s.display:null,o.style.display=jc("display",a))}catch(w){Qe(e,e.return,w)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(w){Qe(e,e.return,w)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break e;for(;c.sibling===null;){if(c.return===null||c.return===e)break e;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Bt(t,e),Yt(e),r&4&&Cu(e);break;case 21:break;default:Bt(t,e),Yt(e)}}function Yt(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(qf(n)){var r=n;break e}n=n.return}throw Error(he(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ei(i,""),r.flags&=-33);var l=Eu(e);vo(e,l,i);break;case 3:case 4:var a=r.stateNode.containerInfo,o=Eu(e);po(e,o,a);break;default:throw Error(he(161))}}catch(s){Qe(e,e.return,s)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $h(e,t,n){Ce=e,nd(e)}function nd(e,t,n){for(var r=(e.mode&1)!==0;Ce!==null;){var i=Ce,l=i.child;if(i.tag===22&&r){var a=i.memoizedState!==null||bi;if(!a){var o=i.alternate,s=o!==null&&o.memoizedState!==null||dt;o=bi;var h=dt;if(bi=a,(dt=s)&&!h)for(Ce=i;Ce!==null;)a=Ce,s=a.child,a.tag===22&&a.memoizedState!==null?Nu(i):s!==null?(s.return=a,Ce=s):Nu(i);for(;l!==null;)Ce=l,nd(l),l=l.sibling;Ce=i,bi=o,dt=h}ju(e)}else i.subtreeFlags&8772&&l!==null?(l.return=i,Ce=l):ju(e)}}function ju(e){for(;Ce!==null;){var t=Ce;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:dt||Aa(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!dt)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Wt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var l=t.updateQueue;l!==null&&cu(t,l,r);break;case 3:var a=t.updateQueue;if(a!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}cu(t,a,n)}break;case 5:var o=t.stateNode;if(n===null&&t.flags&4){n=o;var s=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":s.autoFocus&&n.focus();break;case"img":s.src&&(n.src=s.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var u=h.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&ii(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(he(163))}dt||t.flags&512&&ho(t)}catch(v){Qe(t,t.return,v)}}if(t===e){Ce=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function Mu(e){for(;Ce!==null;){var t=Ce;if(t===e){Ce=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ce=n;break}Ce=t.return}}function Nu(e){for(;Ce!==null;){var t=Ce;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Aa(4,t)}catch(s){Qe(t,n,s)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(s){Qe(t,i,s)}}var l=t.return;try{ho(t)}catch(s){Qe(t,l,s)}break;case 5:var a=t.return;try{ho(t)}catch(s){Qe(t,a,s)}}}catch(s){Qe(t,t.return,s)}if(t===e){Ce=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Ce=o;break}Ce=t.return}}var Vh=Math.ceil,ma=cn.ReactCurrentDispatcher,as=cn.ReactCurrentOwner,Ft=cn.ReactCurrentBatchConfig,Oe=0,lt=null,tt=null,st=0,Ct=0,pr=Dn(0),it=0,vi=null,Vn=0,La=0,ls=0,Qr=null,xt=null,os=0,Mr=1/0,en=null,wa=!1,go=null,Sn=null,Ti=!1,mn=null,ya=0,Jr=0,mo=null,Xi=-1,Zi=0;function vt(){return Oe&6?qe():Xi!==-1?Xi:Xi=qe()}function En(e){return e.mode&1?Oe&2&&st!==0?st&-st:Nh.transition!==null?(Zi===0&&(Zi=Oc()),Zi):(e=Be,e!==0||(e=window.event,e=e===void 0?16:Gc(e.type)),e):1}function Gt(e,t,n,r){if(50<Jr)throw Jr=0,mo=null,Error(he(185));wi(e,n,r),(!(Oe&2)||e!==lt)&&(e===lt&&(!(Oe&2)&&(La|=n),it===4&&vn(e,st)),Et(e,r),n===1&&Oe===0&&!(t.mode&1)&&(Mr=qe()+500,Na&&Rn()))}function Et(e,t){var n=e.callbackNode;N0(e,t);var r=na(e,e===lt?st:0);if(r===0)n!==null&&bs(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&bs(n),t===1)e.tag===0?Mh(Du.bind(null,e)):df(Du.bind(null,e)),Sh(function(){!(Oe&6)&&Rn()}),n=null;else{switch(Bc(r)){case 1:n=zo;break;case 4:n=bc;break;case 16:n=ta;break;case 536870912:n=Tc;break;default:n=ta}n=cd(n,rd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rd(e,t){if(Xi=-1,Zi=0,Oe&6)throw Error(he(327));var n=e.callbackNode;if(xr()&&e.callbackNode!==n)return null;var r=na(e,e===lt?st:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=xa(e,r);else{t=r;var i=Oe;Oe|=2;var l=ad();(lt!==e||st!==t)&&(en=null,Mr=qe()+500,Bn(e,t));do try{Yh();break}catch(o){id(e,o)}while(!0);Go(),ma.current=l,Oe=i,tt!==null?t=0:(lt=null,st=0,t=it)}if(t!==0){if(t===2&&(i=Ul(e),i!==0&&(r=i,t=wo(e,i))),t===1)throw n=vi,Bn(e,0),vn(e,r),Et(e,qe()),n;if(t===6)vn(e,r);else{if(i=e.current.alternate,!(r&30)&&!Gh(i)&&(t=xa(e,r),t===2&&(l=Ul(e),l!==0&&(r=l,t=wo(e,l))),t===1))throw n=vi,Bn(e,0),vn(e,r),Et(e,qe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(he(345));case 2:Fn(e,xt,en);break;case 3:if(vn(e,r),(r&130023424)===r&&(t=os+500-qe(),10<t)){if(na(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){vt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Ql(Fn.bind(null,e,xt,en),t);break}Fn(e,xt,en);break;case 4:if(vn(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-Vt(r);l=1<<a,a=t[a],a>i&&(i=a),r&=~l}if(r=i,r=qe()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Vh(r/1960))-r,10<r){e.timeoutHandle=Ql(Fn.bind(null,e,xt,en),r);break}Fn(e,xt,en);break;case 5:Fn(e,xt,en);break;default:throw Error(he(329))}}}return Et(e,qe()),e.callbackNode===n?rd.bind(null,e):null}function wo(e,t){var n=Qr;return e.current.memoizedState.isDehydrated&&(Bn(e,t).flags|=256),e=xa(e,t),e!==2&&(t=xt,xt=n,t!==null&&yo(t)),e}function yo(e){xt===null?xt=e:xt.push.apply(xt,e)}function Gh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],l=i.getSnapshot;i=i.value;try{if(!Kt(l(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function vn(e,t){for(t&=~ls,t&=~La,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Vt(t),r=1<<n;e[n]=-1,t&=~r}}function Du(e){if(Oe&6)throw Error(he(327));xr();var t=na(e,0);if(!(t&1))return Et(e,qe()),null;var n=xa(e,t);if(e.tag!==0&&n===2){var r=Ul(e);r!==0&&(t=r,n=wo(e,r))}if(n===1)throw n=vi,Bn(e,0),vn(e,t),Et(e,qe()),n;if(n===6)throw Error(he(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Fn(e,xt,en),Et(e,qe()),null}function ss(e,t){var n=Oe;Oe|=1;try{return e(t)}finally{Oe=n,Oe===0&&(Mr=qe()+500,Na&&Rn())}}function Gn(e){mn!==null&&mn.tag===0&&!(Oe&6)&&xr();var t=Oe;Oe|=1;var n=Ft.transition,r=Be;try{if(Ft.transition=null,Be=1,e)return e()}finally{Be=r,Ft.transition=n,Oe=t,!(Oe&6)&&Rn()}}function us(){Ct=pr.current,$e(pr)}function Bn(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,kh(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Uo(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&oa();break;case 3:Cr(),$e(kt),$e(ht),Jo();break;case 5:Qo(r);break;case 4:Cr();break;case 13:$e(Ke);break;case 19:$e(Ke);break;case 10:Ko(r.type._context);break;case 22:case 23:us()}n=n.return}if(lt=e,tt=e=Cn(e.current,null),st=Ct=t,it=0,vi=null,ls=La=Vn=0,xt=Qr=null,Tn!==null){for(t=0;t<Tn.length;t++)if(n=Tn[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,l=n.pending;if(l!==null){var a=l.next;l.next=i,r.next=a}n.pending=r}Tn=null}return e}function id(e,t){do{var n=tt;try{if(Go(),Gi.current=ga,va){for(var r=Ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}va=!1}if($n=0,at=rt=Ye=null,Xr=!1,di=0,as.current=null,n===null||n.return===null){it=1,vi=t,tt=null;break}e:{var l=e,a=n.return,o=n,s=t;if(t=st,o.flags|=32768,s!==null&&typeof s=="object"&&typeof s.then=="function"){var h=s,u=o,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var v=u.alternate;v?(u.updateQueue=v.updateQueue,u.memoizedState=v.memoizedState,u.lanes=v.lanes):(u.updateQueue=null,u.memoizedState=null)}var y=gu(a);if(y!==null){y.flags&=-257,mu(y,a,o,l,t),y.mode&1&&vu(l,h,t),t=y,s=h;var k=t.updateQueue;if(k===null){var w=new Set;w.add(s),t.updateQueue=w}else k.add(s);break e}else{if(!(t&1)){vu(l,h,t),cs();break e}s=Error(he(426))}}else if(Ve&&o.mode&1){var x=gu(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),mu(x,a,o,l,t),$o(jr(s,o));break e}}l=s=jr(s,o),it!==4&&(it=2),Qr===null?Qr=[l]:Qr.push(l),l=a;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t;var d=Hf(l,s,t);uu(l,d);break e;case 1:o=s;var m=l.type,f=l.stateNode;if(!(l.flags&128)&&(typeof m.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Sn===null||!Sn.has(f)))){l.flags|=65536,t&=-t,l.lanes|=t;var _=Wf(l,o,t);uu(l,_);break e}}l=l.return}while(l!==null)}od(n)}catch(E){t=E,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(!0)}function ad(){var e=ma.current;return ma.current=ga,e===null?ga:e}function cs(){(it===0||it===3||it===2)&&(it=4),lt===null||!(Vn&268435455)&&!(La&268435455)||vn(lt,st)}function xa(e,t){var n=Oe;Oe|=2;var r=ad();(lt!==e||st!==t)&&(en=null,Bn(e,t));do try{Kh();break}catch(i){id(e,i)}while(!0);if(Go(),Oe=n,ma.current=r,tt!==null)throw Error(he(261));return lt=null,st=0,it}function Kh(){for(;tt!==null;)ld(tt)}function Yh(){for(;tt!==null&&!y0();)ld(tt)}function ld(e){var t=ud(e.alternate,e,Ct);e.memoizedProps=e.pendingProps,t===null?od(e):tt=t,as.current=null}function od(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Hh(n,t),n!==null){n.flags&=32767,tt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{it=6,tt=null;return}}else if(n=Bh(n,t,Ct),n!==null){tt=n;return}if(t=t.sibling,t!==null){tt=t;return}tt=t=e}while(t!==null);it===0&&(it=5)}function Fn(e,t,n){var r=Be,i=Ft.transition;try{Ft.transition=null,Be=1,Xh(e,t,n,r)}finally{Ft.transition=i,Be=r}return null}function Xh(e,t,n,r){do xr();while(mn!==null);if(Oe&6)throw Error(he(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(he(177));e.callbackNode=null,e.callbackPriority=0;var l=n.lanes|n.childLanes;if(D0(e,l),e===lt&&(tt=lt=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ti||(Ti=!0,cd(ta,function(){return xr(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Ft.transition,Ft.transition=null;var a=Be;Be=1;var o=Oe;Oe|=4,as.current=null,Uh(e,n),td(n,e),vh(Xl),ra=!!Yl,Xl=Yl=null,e.current=n,$h(n),x0(),Oe=o,Be=a,Ft.transition=l}else e.current=n;if(Ti&&(Ti=!1,mn=e,ya=i),l=e.pendingLanes,l===0&&(Sn=null),S0(n.stateNode),Et(e,qe()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wa)throw wa=!1,e=go,go=null,e;return ya&1&&e.tag!==0&&xr(),l=e.pendingLanes,l&1?e===mo?Jr++:(Jr=0,mo=e):Jr=0,Rn(),null}function xr(){if(mn!==null){var e=Bc(ya),t=Ft.transition,n=Be;try{if(Ft.transition=null,Be=16>e?16:e,mn===null)var r=!1;else{if(e=mn,mn=null,ya=0,Oe&6)throw Error(he(331));var i=Oe;for(Oe|=4,Ce=e.current;Ce!==null;){var l=Ce,a=l.child;if(Ce.flags&16){var o=l.deletions;if(o!==null){for(var s=0;s<o.length;s++){var h=o[s];for(Ce=h;Ce!==null;){var u=Ce;switch(u.tag){case 0:case 11:case 15:Zr(8,u,l)}var c=u.child;if(c!==null)c.return=u,Ce=c;else for(;Ce!==null;){u=Ce;var v=u.sibling,y=u.return;if(Jf(u),u===h){Ce=null;break}if(v!==null){v.return=y,Ce=v;break}Ce=y}}}var k=l.alternate;if(k!==null){var w=k.child;if(w!==null){k.child=null;do{var x=w.sibling;w.sibling=null,w=x}while(w!==null)}}Ce=l}}if(l.subtreeFlags&2064&&a!==null)a.return=l,Ce=a;else e:for(;Ce!==null;){if(l=Ce,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Zr(9,l,l.return)}var d=l.sibling;if(d!==null){d.return=l.return,Ce=d;break e}Ce=l.return}}var m=e.current;for(Ce=m;Ce!==null;){a=Ce;var f=a.child;if(a.subtreeFlags&2064&&f!==null)f.return=a,Ce=f;else e:for(a=m;Ce!==null;){if(o=Ce,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Aa(9,o)}}catch(E){Qe(o,o.return,E)}if(o===a){Ce=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,Ce=_;break e}Ce=o.return}}if(Oe=i,Rn(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Sa,e)}catch{}r=!0}return r}finally{Be=n,Ft.transition=t}}return!1}function Ru(e,t,n){t=jr(n,t),t=Hf(e,t,1),e=kn(e,t,1),t=vt(),e!==null&&(wi(e,1,t),Et(e,t))}function Qe(e,t,n){if(e.tag===3)Ru(e,e,n);else for(;t!==null;){if(t.tag===3){Ru(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sn===null||!Sn.has(r))){e=jr(n,e),e=Wf(t,e,1),t=kn(t,e,1),e=vt(),t!==null&&(wi(t,1,e),Et(t,e));break}}t=t.return}}function Zh(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=vt(),e.pingedLanes|=e.suspendedLanes&n,lt===e&&(st&n)===n&&(it===4||it===3&&(st&130023424)===st&&500>qe()-os?Bn(e,0):ls|=n),Et(e,t)}function sd(e,t){t===0&&(e.mode&1?(t=Ni,Ni<<=1,!(Ni&130023424)&&(Ni=4194304)):t=1);var n=vt();e=sn(e,t),e!==null&&(wi(e,t,n),Et(e,n))}function Qh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sd(e,n)}function Jh(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(he(314))}r!==null&&r.delete(t),sd(e,n)}var ud;ud=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||kt.current)_t=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return _t=!1,Oh(e,t,n);_t=!!(e.flags&131072)}else _t=!1,Ve&&t.flags&1048576&&hf(t,ca,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Yi(e,t),e=t.pendingProps;var i=kr(t,ht.current);yr(t,n),i=es(null,t,r,e,i,n);var l=ts();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,St(r)?(l=!0,sa(t)):l=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Xo(t),i.updater=Ra,t.stateNode=i,i._reactInternals=t,io(t,r,e,n),t=oo(null,t,r,!0,l,n)):(t.tag=0,Ve&&l&&Wo(t),pt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Yi(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=e1(r),e=Wt(r,e),i){case 0:t=lo(null,t,r,e,n);break e;case 1:t=xu(null,t,r,e,n);break e;case 11:t=wu(null,t,r,e,n);break e;case 14:t=yu(null,t,r,Wt(r.type,e),n);break e}throw Error(he(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),lo(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),xu(e,t,r,i,n);case 3:e:{if(Gf(t),e===null)throw Error(he(387));r=t.pendingProps,l=t.memoizedState,i=l.element,yf(e,t),ha(t,r,null,n);var a=t.memoizedState;if(r=a.element,l.isDehydrated)if(l={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=l,t.memoizedState=l,t.flags&256){i=jr(Error(he(423)),t),t=_u(e,t,r,n,i);break e}else if(r!==i){i=jr(Error(he(424)),t),t=_u(e,t,r,n,i);break e}else for(jt=_n(t.stateNode.containerInfo.firstChild),Mt=t,Ve=!0,$t=null,n=mf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Sr(),r===i){t=un(e,t,n);break e}pt(e,t,r,n)}t=t.child}return t;case 5:return xf(t),e===null&&to(t),r=t.type,i=t.pendingProps,l=e!==null?e.memoizedProps:null,a=i.children,Zl(r,i)?a=null:l!==null&&Zl(r,l)&&(t.flags|=32),Vf(e,t),pt(e,t,a,n),t.child;case 6:return e===null&&to(t),null;case 13:return Kf(e,t,n);case 4:return Zo(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=Er(t,null,r,n):pt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),wu(e,t,r,i,n);case 7:return pt(e,t,t.pendingProps,n),t.child;case 8:return pt(e,t,t.pendingProps.children,n),t.child;case 12:return pt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,l=t.memoizedProps,a=i.value,We(fa,r._currentValue),r._currentValue=a,l!==null)if(Kt(l.value,a)){if(l.children===i.children&&!kt.current){t=un(e,t,n);break e}}else for(l=t.child,l!==null&&(l.return=t);l!==null;){var o=l.dependencies;if(o!==null){a=l.child;for(var s=o.firstContext;s!==null;){if(s.context===r){if(l.tag===1){s=an(-1,n&-n),s.tag=2;var h=l.updateQueue;if(h!==null){h=h.shared;var u=h.pending;u===null?s.next=s:(s.next=u.next,u.next=s),h.pending=s}}l.lanes|=n,s=l.alternate,s!==null&&(s.lanes|=n),no(l.return,n,t),o.lanes|=n;break}s=s.next}}else if(l.tag===10)a=l.type===t.type?null:l.child;else if(l.tag===18){if(a=l.return,a===null)throw Error(he(341));a.lanes|=n,o=a.alternate,o!==null&&(o.lanes|=n),no(a,n,t),a=l.sibling}else a=l.child;if(a!==null)a.return=l;else for(a=l;a!==null;){if(a===t){a=null;break}if(l=a.sibling,l!==null){l.return=a.return,a=l;break}a=a.return}l=a}pt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,yr(t,n),i=bt(i),r=r(i),t.flags|=1,pt(e,t,r,n),t.child;case 14:return r=t.type,i=Wt(r,t.pendingProps),i=Wt(r.type,i),yu(e,t,r,i,n);case 15:return Uf(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Wt(r,i),Yi(e,t),t.tag=1,St(r)?(e=!0,sa(t)):e=!1,yr(t,n),Bf(t,r,i),io(t,r,i,n),oo(null,t,r,!0,e,n);case 19:return Yf(e,t,n);case 22:return $f(e,t,n)}throw Error(he(156,t.tag))};function cd(e,t){return Fc(e,t)}function qh(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pt(e,t,n,r){return new qh(e,t,n,r)}function fs(e){return e=e.prototype,!(!e||!e.isReactComponent)}function e1(e){if(typeof e=="function")return fs(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Ro)return 11;if(e===Ao)return 14}return 2}function Cn(e,t){var n=e.alternate;return n===null?(n=Pt(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Qi(e,t,n,r,i,l){var a=2;if(r=e,typeof e=="function")fs(e)&&(a=1);else if(typeof e=="string")a=5;else e:switch(e){case ir:return Hn(n.children,i,l,t);case Do:a=8,i|=8;break;case Nl:return e=Pt(12,n,t,i|2),e.elementType=Nl,e.lanes=l,e;case Dl:return e=Pt(13,n,t,i),e.elementType=Dl,e.lanes=l,e;case Rl:return e=Pt(19,n,t,i),e.elementType=Rl,e.lanes=l,e;case yc:return za(n,i,l,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mc:a=10;break e;case wc:a=9;break e;case Ro:a=11;break e;case Ao:a=14;break e;case dn:a=16,r=null;break e}throw Error(he(130,e==null?e:typeof e,""))}return t=Pt(a,n,t,i),t.elementType=e,t.type=r,t.lanes=l,t}function Hn(e,t,n,r){return e=Pt(7,e,r,t),e.lanes=n,e}function za(e,t,n,r){return e=Pt(22,e,r,t),e.elementType=yc,e.lanes=n,e.stateNode={isHidden:!1},e}function fl(e,t,n){return e=Pt(6,e,null,t),e.lanes=n,e}function dl(e,t,n){return t=Pt(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function t1(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ga(0),this.expirationTimes=Ga(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ga(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ds(e,t,n,r,i,l,a,o,s){return e=new t1(e,t,n,o,s),t===1?(t=1,l===!0&&(t|=8)):t=0,l=Pt(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Xo(l),e}function n1(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function fd(e){if(!e)return Mn;e=e._reactInternals;e:{if(Zn(e)!==e||e.tag!==1)throw Error(he(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(St(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(he(171))}if(e.tag===1){var n=e.type;if(St(n))return ff(e,n,t)}return t}function dd(e,t,n,r,i,l,a,o,s){return e=ds(n,r,!0,e,i,l,a,o,s),e.context=fd(null),n=e.current,r=vt(),i=En(n),l=an(r,i),l.callback=t??null,kn(n,l,i),e.current.lanes=i,wi(e,i,r),Et(e,r),e}function Ia(e,t,n,r){var i=t.current,l=vt(),a=En(i);return n=fd(n),t.context===null?t.context=n:t.pendingContext=n,t=an(l,a),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=kn(i,t,a),e!==null&&(Gt(e,i,a,l),Vi(e,i,a)),a}function _a(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Au(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function hs(e,t){Au(e,t),(e=e.alternate)&&Au(e,t)}function r1(){return null}var hd=typeof reportError=="function"?reportError:function(e){console.error(e)};function ps(e){this._internalRoot=e}Pa.prototype.render=ps.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(he(409));Ia(e,t,null,null)};Pa.prototype.unmount=ps.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Gn(function(){Ia(null,e,null,null)}),t[on]=null}};function Pa(e){this._internalRoot=e}Pa.prototype.unstable_scheduleHydration=function(e){if(e){var t=Uc();e={blockedOn:null,target:e,priority:t};for(var n=0;n<pn.length&&t!==0&&t<pn[n].priority;n++);pn.splice(n,0,e),n===0&&Vc(e)}};function vs(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Fa(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Lu(){}function i1(e,t,n,r,i){if(i){if(typeof r=="function"){var l=r;r=function(){var h=_a(a);l.call(h)}}var a=dd(t,r,e,0,null,!1,!1,"",Lu);return e._reactRootContainer=a,e[on]=a.current,oi(e.nodeType===8?e.parentNode:e),Gn(),a}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var h=_a(s);o.call(h)}}var s=ds(e,0,!1,null,null,!1,!1,"",Lu);return e._reactRootContainer=s,e[on]=s.current,oi(e.nodeType===8?e.parentNode:e),Gn(function(){Ia(t,s,n,r)}),s}function ba(e,t,n,r,i){var l=n._reactRootContainer;if(l){var a=l;if(typeof i=="function"){var o=i;i=function(){var s=_a(a);o.call(s)}}Ia(t,a,e,i)}else a=i1(n,t,e,i,r);return _a(a)}Hc=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Wr(t.pendingLanes);n!==0&&(Io(t,n|1),Et(t,qe()),!(Oe&6)&&(Mr=qe()+500,Rn()))}break;case 13:Gn(function(){var r=sn(e,1);if(r!==null){var i=vt();Gt(r,e,1,i)}}),hs(e,1)}};Po=function(e){if(e.tag===13){var t=sn(e,134217728);if(t!==null){var n=vt();Gt(t,e,134217728,n)}hs(e,134217728)}};Wc=function(e){if(e.tag===13){var t=En(e),n=sn(e,t);if(n!==null){var r=vt();Gt(n,e,t,r)}hs(e,t)}};Uc=function(){return Be};$c=function(e,t){var n=Be;try{return Be=e,t()}finally{Be=n}};Bl=function(e,t,n){switch(t){case"input":if(zl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ma(r);if(!i)throw Error(he(90));_c(r),zl(r,i)}}}break;case"textarea":Sc(e,n);break;case"select":t=n.value,t!=null&&vr(e,!!n.multiple,t,!1)}};Rc=ss;Ac=Gn;var a1={usingClientEntryPoint:!1,Events:[xi,sr,Ma,Nc,Dc,ss]},Or={findFiberByHostInstance:bn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},l1={bundleType:Or.bundleType,version:Or.version,rendererPackageName:Or.rendererPackageName,rendererConfig:Or.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cn.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ic(e),e===null?null:e.stateNode},findFiberByHostInstance:Or.findFiberByHostInstance||r1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Oi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Oi.isDisabled&&Oi.supportsFiber)try{Sa=Oi.inject(l1),Qt=Oi}catch{}}Dt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a1;Dt.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vs(t))throw Error(he(200));return n1(e,t,null,n)};Dt.createRoot=function(e,t){if(!vs(e))throw Error(he(299));var n=!1,r="",i=hd;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=ds(e,1,!1,null,null,n,!1,r,i),e[on]=t.current,oi(e.nodeType===8?e.parentNode:e),new ps(t)};Dt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(he(188)):(e=Object.keys(e).join(","),Error(he(268,e)));return e=Ic(t),e=e===null?null:e.stateNode,e};Dt.flushSync=function(e){return Gn(e)};Dt.hydrate=function(e,t,n){if(!Fa(t))throw Error(he(200));return ba(null,e,t,!0,n)};Dt.hydrateRoot=function(e,t,n){if(!vs(e))throw Error(he(405));var r=n!=null&&n.hydratedSources||null,i=!1,l="",a=hd;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),t=dd(t,null,e,1,n??null,i,!1,l,a),e[on]=t.current,oi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Pa(t)};Dt.render=function(e,t,n){if(!Fa(t))throw Error(he(200));return ba(null,e,t,!1,n)};Dt.unmountComponentAtNode=function(e){if(!Fa(e))throw Error(he(40));return e._reactRootContainer?(Gn(function(){ba(null,null,e,!1,function(){e._reactRootContainer=null,e[on]=null})}),!0):!1};Dt.unstable_batchedUpdates=ss;Dt.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Fa(n))throw Error(he(200));if(e==null||e._reactInternals===void 0)throw Error(he(38));return ba(e,t,n,!1,r)};Dt.version="18.3.1-next-f1338f8080-20240426";function pd(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pd)}catch(e){console.error(e)}}pd(),hc.exports=Dt;var o1=hc.exports,zu=o1;jl.createRoot=zu.createRoot,jl.hydrateRoot=zu.hydrateRoot;const s1={},Iu=e=>{let t;const n=new Set,r=(u,c)=>{const v=typeof u=="function"?u(t):u;if(!Object.is(v,t)){const y=t;t=c??(typeof v!="object"||v===null)?v:Object.assign({},t,v),n.forEach(k=>k(t,y))}},i=()=>t,s={setState:r,getState:i,getInitialState:()=>h,subscribe:u=>(n.add(u),()=>n.delete(u)),destroy:()=>{(s1?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},h=t=e(r,i,s);return s},u1=e=>e?Iu(e):Iu;var vd={exports:{}},gd={},md={exports:{}},wd={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nr=Q;function c1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var f1=typeof Object.is=="function"?Object.is:c1,d1=Nr.useState,h1=Nr.useEffect,p1=Nr.useLayoutEffect,v1=Nr.useDebugValue;function g1(e,t){var n=t(),r=d1({inst:{value:n,getSnapshot:t}}),i=r[0].inst,l=r[1];return p1(function(){i.value=n,i.getSnapshot=t,hl(i)&&l({inst:i})},[e,n,t]),h1(function(){return hl(i)&&l({inst:i}),e(function(){hl(i)&&l({inst:i})})},[e]),v1(n),n}function hl(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!f1(e,n)}catch{return!0}}function m1(e,t){return t()}var w1=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m1:g1;wd.useSyncExternalStore=Nr.useSyncExternalStore!==void 0?Nr.useSyncExternalStore:w1;md.exports=wd;var y1=md.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ta=Q,x1=y1;function _1(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var k1=typeof Object.is=="function"?Object.is:_1,S1=x1.useSyncExternalStore,E1=Ta.useRef,C1=Ta.useEffect,j1=Ta.useMemo,M1=Ta.useDebugValue;gd.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var l=E1(null);if(l.current===null){var a={hasValue:!1,value:null};l.current=a}else a=l.current;l=j1(function(){function s(y){if(!h){if(h=!0,u=y,y=r(y),i!==void 0&&a.hasValue){var k=a.value;if(i(k,y))return c=k}return c=y}if(k=c,k1(u,y))return k;var w=r(y);return i!==void 0&&i(k,w)?(u=y,k):(u=y,c=w)}var h=!1,u,c,v=n===void 0?null:n;return[function(){return s(t())},v===null?void 0:function(){return s(v())}]},[t,n,r,i]);var o=S1(e,l[0],l[1]);return C1(function(){a.hasValue=!0,a.value=o},[o]),M1(o),o};vd.exports=gd;var N1=vd.exports;const D1=ec(N1),yd={},{useDebugValue:R1}=fc,{useSyncExternalStoreWithSelector:A1}=D1;let Pu=!1;const L1=e=>e;function z1(e,t=L1,n){(yd?"production":void 0)!=="production"&&n&&!Pu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Pu=!0);const r=A1(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return R1(r),r}const Fu=e=>{(yd?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?u1(e):e,n=(r,i)=>z1(t,r,i);return Object.assign(n,t),n},I1=e=>e?Fu(e):Fu,Kn=.05,Yn=20,xo=1.1,P1={scale:1},F1=!0,gs={pageStrategy:"largest",autoContrast:!0,clipPercent:.5,manualWindow:null},pl={kernelSize:5,sigma:1.5,sharpenAmount:1,lowThreshold:50,highThreshold:100,clipLimit:2,gridSize:8,gamma:1,cutoff:30,theta:0,gaborSigma:1.5,lambda:10,psi:0},Fe=I1(e=>({appMode:"compare",pinpointMouseMode:"pin",stripExt:!0,numViewers:2,viewerRows:1,viewerCols:2,showMinimap:!1,showGrid:!1,gridColor:"white",minimapPosition:"bottom-right",minimapWidth:150,viewport:{scale:P1.scale,cx:.5,cy:.5,refScreenX:void 0,refScreenY:void 0},pinpoints:{},pinpointScales:{},pinpointGlobalScale:1,pinpointRotations:{},pinpointGlobalRotation:0,activeCanvasKey:null,fitScaleFn:null,current:null,indicator:null,folders:{},viewerFilters:{},viewerFilterParams:{},tempViewerFilter:"none",tempViewerFilterParams:pl,activeFilterEditor:null,analysisFile:null,analysisFileSource:null,analysisFilters:{},analysisFilterParams:{},analysisRotation:0,compareRotation:0,selectedViewers:[],toggleModalOpen:!1,toggleCurrentIndex:0,setAppMode:t=>e({appMode:t}),setPinpointMouseMode:t=>e({pinpointMouseMode:t}),setStripExt:t=>e({stripExt:t}),setNumViewers:t=>e({numViewers:t}),setViewerLayout:(t,n)=>e({viewerRows:t,viewerCols:n,numViewers:t*n}),setShowMinimap:t=>e({showMinimap:t}),setShowGrid:t=>e({showGrid:t}),setGridColor:t=>e({gridColor:t}),setMinimapPosition:t=>e({minimapPosition:t}),setMinimapWidth:t=>e({minimapWidth:t}),setViewport:t=>e(n=>({viewport:{...n.viewport,...t}})),setPinpoint:(t,n)=>e(r=>({pinpoints:{...r.pinpoints,[t]:n}})),clearPinpoints:()=>e({pinpoints:{}}),setPinpointScale:(t,n)=>e(r=>({pinpointScales:{...r.pinpointScales,[t]:n}})),clearPinpointScales:()=>e({pinpointScales:{}}),setPinpointGlobalScale:t=>e({pinpointGlobalScale:t}),setPinpointRotation:(t,n)=>e(r=>({pinpointRotations:{...r.pinpointRotations,[t]:n}})),setPinpointGlobalRotation:t=>e({pinpointGlobalRotation:t}),setActiveCanvasKey:t=>e({activeCanvasKey:t}),setFitScaleFn:t=>e({fitScaleFn:t}),setCurrent:t=>e({current:t}),triggerIndicator:(t,n)=>e({indicator:{cx:t,cy:n,key:Date.now()}}),setFolder:(t,n)=>e(r=>({folders:{...r.folders,[t]:n}})),updateFolderAlias:(t,n)=>e(r=>{const i=r.folders[t];return i?{folders:{...r.folders,[t]:{...i,alias:n}}}:{}}),clearFolder:t=>e(n=>{const{[t]:r,...i}=n.folders,{[t]:l,...a}=n.viewerFilters,{[t]:o,...s}=n.viewerFilterParams;return{folders:i,viewerFilters:a,viewerFilterParams:s}}),setAnalysisFile:(t,n)=>e({analysisFile:t,analysisFileSource:n,analysisFilters:{},analysisFilterParams:{}}),setAnalysisRotation:t=>e({analysisRotation:t}),setCompareRotation:t=>e({compareRotation:t}),setSelectedViewers:t=>e({selectedViewers:t}),openToggleModal:()=>e({toggleModalOpen:!0,toggleCurrentIndex:0}),closeToggleModal:()=>e({toggleModalOpen:!1}),setToggleCurrentIndex:t=>e({toggleCurrentIndex:t}),openFilterEditor:t=>e(n=>typeof t=="number"?{activeFilterEditor:t,tempViewerFilter:n.analysisFilters[t]||"none",tempViewerFilterParams:n.analysisFilterParams[t]||pl}:{activeFilterEditor:t,tempViewerFilter:n.viewerFilters[t]||"none",tempViewerFilterParams:n.viewerFilterParams[t]||pl}),closeFilterEditor:()=>e({activeFilterEditor:null}),setTempFilterType:t=>e({tempViewerFilter:t}),setTempFilterParams:t=>e(n=>({tempViewerFilterParams:{...n.tempViewerFilterParams,...t}})),applyTempFilterSettings:()=>e(t=>{const n=t.activeFilterEditor;return n===null?{}:typeof n=="number"?{analysisFilters:{...t.analysisFilters,[n]:t.tempViewerFilter},analysisFilterParams:{...t.analysisFilterParams,[n]:t.tempViewerFilterParams},activeFilterEditor:null}:{viewerFilters:{...t.viewerFilters,[n]:t.tempViewerFilter},viewerFilterParams:{...t.viewerFilterParams,[n]:t.tempViewerFilterParams},activeFilterEditor:null}})}));Fe.subscribe((e,t)=>{if(e.appMode!==t.appMode){console.log(`App mode changed from ${t.appMode} to ${e.appMode}`);const{fitScaleFn:n}=Fe.getState(),r=n?n():1;Fe.setState({viewport:{scale:r,cx:.5,cy:.5},pinpoints:{},pinpointScales:{},pinpointGlobalScale:1,pinpointRotations:{},analysisRotation:0,compareRotation:0,selectedViewers:[],toggleModalOpen:!1,toggleCurrentIndex:0}),t.appMode==="analysis"&&e.appMode!=="analysis"&&Fe.setState({analysisFile:null,analysisFilters:{},analysisFilterParams:{}})}(e.viewerRows!==t.viewerRows||e.viewerCols!==t.viewerCols)&&(console.log(`Layout changed from ${t.viewerRows}x${t.viewerCols} to ${e.viewerRows}x${e.viewerCols}`),setTimeout(()=>{const{fitScaleFn:n}=Fe.getState(),r=n?n():1;Fe.setState({viewport:{scale:r,cx:.5,cy:.5,refScreenX:void 0,refScreenY:void 0},pinpointGlobalScale:1})},100))});const b1=new Set([".jpg",".jpeg",".png",".gif",".webp",".bmp",".svg",".tif",".tiff"]);function _o(e){const t=e.lastIndexOf(".");if(t<0)return!1;const n=e.substring(t).toLowerCase();return b1.has(n)}async function T1(){const e=await window.showDirectoryPicker(),t=new Map;for await(const[n,r]of e.entries())if(r.kind==="file"&&_o(n)){const i=await r.getFile();t.set(n,i)}return{name:e.name,files:t}}function O1(e){if(e.length===0)return null;const t=new Map;if(Array.from(e).forEach(i=>{_o(i.name)&&t.set(i.name,i)}),t.size===0)return null;const n=Array.from(e).find(i=>_o(i.name));return{name:n?n.webkitRelativePath.split("/")[0]:"Unknown",files:t}}function ms(){const{folders:e,setFolder:t,updateFolderAlias:n}=Fe(),r=async o=>{var s;try{const h=await T1(),u={data:h,alias:h.name};t(o,u)}catch(h){h.name==="AbortError"?console.log("Directory picker was dismissed."):(console.error("Error picking directory:",h),i[o].current&&((s=i[o].current)==null||s.click()))}},i=["A","B","C","D","E","F","G","H","I"].reduce((o,s)=>(o[s]=Q.useRef(null),o),{});return{...e,pick:r,inputRefs:i,onInput:(o,s)=>{if(!s.target.files)return;const h=O1(s.target.files);if(!h)return;const u={data:h,alias:h.name};t(o,u)},updateAlias:(o,s)=>{n(o,s)},allFolders:e}}function B1(e,t=!1,n="intersect"){const r=Object.keys(e).filter(s=>e[s]);if(r.length===0)return[];const i=r.map(s=>new Set(Array.from(e[s].keys()).map(h=>t?h.replace(/\.[^/.]+$/,""):h)));let l;n==="intersect"?l=i.reduce((s,h)=>s?new Set([...s].filter(u=>h.has(u))):h,void 0)??new Set:(l=new Set,i.forEach(s=>{s.forEach(h=>l.add(h))}));const a=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],o=[];for(const s of l){const h=a.reduce((u,c)=>(u[c]=!1,u),{});r.forEach(u=>{const c=e[u],v=Array.from(c.keys()).find(y=>t?y.replace(/\.[^/.]+$/,"")===s:y===s);h[u]=!!v}),o.push({filename:s,has:h})}return o.sort((s,h)=>s.filename.localeCompare(h.filename,void 0,{numeric:!0}))}const H1=150,W1=({bitmap:e,viewport:t,canvasSize:n,appMode:r,folderKey:i,overrideScale:l,pinpointGlobalScale:a,refPoint:o,rotationDeg:s=0,width:h=H1,position:u="bottom-right"})=>{const c=Q.useRef(null);return Q.useEffect(()=>{const v=c.current;if(!v||!e)return;const y=v.getContext("2d");if(!y)return;const k=Math.max(60,Math.min(400,h)),w=e.height/e.width,x=k*w;v.width=k,v.height=x;const d=(s||0)*Math.PI/180;if(y.save(),d!==0&&(r==="pinpoint"||r==="analysis"||r==="compare")&&(y.translate(k/2,x/2),y.rotate(d),y.translate(-k/2,-x/2)),y.drawImage(e,0,0,k,x),n)if(r==="pinpoint"&&typeof i=="string"&&a!==void 0){const f=(l??t.scale)*a,_=o||{x:.5,y:.5},E=t.refScreenX||n.width/2,C=t.refScreenY||n.height/2,M=e.width,D=e.height,R=M*f,A=D*f,L=_.x*M,O=_.y*D,z=E-L*f,U=C-O*f;Math.min(1,(n.width-z)/R),Math.min(1,(n.height-U)/A);const J=(s||0)*Math.PI/180,ce=n.width,q=n.height,F=z+R/2,b=U+A/2,B=Math.cos(-J),G=Math.sin(-J),Y=[{x:0,y:0},{x:ce,y:0},{x:ce,y:q},{x:0,y:q}].map(({x:pe,y:ve})=>{const we=pe-F,xe=ve-b,X=F+we*B-xe*G,ge=b+we*G+xe*B,Ee=(X-z)/f,T=(ge-U)/f;return{x:Ee/M*k,y:T/D*x}});y.strokeStyle="rgba(255, 0, 0, 0.9)",y.lineWidth=2,y.fillStyle="rgba(255, 0, 0, 0.2)",y.beginPath(),y.moveTo(Y[0].x,Y[0].y);for(let pe=1;pe<Y.length;pe++)y.lineTo(Y[pe].x,Y[pe].y);y.closePath(),y.stroke(),y.fill()}else{const{scale:m,cx:f=.5,cy:_=.5}=t;if(m){const E=e.width,C=e.height,M=E*m,D=C*m,R=Math.min(1,n.width/M),A=Math.min(1,n.height/D),L=k*R,O=x*A,z=f*k-L/2,U=_*x-O/2;y.strokeStyle="rgba(255, 0, 0, 0.9)",y.lineWidth=2,y.strokeRect(Math.max(0,Math.min(k-L,z)),Math.max(0,Math.min(x-O,U)),Math.min(L,k),Math.min(O,x)),y.fillStyle="rgba(255, 0, 0, 0.2)",y.fillRect(Math.max(0,Math.min(k-L,z)),Math.max(0,Math.min(x-O,U)),Math.min(L,k),Math.min(O,x))}}y.restore()},[e,t,n,r,i,l,a,o,s,h]),e?p.jsx("div",{className:"minimap",style:{position:"absolute",...u.includes("top")?{top:10}:{bottom:10},...u.includes("left")?{left:10}:{right:10}},children:p.jsx("canvas",{ref:c})}):null};function U1(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xd={exports:{}},vl={},bu;function An(){return bu||(bu=1,function(e){var t=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function n(l,a){return Object.prototype.hasOwnProperty.call(l,a)}e.assign=function(l){for(var a=Array.prototype.slice.call(arguments,1);a.length;){var o=a.shift();if(o){if(typeof o!="object")throw new TypeError(o+"must be non-object");for(var s in o)n(o,s)&&(l[s]=o[s])}}return l},e.shrinkBuf=function(l,a){return l.length===a?l:l.subarray?l.subarray(0,a):(l.length=a,l)};var r={arraySet:function(l,a,o,s,h){if(a.subarray&&l.subarray){l.set(a.subarray(o,o+s),h);return}for(var u=0;u<s;u++)l[h+u]=a[o+u]},flattenChunks:function(l){var a,o,s,h,u,c;for(s=0,a=0,o=l.length;a<o;a++)s+=l[a].length;for(c=new Uint8Array(s),h=0,a=0,o=l.length;a<o;a++)u=l[a],c.set(u,h),h+=u.length;return c}},i={arraySet:function(l,a,o,s,h){for(var u=0;u<s;u++)l[h+u]=a[o+u]},flattenChunks:function(l){return[].concat.apply([],l)}};e.setTyped=function(l){l?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,i))},e.setTyped(t)}(vl)),vl}var qn={},Ht={},zn={},Tu;function $1(){if(Tu)return zn;Tu=1;var e=An(),t=4,n=0,r=1,i=2;function l(N){for(var le=N.length;--le>=0;)N[le]=0}var a=0,o=1,s=2,h=3,u=258,c=29,v=256,y=v+1+c,k=30,w=19,x=2*y+1,d=15,m=16,f=7,_=256,E=16,C=17,M=18,D=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],R=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],O=512,z=new Array((y+2)*2);l(z);var U=new Array(k*2);l(U);var J=new Array(O);l(J);var ce=new Array(u-h+1);l(ce);var q=new Array(c);l(q);var F=new Array(k);l(F);function b(N,le,oe,de,P){this.static_tree=N,this.extra_bits=le,this.extra_base=oe,this.elems=de,this.max_length=P,this.has_stree=N&&N.length}var B,G,H;function Y(N,le){this.dyn_tree=N,this.max_code=0,this.stat_desc=le}function pe(N){return N<256?J[N]:J[256+(N>>>7)]}function ve(N,le){N.pending_buf[N.pending++]=le&255,N.pending_buf[N.pending++]=le>>>8&255}function we(N,le,oe){N.bi_valid>m-oe?(N.bi_buf|=le<<N.bi_valid&65535,ve(N,N.bi_buf),N.bi_buf=le>>m-N.bi_valid,N.bi_valid+=oe-m):(N.bi_buf|=le<<N.bi_valid&65535,N.bi_valid+=oe)}function xe(N,le,oe){we(N,oe[le*2],oe[le*2+1])}function X(N,le){var oe=0;do oe|=N&1,N>>>=1,oe<<=1;while(--le>0);return oe>>>1}function ge(N){N.bi_valid===16?(ve(N,N.bi_buf),N.bi_buf=0,N.bi_valid=0):N.bi_valid>=8&&(N.pending_buf[N.pending++]=N.bi_buf&255,N.bi_buf>>=8,N.bi_valid-=8)}function Ee(N,le){var oe=le.dyn_tree,de=le.max_code,P=le.stat_desc.static_tree,Z=le.stat_desc.has_stree,S=le.stat_desc.extra_bits,se=le.stat_desc.extra_base,je=le.stat_desc.max_length,g,W,K,j,I,V,Me=0;for(j=0;j<=d;j++)N.bl_count[j]=0;for(oe[N.heap[N.heap_max]*2+1]=0,g=N.heap_max+1;g<x;g++)W=N.heap[g],j=oe[oe[W*2+1]*2+1]+1,j>je&&(j=je,Me++),oe[W*2+1]=j,!(W>de)&&(N.bl_count[j]++,I=0,W>=se&&(I=S[W-se]),V=oe[W*2],N.opt_len+=V*(j+I),Z&&(N.static_len+=V*(P[W*2+1]+I)));if(Me!==0){do{for(j=je-1;N.bl_count[j]===0;)j--;N.bl_count[j]--,N.bl_count[j+1]+=2,N.bl_count[je]--,Me-=2}while(Me>0);for(j=je;j!==0;j--)for(W=N.bl_count[j];W!==0;)K=N.heap[--g],!(K>de)&&(oe[K*2+1]!==j&&(N.opt_len+=(j-oe[K*2+1])*oe[K*2],oe[K*2+1]=j),W--)}}function T(N,le,oe){var de=new Array(d+1),P=0,Z,S;for(Z=1;Z<=d;Z++)de[Z]=P=P+oe[Z-1]<<1;for(S=0;S<=le;S++){var se=N[S*2+1];se!==0&&(N[S*2]=X(de[se]++,se))}}function ue(){var N,le,oe,de,P,Z=new Array(d+1);for(oe=0,de=0;de<c-1;de++)for(q[de]=oe,N=0;N<1<<D[de];N++)ce[oe++]=de;for(ce[oe-1]=de,P=0,de=0;de<16;de++)for(F[de]=P,N=0;N<1<<R[de];N++)J[P++]=de;for(P>>=7;de<k;de++)for(F[de]=P<<7,N=0;N<1<<R[de]-7;N++)J[256+P++]=de;for(le=0;le<=d;le++)Z[le]=0;for(N=0;N<=143;)z[N*2+1]=8,N++,Z[8]++;for(;N<=255;)z[N*2+1]=9,N++,Z[9]++;for(;N<=279;)z[N*2+1]=7,N++,Z[7]++;for(;N<=287;)z[N*2+1]=8,N++,Z[8]++;for(T(z,y+1,Z),N=0;N<k;N++)U[N*2+1]=5,U[N*2]=X(N,5);B=new b(z,D,v+1,y,d),G=new b(U,R,0,k,d),H=new b(new Array(0),A,0,w,f)}function ie(N){var le;for(le=0;le<y;le++)N.dyn_ltree[le*2]=0;for(le=0;le<k;le++)N.dyn_dtree[le*2]=0;for(le=0;le<w;le++)N.bl_tree[le*2]=0;N.dyn_ltree[_*2]=1,N.opt_len=N.static_len=0,N.last_lit=N.matches=0}function te(N){N.bi_valid>8?ve(N,N.bi_buf):N.bi_valid>0&&(N.pending_buf[N.pending++]=N.bi_buf),N.bi_buf=0,N.bi_valid=0}function ae(N,le,oe,de){te(N),ve(N,oe),ve(N,~oe),e.arraySet(N.pending_buf,N.window,le,oe,N.pending),N.pending+=oe}function $(N,le,oe,de){var P=le*2,Z=oe*2;return N[P]<N[Z]||N[P]===N[Z]&&de[le]<=de[oe]}function ee(N,le,oe){for(var de=N.heap[oe],P=oe<<1;P<=N.heap_len&&(P<N.heap_len&&$(le,N.heap[P+1],N.heap[P],N.depth)&&P++,!$(le,de,N.heap[P],N.depth));)N.heap[oe]=N.heap[P],oe=P,P<<=1;N.heap[oe]=de}function re(N,le,oe){var de,P,Z=0,S,se;if(N.last_lit!==0)do de=N.pending_buf[N.d_buf+Z*2]<<8|N.pending_buf[N.d_buf+Z*2+1],P=N.pending_buf[N.l_buf+Z],Z++,de===0?xe(N,P,le):(S=ce[P],xe(N,S+v+1,le),se=D[S],se!==0&&(P-=q[S],we(N,P,se)),de--,S=pe(de),xe(N,S,oe),se=R[S],se!==0&&(de-=F[S],we(N,de,se)));while(Z<N.last_lit);xe(N,_,le)}function ne(N,le){var oe=le.dyn_tree,de=le.stat_desc.static_tree,P=le.stat_desc.has_stree,Z=le.stat_desc.elems,S,se,je=-1,g;for(N.heap_len=0,N.heap_max=x,S=0;S<Z;S++)oe[S*2]!==0?(N.heap[++N.heap_len]=je=S,N.depth[S]=0):oe[S*2+1]=0;for(;N.heap_len<2;)g=N.heap[++N.heap_len]=je<2?++je:0,oe[g*2]=1,N.depth[g]=0,N.opt_len--,P&&(N.static_len-=de[g*2+1]);for(le.max_code=je,S=N.heap_len>>1;S>=1;S--)ee(N,oe,S);g=Z;do S=N.heap[1],N.heap[1]=N.heap[N.heap_len--],ee(N,oe,1),se=N.heap[1],N.heap[--N.heap_max]=S,N.heap[--N.heap_max]=se,oe[g*2]=oe[S*2]+oe[se*2],N.depth[g]=(N.depth[S]>=N.depth[se]?N.depth[S]:N.depth[se])+1,oe[S*2+1]=oe[se*2+1]=g,N.heap[1]=g++,ee(N,oe,1);while(N.heap_len>=2);N.heap[--N.heap_max]=N.heap[1],Ee(N,le),T(oe,je,N.bl_count)}function fe(N,le,oe){var de,P=-1,Z,S=le[0*2+1],se=0,je=7,g=4;for(S===0&&(je=138,g=3),le[(oe+1)*2+1]=65535,de=0;de<=oe;de++)Z=S,S=le[(de+1)*2+1],!(++se<je&&Z===S)&&(se<g?N.bl_tree[Z*2]+=se:Z!==0?(Z!==P&&N.bl_tree[Z*2]++,N.bl_tree[E*2]++):se<=10?N.bl_tree[C*2]++:N.bl_tree[M*2]++,se=0,P=Z,S===0?(je=138,g=3):Z===S?(je=6,g=3):(je=7,g=4))}function me(N,le,oe){var de,P=-1,Z,S=le[0*2+1],se=0,je=7,g=4;for(S===0&&(je=138,g=3),de=0;de<=oe;de++)if(Z=S,S=le[(de+1)*2+1],!(++se<je&&Z===S)){if(se<g)do xe(N,Z,N.bl_tree);while(--se!==0);else Z!==0?(Z!==P&&(xe(N,Z,N.bl_tree),se--),xe(N,E,N.bl_tree),we(N,se-3,2)):se<=10?(xe(N,C,N.bl_tree),we(N,se-3,3)):(xe(N,M,N.bl_tree),we(N,se-11,7));se=0,P=Z,S===0?(je=138,g=3):Z===S?(je=6,g=3):(je=7,g=4)}}function ye(N){var le;for(fe(N,N.dyn_ltree,N.l_desc.max_code),fe(N,N.dyn_dtree,N.d_desc.max_code),ne(N,N.bl_desc),le=w-1;le>=3&&N.bl_tree[L[le]*2+1]===0;le--);return N.opt_len+=3*(le+1)+5+5+4,le}function Ae(N,le,oe,de){var P;for(we(N,le-257,5),we(N,oe-1,5),we(N,de-4,4),P=0;P<de;P++)we(N,N.bl_tree[L[P]*2+1],3);me(N,N.dyn_ltree,le-1),me(N,N.dyn_dtree,oe-1)}function Se(N){var le=4093624447,oe;for(oe=0;oe<=31;oe++,le>>>=1)if(le&1&&N.dyn_ltree[oe*2]!==0)return n;if(N.dyn_ltree[9*2]!==0||N.dyn_ltree[10*2]!==0||N.dyn_ltree[13*2]!==0)return r;for(oe=32;oe<v;oe++)if(N.dyn_ltree[oe*2]!==0)return r;return n}var Re=!1;function Le(N){Re||(ue(),Re=!0),N.l_desc=new Y(N.dyn_ltree,B),N.d_desc=new Y(N.dyn_dtree,G),N.bl_desc=new Y(N.bl_tree,H),N.bi_buf=0,N.bi_valid=0,ie(N)}function Ne(N,le,oe,de){we(N,(a<<1)+(de?1:0),3),ae(N,le,oe)}function De(N){we(N,o<<1,3),xe(N,_,z),ge(N)}function ze(N,le,oe,de){var P,Z,S=0;N.level>0?(N.strm.data_type===i&&(N.strm.data_type=Se(N)),ne(N,N.l_desc),ne(N,N.d_desc),S=ye(N),P=N.opt_len+3+7>>>3,Z=N.static_len+3+7>>>3,Z<=P&&(P=Z)):P=Z=oe+5,oe+4<=P&&le!==-1?Ne(N,le,oe,de):N.strategy===t||Z===P?(we(N,(o<<1)+(de?1:0),3),re(N,z,U)):(we(N,(s<<1)+(de?1:0),3),Ae(N,N.l_desc.max_code+1,N.d_desc.max_code+1,S+1),re(N,N.dyn_ltree,N.dyn_dtree)),ie(N),de&&te(N)}function Ie(N,le,oe){return N.pending_buf[N.d_buf+N.last_lit*2]=le>>>8&255,N.pending_buf[N.d_buf+N.last_lit*2+1]=le&255,N.pending_buf[N.l_buf+N.last_lit]=oe&255,N.last_lit++,le===0?N.dyn_ltree[oe*2]++:(N.matches++,le--,N.dyn_ltree[(ce[oe]+v+1)*2]++,N.dyn_dtree[pe(le)*2]++),N.last_lit===N.lit_bufsize-1}return zn._tr_init=Le,zn._tr_stored_block=Ne,zn._tr_flush_block=ze,zn._tr_tally=Ie,zn._tr_align=De,zn}var gl,Ou;function _d(){if(Ou)return gl;Ou=1;function e(t,n,r,i){for(var l=t&65535|0,a=t>>>16&65535|0,o=0;r!==0;){o=r>2e3?2e3:r,r-=o;do l=l+n[i++]|0,a=a+l|0;while(--o);l%=65521,a%=65521}return l|a<<16|0}return gl=e,gl}var ml,Bu;function kd(){if(Bu)return ml;Bu=1;function e(){for(var r,i=[],l=0;l<256;l++){r=l;for(var a=0;a<8;a++)r=r&1?3988292384^r>>>1:r>>>1;i[l]=r}return i}var t=e();function n(r,i,l,a){var o=t,s=a+l;r^=-1;for(var h=a;h<s;h++)r=r>>>8^o[(r^i[h])&255];return r^-1}return ml=n,ml}var wl,Hu;function ws(){return Hu||(Hu=1,wl={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}),wl}var Wu;function V1(){if(Wu)return Ht;Wu=1;var e=An(),t=$1(),n=_d(),r=kd(),i=ws(),l=0,a=1,o=3,s=4,h=5,u=0,c=1,v=-2,y=-3,k=-5,w=-1,x=1,d=2,m=3,f=4,_=0,E=2,C=8,M=9,D=15,R=8,A=29,L=256,O=L+1+A,z=30,U=19,J=2*O+1,ce=15,q=3,F=258,b=F+q+1,B=32,G=42,H=69,Y=73,pe=91,ve=103,we=113,xe=666,X=1,ge=2,Ee=3,T=4,ue=3;function ie(g,W){return g.msg=i[W],W}function te(g){return(g<<1)-(g>4?9:0)}function ae(g){for(var W=g.length;--W>=0;)g[W]=0}function $(g){var W=g.state,K=W.pending;K>g.avail_out&&(K=g.avail_out),K!==0&&(e.arraySet(g.output,W.pending_buf,W.pending_out,K,g.next_out),g.next_out+=K,W.pending_out+=K,g.total_out+=K,g.avail_out-=K,W.pending-=K,W.pending===0&&(W.pending_out=0))}function ee(g,W){t._tr_flush_block(g,g.block_start>=0?g.block_start:-1,g.strstart-g.block_start,W),g.block_start=g.strstart,$(g.strm)}function re(g,W){g.pending_buf[g.pending++]=W}function ne(g,W){g.pending_buf[g.pending++]=W>>>8&255,g.pending_buf[g.pending++]=W&255}function fe(g,W,K,j){var I=g.avail_in;return I>j&&(I=j),I===0?0:(g.avail_in-=I,e.arraySet(W,g.input,g.next_in,I,K),g.state.wrap===1?g.adler=n(g.adler,W,I,K):g.state.wrap===2&&(g.adler=r(g.adler,W,I,K)),g.next_in+=I,g.total_in+=I,I)}function me(g,W){var K=g.max_chain_length,j=g.strstart,I,V,Me=g.prev_length,_e=g.nice_match,ke=g.strstart>g.w_size-b?g.strstart-(g.w_size-b):0,Pe=g.window,wt=g.w_mask,He=g.prev,Te=g.strstart+F,et=Pe[j+Me-1],Ze=Pe[j+Me];g.prev_length>=g.good_match&&(K>>=2),_e>g.lookahead&&(_e=g.lookahead);do if(I=W,!(Pe[I+Me]!==Ze||Pe[I+Me-1]!==et||Pe[I]!==Pe[j]||Pe[++I]!==Pe[j+1])){j+=2,I++;do;while(Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&Pe[++j]===Pe[++I]&&j<Te);if(V=F-(Te-j),j=Te-F,V>Me){if(g.match_start=W,Me=V,V>=_e)break;et=Pe[j+Me-1],Ze=Pe[j+Me]}}while((W=He[W&wt])>ke&&--K!==0);return Me<=g.lookahead?Me:g.lookahead}function ye(g){var W=g.w_size,K,j,I,V,Me;do{if(V=g.window_size-g.lookahead-g.strstart,g.strstart>=W+(W-b)){e.arraySet(g.window,g.window,W,W,0),g.match_start-=W,g.strstart-=W,g.block_start-=W,j=g.hash_size,K=j;do I=g.head[--K],g.head[K]=I>=W?I-W:0;while(--j);j=W,K=j;do I=g.prev[--K],g.prev[K]=I>=W?I-W:0;while(--j);V+=W}if(g.strm.avail_in===0)break;if(j=fe(g.strm,g.window,g.strstart+g.lookahead,V),g.lookahead+=j,g.lookahead+g.insert>=q)for(Me=g.strstart-g.insert,g.ins_h=g.window[Me],g.ins_h=(g.ins_h<<g.hash_shift^g.window[Me+1])&g.hash_mask;g.insert&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[Me+q-1])&g.hash_mask,g.prev[Me&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=Me,Me++,g.insert--,!(g.lookahead+g.insert<q)););}while(g.lookahead<b&&g.strm.avail_in!==0)}function Ae(g,W){var K=65535;for(K>g.pending_buf_size-5&&(K=g.pending_buf_size-5);;){if(g.lookahead<=1){if(ye(g),g.lookahead===0&&W===l)return X;if(g.lookahead===0)break}g.strstart+=g.lookahead,g.lookahead=0;var j=g.block_start+K;if((g.strstart===0||g.strstart>=j)&&(g.lookahead=g.strstart-j,g.strstart=j,ee(g,!1),g.strm.avail_out===0)||g.strstart-g.block_start>=g.w_size-b&&(ee(g,!1),g.strm.avail_out===0))return X}return g.insert=0,W===s?(ee(g,!0),g.strm.avail_out===0?Ee:T):(g.strstart>g.block_start&&(ee(g,!1),g.strm.avail_out===0),X)}function Se(g,W){for(var K,j;;){if(g.lookahead<b){if(ye(g),g.lookahead<b&&W===l)return X;if(g.lookahead===0)break}if(K=0,g.lookahead>=q&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+q-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),K!==0&&g.strstart-K<=g.w_size-b&&(g.match_length=me(g,K)),g.match_length>=q)if(j=t._tr_tally(g,g.strstart-g.match_start,g.match_length-q),g.lookahead-=g.match_length,g.match_length<=g.max_lazy_match&&g.lookahead>=q){g.match_length--;do g.strstart++,g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+q-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart;while(--g.match_length!==0);g.strstart++}else g.strstart+=g.match_length,g.match_length=0,g.ins_h=g.window[g.strstart],g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+1])&g.hash_mask;else j=t._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++;if(j&&(ee(g,!1),g.strm.avail_out===0))return X}return g.insert=g.strstart<q-1?g.strstart:q-1,W===s?(ee(g,!0),g.strm.avail_out===0?Ee:T):g.last_lit&&(ee(g,!1),g.strm.avail_out===0)?X:ge}function Re(g,W){for(var K,j,I;;){if(g.lookahead<b){if(ye(g),g.lookahead<b&&W===l)return X;if(g.lookahead===0)break}if(K=0,g.lookahead>=q&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+q-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart),g.prev_length=g.match_length,g.prev_match=g.match_start,g.match_length=q-1,K!==0&&g.prev_length<g.max_lazy_match&&g.strstart-K<=g.w_size-b&&(g.match_length=me(g,K),g.match_length<=5&&(g.strategy===x||g.match_length===q&&g.strstart-g.match_start>4096)&&(g.match_length=q-1)),g.prev_length>=q&&g.match_length<=g.prev_length){I=g.strstart+g.lookahead-q,j=t._tr_tally(g,g.strstart-1-g.prev_match,g.prev_length-q),g.lookahead-=g.prev_length-1,g.prev_length-=2;do++g.strstart<=I&&(g.ins_h=(g.ins_h<<g.hash_shift^g.window[g.strstart+q-1])&g.hash_mask,K=g.prev[g.strstart&g.w_mask]=g.head[g.ins_h],g.head[g.ins_h]=g.strstart);while(--g.prev_length!==0);if(g.match_available=0,g.match_length=q-1,g.strstart++,j&&(ee(g,!1),g.strm.avail_out===0))return X}else if(g.match_available){if(j=t._tr_tally(g,0,g.window[g.strstart-1]),j&&ee(g,!1),g.strstart++,g.lookahead--,g.strm.avail_out===0)return X}else g.match_available=1,g.strstart++,g.lookahead--}return g.match_available&&(j=t._tr_tally(g,0,g.window[g.strstart-1]),g.match_available=0),g.insert=g.strstart<q-1?g.strstart:q-1,W===s?(ee(g,!0),g.strm.avail_out===0?Ee:T):g.last_lit&&(ee(g,!1),g.strm.avail_out===0)?X:ge}function Le(g,W){for(var K,j,I,V,Me=g.window;;){if(g.lookahead<=F){if(ye(g),g.lookahead<=F&&W===l)return X;if(g.lookahead===0)break}if(g.match_length=0,g.lookahead>=q&&g.strstart>0&&(I=g.strstart-1,j=Me[I],j===Me[++I]&&j===Me[++I]&&j===Me[++I])){V=g.strstart+F;do;while(j===Me[++I]&&j===Me[++I]&&j===Me[++I]&&j===Me[++I]&&j===Me[++I]&&j===Me[++I]&&j===Me[++I]&&j===Me[++I]&&I<V);g.match_length=F-(V-I),g.match_length>g.lookahead&&(g.match_length=g.lookahead)}if(g.match_length>=q?(K=t._tr_tally(g,1,g.match_length-q),g.lookahead-=g.match_length,g.strstart+=g.match_length,g.match_length=0):(K=t._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++),K&&(ee(g,!1),g.strm.avail_out===0))return X}return g.insert=0,W===s?(ee(g,!0),g.strm.avail_out===0?Ee:T):g.last_lit&&(ee(g,!1),g.strm.avail_out===0)?X:ge}function Ne(g,W){for(var K;;){if(g.lookahead===0&&(ye(g),g.lookahead===0)){if(W===l)return X;break}if(g.match_length=0,K=t._tr_tally(g,0,g.window[g.strstart]),g.lookahead--,g.strstart++,K&&(ee(g,!1),g.strm.avail_out===0))return X}return g.insert=0,W===s?(ee(g,!0),g.strm.avail_out===0?Ee:T):g.last_lit&&(ee(g,!1),g.strm.avail_out===0)?X:ge}function De(g,W,K,j,I){this.good_length=g,this.max_lazy=W,this.nice_length=K,this.max_chain=j,this.func=I}var ze;ze=[new De(0,0,0,0,Ae),new De(4,4,8,4,Se),new De(4,5,16,8,Se),new De(4,6,32,32,Se),new De(4,4,16,16,Re),new De(8,16,32,32,Re),new De(8,16,128,128,Re),new De(8,32,128,256,Re),new De(32,128,258,1024,Re),new De(32,258,258,4096,Re)];function Ie(g){g.window_size=2*g.w_size,ae(g.head),g.max_lazy_match=ze[g.level].max_lazy,g.good_match=ze[g.level].good_length,g.nice_match=ze[g.level].nice_length,g.max_chain_length=ze[g.level].max_chain,g.strstart=0,g.block_start=0,g.lookahead=0,g.insert=0,g.match_length=g.prev_length=q-1,g.match_available=0,g.ins_h=0}function N(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=C,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new e.Buf16(J*2),this.dyn_dtree=new e.Buf16((2*z+1)*2),this.bl_tree=new e.Buf16((2*U+1)*2),ae(this.dyn_ltree),ae(this.dyn_dtree),ae(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new e.Buf16(ce+1),this.heap=new e.Buf16(2*O+1),ae(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new e.Buf16(2*O+1),ae(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function le(g){var W;return!g||!g.state?ie(g,v):(g.total_in=g.total_out=0,g.data_type=E,W=g.state,W.pending=0,W.pending_out=0,W.wrap<0&&(W.wrap=-W.wrap),W.status=W.wrap?G:we,g.adler=W.wrap===2?0:1,W.last_flush=l,t._tr_init(W),u)}function oe(g){var W=le(g);return W===u&&Ie(g.state),W}function de(g,W){return!g||!g.state||g.state.wrap!==2?v:(g.state.gzhead=W,u)}function P(g,W,K,j,I,V){if(!g)return v;var Me=1;if(W===w&&(W=6),j<0?(Me=0,j=-j):j>15&&(Me=2,j-=16),I<1||I>M||K!==C||j<8||j>15||W<0||W>9||V<0||V>f)return ie(g,v);j===8&&(j=9);var _e=new N;return g.state=_e,_e.strm=g,_e.wrap=Me,_e.gzhead=null,_e.w_bits=j,_e.w_size=1<<_e.w_bits,_e.w_mask=_e.w_size-1,_e.hash_bits=I+7,_e.hash_size=1<<_e.hash_bits,_e.hash_mask=_e.hash_size-1,_e.hash_shift=~~((_e.hash_bits+q-1)/q),_e.window=new e.Buf8(_e.w_size*2),_e.head=new e.Buf16(_e.hash_size),_e.prev=new e.Buf16(_e.w_size),_e.lit_bufsize=1<<I+6,_e.pending_buf_size=_e.lit_bufsize*4,_e.pending_buf=new e.Buf8(_e.pending_buf_size),_e.d_buf=1*_e.lit_bufsize,_e.l_buf=3*_e.lit_bufsize,_e.level=W,_e.strategy=V,_e.method=K,oe(g)}function Z(g,W){return P(g,W,C,D,R,_)}function S(g,W){var K,j,I,V;if(!g||!g.state||W>h||W<0)return g?ie(g,v):v;if(j=g.state,!g.output||!g.input&&g.avail_in!==0||j.status===xe&&W!==s)return ie(g,g.avail_out===0?k:v);if(j.strm=g,K=j.last_flush,j.last_flush=W,j.status===G)if(j.wrap===2)g.adler=0,re(j,31),re(j,139),re(j,8),j.gzhead?(re(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),re(j,j.gzhead.time&255),re(j,j.gzhead.time>>8&255),re(j,j.gzhead.time>>16&255),re(j,j.gzhead.time>>24&255),re(j,j.level===9?2:j.strategy>=d||j.level<2?4:0),re(j,j.gzhead.os&255),j.gzhead.extra&&j.gzhead.extra.length&&(re(j,j.gzhead.extra.length&255),re(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(g.adler=r(g.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=H):(re(j,0),re(j,0),re(j,0),re(j,0),re(j,0),re(j,j.level===9?2:j.strategy>=d||j.level<2?4:0),re(j,ue),j.status=we);else{var Me=C+(j.w_bits-8<<4)<<8,_e=-1;j.strategy>=d||j.level<2?_e=0:j.level<6?_e=1:j.level===6?_e=2:_e=3,Me|=_e<<6,j.strstart!==0&&(Me|=B),Me+=31-Me%31,j.status=we,ne(j,Me),j.strstart!==0&&(ne(j,g.adler>>>16),ne(j,g.adler&65535)),g.adler=1}if(j.status===H)if(j.gzhead.extra){for(I=j.pending;j.gzindex<(j.gzhead.extra.length&65535)&&!(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>I&&(g.adler=r(g.adler,j.pending_buf,j.pending-I,I)),$(g),I=j.pending,j.pending===j.pending_buf_size));)re(j,j.gzhead.extra[j.gzindex]&255),j.gzindex++;j.gzhead.hcrc&&j.pending>I&&(g.adler=r(g.adler,j.pending_buf,j.pending-I,I)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=Y)}else j.status=Y;if(j.status===Y)if(j.gzhead.name){I=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>I&&(g.adler=r(g.adler,j.pending_buf,j.pending-I,I)),$(g),I=j.pending,j.pending===j.pending_buf_size)){V=1;break}j.gzindex<j.gzhead.name.length?V=j.gzhead.name.charCodeAt(j.gzindex++)&255:V=0,re(j,V)}while(V!==0);j.gzhead.hcrc&&j.pending>I&&(g.adler=r(g.adler,j.pending_buf,j.pending-I,I)),V===0&&(j.gzindex=0,j.status=pe)}else j.status=pe;if(j.status===pe)if(j.gzhead.comment){I=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>I&&(g.adler=r(g.adler,j.pending_buf,j.pending-I,I)),$(g),I=j.pending,j.pending===j.pending_buf_size)){V=1;break}j.gzindex<j.gzhead.comment.length?V=j.gzhead.comment.charCodeAt(j.gzindex++)&255:V=0,re(j,V)}while(V!==0);j.gzhead.hcrc&&j.pending>I&&(g.adler=r(g.adler,j.pending_buf,j.pending-I,I)),V===0&&(j.status=ve)}else j.status=ve;if(j.status===ve&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&$(g),j.pending+2<=j.pending_buf_size&&(re(j,g.adler&255),re(j,g.adler>>8&255),g.adler=0,j.status=we)):j.status=we),j.pending!==0){if($(g),g.avail_out===0)return j.last_flush=-1,u}else if(g.avail_in===0&&te(W)<=te(K)&&W!==s)return ie(g,k);if(j.status===xe&&g.avail_in!==0)return ie(g,k);if(g.avail_in!==0||j.lookahead!==0||W!==l&&j.status!==xe){var ke=j.strategy===d?Ne(j,W):j.strategy===m?Le(j,W):ze[j.level].func(j,W);if((ke===Ee||ke===T)&&(j.status=xe),ke===X||ke===Ee)return g.avail_out===0&&(j.last_flush=-1),u;if(ke===ge&&(W===a?t._tr_align(j):W!==h&&(t._tr_stored_block(j,0,0,!1),W===o&&(ae(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),$(g),g.avail_out===0))return j.last_flush=-1,u}return W!==s?u:j.wrap<=0?c:(j.wrap===2?(re(j,g.adler&255),re(j,g.adler>>8&255),re(j,g.adler>>16&255),re(j,g.adler>>24&255),re(j,g.total_in&255),re(j,g.total_in>>8&255),re(j,g.total_in>>16&255),re(j,g.total_in>>24&255)):(ne(j,g.adler>>>16),ne(j,g.adler&65535)),$(g),j.wrap>0&&(j.wrap=-j.wrap),j.pending!==0?u:c)}function se(g){var W;return!g||!g.state?v:(W=g.state.status,W!==G&&W!==H&&W!==Y&&W!==pe&&W!==ve&&W!==we&&W!==xe?ie(g,v):(g.state=null,W===we?ie(g,y):u))}function je(g,W){var K=W.length,j,I,V,Me,_e,ke,Pe,wt;if(!g||!g.state||(j=g.state,Me=j.wrap,Me===2||Me===1&&j.status!==G||j.lookahead))return v;for(Me===1&&(g.adler=n(g.adler,W,K,0)),j.wrap=0,K>=j.w_size&&(Me===0&&(ae(j.head),j.strstart=0,j.block_start=0,j.insert=0),wt=new e.Buf8(j.w_size),e.arraySet(wt,W,K-j.w_size,j.w_size,0),W=wt,K=j.w_size),_e=g.avail_in,ke=g.next_in,Pe=g.input,g.avail_in=K,g.next_in=0,g.input=W,ye(j);j.lookahead>=q;){I=j.strstart,V=j.lookahead-(q-1);do j.ins_h=(j.ins_h<<j.hash_shift^j.window[I+q-1])&j.hash_mask,j.prev[I&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=I,I++;while(--V);j.strstart=I,j.lookahead=q-1,ye(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=q-1,j.match_available=0,g.next_in=ke,g.input=Pe,g.avail_in=_e,j.wrap=Me,u}return Ht.deflateInit=Z,Ht.deflateInit2=P,Ht.deflateReset=oe,Ht.deflateResetKeep=le,Ht.deflateSetHeader=de,Ht.deflate=S,Ht.deflateEnd=se,Ht.deflateSetDictionary=je,Ht.deflateInfo="pako deflate (from Nodeca project)",Ht}var In={},Uu;function Sd(){if(Uu)return In;Uu=1;var e=An(),t=!0,n=!0;try{String.fromCharCode.apply(null,[0])}catch{t=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{n=!1}for(var r=new e.Buf8(256),i=0;i<256;i++)r[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;r[254]=r[254]=1,In.string2buf=function(a){var o,s,h,u,c,v=a.length,y=0;for(u=0;u<v;u++)s=a.charCodeAt(u),(s&64512)===55296&&u+1<v&&(h=a.charCodeAt(u+1),(h&64512)===56320&&(s=65536+(s-55296<<10)+(h-56320),u++)),y+=s<128?1:s<2048?2:s<65536?3:4;for(o=new e.Buf8(y),c=0,u=0;c<y;u++)s=a.charCodeAt(u),(s&64512)===55296&&u+1<v&&(h=a.charCodeAt(u+1),(h&64512)===56320&&(s=65536+(s-55296<<10)+(h-56320),u++)),s<128?o[c++]=s:s<2048?(o[c++]=192|s>>>6,o[c++]=128|s&63):s<65536?(o[c++]=224|s>>>12,o[c++]=128|s>>>6&63,o[c++]=128|s&63):(o[c++]=240|s>>>18,o[c++]=128|s>>>12&63,o[c++]=128|s>>>6&63,o[c++]=128|s&63);return o};function l(a,o){if(o<65534&&(a.subarray&&n||!a.subarray&&t))return String.fromCharCode.apply(null,e.shrinkBuf(a,o));for(var s="",h=0;h<o;h++)s+=String.fromCharCode(a[h]);return s}return In.buf2binstring=function(a){return l(a,a.length)},In.binstring2buf=function(a){for(var o=new e.Buf8(a.length),s=0,h=o.length;s<h;s++)o[s]=a.charCodeAt(s);return o},In.buf2string=function(a,o){var s,h,u,c,v=o||a.length,y=new Array(v*2);for(h=0,s=0;s<v;){if(u=a[s++],u<128){y[h++]=u;continue}if(c=r[u],c>4){y[h++]=65533,s+=c-1;continue}for(u&=c===2?31:c===3?15:7;c>1&&s<v;)u=u<<6|a[s++]&63,c--;if(c>1){y[h++]=65533;continue}u<65536?y[h++]=u:(u-=65536,y[h++]=55296|u>>10&1023,y[h++]=56320|u&1023)}return l(y,h)},In.utf8border=function(a,o){var s;for(o=o||a.length,o>a.length&&(o=a.length),s=o-1;s>=0&&(a[s]&192)===128;)s--;return s<0||s===0?o:s+r[a[s]]>o?s:o},In}var yl,$u;function Ed(){if($u)return yl;$u=1;function e(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}return yl=e,yl}var Vu;function G1(){if(Vu)return qn;Vu=1;var e=V1(),t=An(),n=Sd(),r=ws(),i=Ed(),l=Object.prototype.toString,a=0,o=4,s=0,h=1,u=2,c=-1,v=0,y=8;function k(m){if(!(this instanceof k))return new k(m);this.options=t.assign({level:c,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},m||{});var f=this.options;f.raw&&f.windowBits>0?f.windowBits=-f.windowBits:f.gzip&&f.windowBits>0&&f.windowBits<16&&(f.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new i,this.strm.avail_out=0;var _=e.deflateInit2(this.strm,f.level,f.method,f.windowBits,f.memLevel,f.strategy);if(_!==s)throw new Error(r[_]);if(f.header&&e.deflateSetHeader(this.strm,f.header),f.dictionary){var E;if(typeof f.dictionary=="string"?E=n.string2buf(f.dictionary):l.call(f.dictionary)==="[object ArrayBuffer]"?E=new Uint8Array(f.dictionary):E=f.dictionary,_=e.deflateSetDictionary(this.strm,E),_!==s)throw new Error(r[_]);this._dict_set=!0}}k.prototype.push=function(m,f){var _=this.strm,E=this.options.chunkSize,C,M;if(this.ended)return!1;M=f===~~f?f:f===!0?o:a,typeof m=="string"?_.input=n.string2buf(m):l.call(m)==="[object ArrayBuffer]"?_.input=new Uint8Array(m):_.input=m,_.next_in=0,_.avail_in=_.input.length;do{if(_.avail_out===0&&(_.output=new t.Buf8(E),_.next_out=0,_.avail_out=E),C=e.deflate(_,M),C!==h&&C!==s)return this.onEnd(C),this.ended=!0,!1;(_.avail_out===0||_.avail_in===0&&(M===o||M===u))&&(this.options.to==="string"?this.onData(n.buf2binstring(t.shrinkBuf(_.output,_.next_out))):this.onData(t.shrinkBuf(_.output,_.next_out)))}while((_.avail_in>0||_.avail_out===0)&&C!==h);return M===o?(C=e.deflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===s):(M===u&&(this.onEnd(s),_.avail_out=0),!0)},k.prototype.onData=function(m){this.chunks.push(m)},k.prototype.onEnd=function(m){m===s&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=m,this.msg=this.strm.msg};function w(m,f){var _=new k(f);if(_.push(m,!0),_.err)throw _.msg||r[_.err];return _.result}function x(m,f){return f=f||{},f.raw=!0,w(m,f)}function d(m,f){return f=f||{},f.gzip=!0,w(m,f)}return qn.Deflate=k,qn.deflate=w,qn.deflateRaw=x,qn.gzip=d,qn}var er={},Lt={},xl,Gu;function K1(){if(Gu)return xl;Gu=1;var e=30,t=12;return xl=function(r,i){var l,a,o,s,h,u,c,v,y,k,w,x,d,m,f,_,E,C,M,D,R,A,L,O,z;l=r.state,a=r.next_in,O=r.input,o=a+(r.avail_in-5),s=r.next_out,z=r.output,h=s-(i-r.avail_out),u=s+(r.avail_out-257),c=l.dmax,v=l.wsize,y=l.whave,k=l.wnext,w=l.window,x=l.hold,d=l.bits,m=l.lencode,f=l.distcode,_=(1<<l.lenbits)-1,E=(1<<l.distbits)-1;e:do{d<15&&(x+=O[a++]<<d,d+=8,x+=O[a++]<<d,d+=8),C=m[x&_];t:for(;;){if(M=C>>>24,x>>>=M,d-=M,M=C>>>16&255,M===0)z[s++]=C&65535;else if(M&16){D=C&65535,M&=15,M&&(d<M&&(x+=O[a++]<<d,d+=8),D+=x&(1<<M)-1,x>>>=M,d-=M),d<15&&(x+=O[a++]<<d,d+=8,x+=O[a++]<<d,d+=8),C=f[x&E];n:for(;;){if(M=C>>>24,x>>>=M,d-=M,M=C>>>16&255,M&16){if(R=C&65535,M&=15,d<M&&(x+=O[a++]<<d,d+=8,d<M&&(x+=O[a++]<<d,d+=8)),R+=x&(1<<M)-1,R>c){r.msg="invalid distance too far back",l.mode=e;break e}if(x>>>=M,d-=M,M=s-h,R>M){if(M=R-M,M>y&&l.sane){r.msg="invalid distance too far back",l.mode=e;break e}if(A=0,L=w,k===0){if(A+=v-M,M<D){D-=M;do z[s++]=w[A++];while(--M);A=s-R,L=z}}else if(k<M){if(A+=v+k-M,M-=k,M<D){D-=M;do z[s++]=w[A++];while(--M);if(A=0,k<D){M=k,D-=M;do z[s++]=w[A++];while(--M);A=s-R,L=z}}}else if(A+=k-M,M<D){D-=M;do z[s++]=w[A++];while(--M);A=s-R,L=z}for(;D>2;)z[s++]=L[A++],z[s++]=L[A++],z[s++]=L[A++],D-=3;D&&(z[s++]=L[A++],D>1&&(z[s++]=L[A++]))}else{A=s-R;do z[s++]=z[A++],z[s++]=z[A++],z[s++]=z[A++],D-=3;while(D>2);D&&(z[s++]=z[A++],D>1&&(z[s++]=z[A++]))}}else if(M&64){r.msg="invalid distance code",l.mode=e;break e}else{C=f[(C&65535)+(x&(1<<M)-1)];continue n}break}}else if(M&64)if(M&32){l.mode=t;break e}else{r.msg="invalid literal/length code",l.mode=e;break e}else{C=m[(C&65535)+(x&(1<<M)-1)];continue t}break}}while(a<o&&s<u);D=d>>3,a-=D,d-=D<<3,x&=(1<<d)-1,r.next_in=a,r.next_out=s,r.avail_in=a<o?5+(o-a):5-(a-o),r.avail_out=s<u?257+(u-s):257-(s-u),l.hold=x,l.bits=d},xl}var _l,Ku;function Y1(){if(Ku)return _l;Ku=1;var e=An(),t=15,n=852,r=592,i=0,l=1,a=2,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],u=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];return _l=function(v,y,k,w,x,d,m,f){var _=f.bits,E=0,C=0,M=0,D=0,R=0,A=0,L=0,O=0,z=0,U=0,J,ce,q,F,b,B=null,G=0,H,Y=new e.Buf16(t+1),pe=new e.Buf16(t+1),ve=null,we=0,xe,X,ge;for(E=0;E<=t;E++)Y[E]=0;for(C=0;C<w;C++)Y[y[k+C]]++;for(R=_,D=t;D>=1&&Y[D]===0;D--);if(R>D&&(R=D),D===0)return x[d++]=1<<24|64<<16|0,x[d++]=1<<24|64<<16|0,f.bits=1,0;for(M=1;M<D&&Y[M]===0;M++);for(R<M&&(R=M),O=1,E=1;E<=t;E++)if(O<<=1,O-=Y[E],O<0)return-1;if(O>0&&(v===i||D!==1))return-1;for(pe[1]=0,E=1;E<t;E++)pe[E+1]=pe[E]+Y[E];for(C=0;C<w;C++)y[k+C]!==0&&(m[pe[y[k+C]]++]=C);if(v===i?(B=ve=m,H=19):v===l?(B=o,G-=257,ve=s,we-=257,H=256):(B=h,ve=u,H=-1),U=0,C=0,E=M,b=d,A=R,L=0,q=-1,z=1<<R,F=z-1,v===l&&z>n||v===a&&z>r)return 1;for(;;){xe=E-L,m[C]<H?(X=0,ge=m[C]):m[C]>H?(X=ve[we+m[C]],ge=B[G+m[C]]):(X=96,ge=0),J=1<<E-L,ce=1<<A,M=ce;do ce-=J,x[b+(U>>L)+ce]=xe<<24|X<<16|ge|0;while(ce!==0);for(J=1<<E-1;U&J;)J>>=1;if(J!==0?(U&=J-1,U+=J):U=0,C++,--Y[E]===0){if(E===D)break;E=y[k+m[C]]}if(E>R&&(U&F)!==q){for(L===0&&(L=R),b+=M,A=E-L,O=1<<A;A+L<D&&(O-=Y[A+L],!(O<=0));)A++,O<<=1;if(z+=1<<A,v===l&&z>n||v===a&&z>r)return 1;q=U&F,x[q]=R<<24|A<<16|b-d|0}}return U!==0&&(x[b+U]=E-L<<24|64<<16|0),f.bits=R,0},_l}var Yu;function X1(){if(Yu)return Lt;Yu=1;var e=An(),t=_d(),n=kd(),r=K1(),i=Y1(),l=0,a=1,o=2,s=4,h=5,u=6,c=0,v=1,y=2,k=-2,w=-3,x=-4,d=-5,m=8,f=1,_=2,E=3,C=4,M=5,D=6,R=7,A=8,L=9,O=10,z=11,U=12,J=13,ce=14,q=15,F=16,b=17,B=18,G=19,H=20,Y=21,pe=22,ve=23,we=24,xe=25,X=26,ge=27,Ee=28,T=29,ue=30,ie=31,te=32,ae=852,$=592,ee=15,re=ee;function ne(P){return(P>>>24&255)+(P>>>8&65280)+((P&65280)<<8)+((P&255)<<24)}function fe(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new e.Buf16(320),this.work=new e.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function me(P){var Z;return!P||!P.state?k:(Z=P.state,P.total_in=P.total_out=Z.total=0,P.msg="",Z.wrap&&(P.adler=Z.wrap&1),Z.mode=f,Z.last=0,Z.havedict=0,Z.dmax=32768,Z.head=null,Z.hold=0,Z.bits=0,Z.lencode=Z.lendyn=new e.Buf32(ae),Z.distcode=Z.distdyn=new e.Buf32($),Z.sane=1,Z.back=-1,c)}function ye(P){var Z;return!P||!P.state?k:(Z=P.state,Z.wsize=0,Z.whave=0,Z.wnext=0,me(P))}function Ae(P,Z){var S,se;return!P||!P.state||(se=P.state,Z<0?(S=0,Z=-Z):(S=(Z>>4)+1,Z<48&&(Z&=15)),Z&&(Z<8||Z>15))?k:(se.window!==null&&se.wbits!==Z&&(se.window=null),se.wrap=S,se.wbits=Z,ye(P))}function Se(P,Z){var S,se;return P?(se=new fe,P.state=se,se.window=null,S=Ae(P,Z),S!==c&&(P.state=null),S):k}function Re(P){return Se(P,re)}var Le=!0,Ne,De;function ze(P){if(Le){var Z;for(Ne=new e.Buf32(512),De=new e.Buf32(32),Z=0;Z<144;)P.lens[Z++]=8;for(;Z<256;)P.lens[Z++]=9;for(;Z<280;)P.lens[Z++]=7;for(;Z<288;)P.lens[Z++]=8;for(i(a,P.lens,0,288,Ne,0,P.work,{bits:9}),Z=0;Z<32;)P.lens[Z++]=5;i(o,P.lens,0,32,De,0,P.work,{bits:5}),Le=!1}P.lencode=Ne,P.lenbits=9,P.distcode=De,P.distbits=5}function Ie(P,Z,S,se){var je,g=P.state;return g.window===null&&(g.wsize=1<<g.wbits,g.wnext=0,g.whave=0,g.window=new e.Buf8(g.wsize)),se>=g.wsize?(e.arraySet(g.window,Z,S-g.wsize,g.wsize,0),g.wnext=0,g.whave=g.wsize):(je=g.wsize-g.wnext,je>se&&(je=se),e.arraySet(g.window,Z,S-se,je,g.wnext),se-=je,se?(e.arraySet(g.window,Z,S-se,se,0),g.wnext=se,g.whave=g.wsize):(g.wnext+=je,g.wnext===g.wsize&&(g.wnext=0),g.whave<g.wsize&&(g.whave+=je))),0}function N(P,Z){var S,se,je,g,W,K,j,I,V,Me,_e,ke,Pe,wt,He=0,Te,et,Ze,Je,Qn,Ln,Ge,yt,nt=new e.Buf8(4),Ot,At,Es=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return k;S=P.state,S.mode===U&&(S.mode=J),W=P.next_out,je=P.output,j=P.avail_out,g=P.next_in,se=P.input,K=P.avail_in,I=S.hold,V=S.bits,Me=K,_e=j,yt=c;e:for(;;)switch(S.mode){case f:if(S.wrap===0){S.mode=J;break}for(;V<16;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(S.wrap&2&&I===35615){S.check=0,nt[0]=I&255,nt[1]=I>>>8&255,S.check=n(S.check,nt,2,0),I=0,V=0,S.mode=_;break}if(S.flags=0,S.head&&(S.head.done=!1),!(S.wrap&1)||(((I&255)<<8)+(I>>8))%31){P.msg="incorrect header check",S.mode=ue;break}if((I&15)!==m){P.msg="unknown compression method",S.mode=ue;break}if(I>>>=4,V-=4,Ge=(I&15)+8,S.wbits===0)S.wbits=Ge;else if(Ge>S.wbits){P.msg="invalid window size",S.mode=ue;break}S.dmax=1<<Ge,P.adler=S.check=1,S.mode=I&512?O:U,I=0,V=0;break;case _:for(;V<16;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(S.flags=I,(S.flags&255)!==m){P.msg="unknown compression method",S.mode=ue;break}if(S.flags&57344){P.msg="unknown header flags set",S.mode=ue;break}S.head&&(S.head.text=I>>8&1),S.flags&512&&(nt[0]=I&255,nt[1]=I>>>8&255,S.check=n(S.check,nt,2,0)),I=0,V=0,S.mode=E;case E:for(;V<32;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}S.head&&(S.head.time=I),S.flags&512&&(nt[0]=I&255,nt[1]=I>>>8&255,nt[2]=I>>>16&255,nt[3]=I>>>24&255,S.check=n(S.check,nt,4,0)),I=0,V=0,S.mode=C;case C:for(;V<16;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}S.head&&(S.head.xflags=I&255,S.head.os=I>>8),S.flags&512&&(nt[0]=I&255,nt[1]=I>>>8&255,S.check=n(S.check,nt,2,0)),I=0,V=0,S.mode=M;case M:if(S.flags&1024){for(;V<16;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}S.length=I,S.head&&(S.head.extra_len=I),S.flags&512&&(nt[0]=I&255,nt[1]=I>>>8&255,S.check=n(S.check,nt,2,0)),I=0,V=0}else S.head&&(S.head.extra=null);S.mode=D;case D:if(S.flags&1024&&(ke=S.length,ke>K&&(ke=K),ke&&(S.head&&(Ge=S.head.extra_len-S.length,S.head.extra||(S.head.extra=new Array(S.head.extra_len)),e.arraySet(S.head.extra,se,g,ke,Ge)),S.flags&512&&(S.check=n(S.check,se,ke,g)),K-=ke,g+=ke,S.length-=ke),S.length))break e;S.length=0,S.mode=R;case R:if(S.flags&2048){if(K===0)break e;ke=0;do Ge=se[g+ke++],S.head&&Ge&&S.length<65536&&(S.head.name+=String.fromCharCode(Ge));while(Ge&&ke<K);if(S.flags&512&&(S.check=n(S.check,se,ke,g)),K-=ke,g+=ke,Ge)break e}else S.head&&(S.head.name=null);S.length=0,S.mode=A;case A:if(S.flags&4096){if(K===0)break e;ke=0;do Ge=se[g+ke++],S.head&&Ge&&S.length<65536&&(S.head.comment+=String.fromCharCode(Ge));while(Ge&&ke<K);if(S.flags&512&&(S.check=n(S.check,se,ke,g)),K-=ke,g+=ke,Ge)break e}else S.head&&(S.head.comment=null);S.mode=L;case L:if(S.flags&512){for(;V<16;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(I!==(S.check&65535)){P.msg="header crc mismatch",S.mode=ue;break}I=0,V=0}S.head&&(S.head.hcrc=S.flags>>9&1,S.head.done=!0),P.adler=S.check=0,S.mode=U;break;case O:for(;V<32;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}P.adler=S.check=ne(I),I=0,V=0,S.mode=z;case z:if(S.havedict===0)return P.next_out=W,P.avail_out=j,P.next_in=g,P.avail_in=K,S.hold=I,S.bits=V,y;P.adler=S.check=1,S.mode=U;case U:if(Z===h||Z===u)break e;case J:if(S.last){I>>>=V&7,V-=V&7,S.mode=ge;break}for(;V<3;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}switch(S.last=I&1,I>>>=1,V-=1,I&3){case 0:S.mode=ce;break;case 1:if(ze(S),S.mode=H,Z===u){I>>>=2,V-=2;break e}break;case 2:S.mode=b;break;case 3:P.msg="invalid block type",S.mode=ue}I>>>=2,V-=2;break;case ce:for(I>>>=V&7,V-=V&7;V<32;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if((I&65535)!==(I>>>16^65535)){P.msg="invalid stored block lengths",S.mode=ue;break}if(S.length=I&65535,I=0,V=0,S.mode=q,Z===u)break e;case q:S.mode=F;case F:if(ke=S.length,ke){if(ke>K&&(ke=K),ke>j&&(ke=j),ke===0)break e;e.arraySet(je,se,g,ke,W),K-=ke,g+=ke,j-=ke,W+=ke,S.length-=ke;break}S.mode=U;break;case b:for(;V<14;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(S.nlen=(I&31)+257,I>>>=5,V-=5,S.ndist=(I&31)+1,I>>>=5,V-=5,S.ncode=(I&15)+4,I>>>=4,V-=4,S.nlen>286||S.ndist>30){P.msg="too many length or distance symbols",S.mode=ue;break}S.have=0,S.mode=B;case B:for(;S.have<S.ncode;){for(;V<3;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}S.lens[Es[S.have++]]=I&7,I>>>=3,V-=3}for(;S.have<19;)S.lens[Es[S.have++]]=0;if(S.lencode=S.lendyn,S.lenbits=7,Ot={bits:S.lenbits},yt=i(l,S.lens,0,19,S.lencode,0,S.work,Ot),S.lenbits=Ot.bits,yt){P.msg="invalid code lengths set",S.mode=ue;break}S.have=0,S.mode=G;case G:for(;S.have<S.nlen+S.ndist;){for(;He=S.lencode[I&(1<<S.lenbits)-1],Te=He>>>24,et=He>>>16&255,Ze=He&65535,!(Te<=V);){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(Ze<16)I>>>=Te,V-=Te,S.lens[S.have++]=Ze;else{if(Ze===16){for(At=Te+2;V<At;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(I>>>=Te,V-=Te,S.have===0){P.msg="invalid bit length repeat",S.mode=ue;break}Ge=S.lens[S.have-1],ke=3+(I&3),I>>>=2,V-=2}else if(Ze===17){for(At=Te+3;V<At;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}I>>>=Te,V-=Te,Ge=0,ke=3+(I&7),I>>>=3,V-=3}else{for(At=Te+7;V<At;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}I>>>=Te,V-=Te,Ge=0,ke=11+(I&127),I>>>=7,V-=7}if(S.have+ke>S.nlen+S.ndist){P.msg="invalid bit length repeat",S.mode=ue;break}for(;ke--;)S.lens[S.have++]=Ge}}if(S.mode===ue)break;if(S.lens[256]===0){P.msg="invalid code -- missing end-of-block",S.mode=ue;break}if(S.lenbits=9,Ot={bits:S.lenbits},yt=i(a,S.lens,0,S.nlen,S.lencode,0,S.work,Ot),S.lenbits=Ot.bits,yt){P.msg="invalid literal/lengths set",S.mode=ue;break}if(S.distbits=6,S.distcode=S.distdyn,Ot={bits:S.distbits},yt=i(o,S.lens,S.nlen,S.ndist,S.distcode,0,S.work,Ot),S.distbits=Ot.bits,yt){P.msg="invalid distances set",S.mode=ue;break}if(S.mode=H,Z===u)break e;case H:S.mode=Y;case Y:if(K>=6&&j>=258){P.next_out=W,P.avail_out=j,P.next_in=g,P.avail_in=K,S.hold=I,S.bits=V,r(P,_e),W=P.next_out,je=P.output,j=P.avail_out,g=P.next_in,se=P.input,K=P.avail_in,I=S.hold,V=S.bits,S.mode===U&&(S.back=-1);break}for(S.back=0;He=S.lencode[I&(1<<S.lenbits)-1],Te=He>>>24,et=He>>>16&255,Ze=He&65535,!(Te<=V);){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(et&&!(et&240)){for(Je=Te,Qn=et,Ln=Ze;He=S.lencode[Ln+((I&(1<<Je+Qn)-1)>>Je)],Te=He>>>24,et=He>>>16&255,Ze=He&65535,!(Je+Te<=V);){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}I>>>=Je,V-=Je,S.back+=Je}if(I>>>=Te,V-=Te,S.back+=Te,S.length=Ze,et===0){S.mode=X;break}if(et&32){S.back=-1,S.mode=U;break}if(et&64){P.msg="invalid literal/length code",S.mode=ue;break}S.extra=et&15,S.mode=pe;case pe:if(S.extra){for(At=S.extra;V<At;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}S.length+=I&(1<<S.extra)-1,I>>>=S.extra,V-=S.extra,S.back+=S.extra}S.was=S.length,S.mode=ve;case ve:for(;He=S.distcode[I&(1<<S.distbits)-1],Te=He>>>24,et=He>>>16&255,Ze=He&65535,!(Te<=V);){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(!(et&240)){for(Je=Te,Qn=et,Ln=Ze;He=S.distcode[Ln+((I&(1<<Je+Qn)-1)>>Je)],Te=He>>>24,et=He>>>16&255,Ze=He&65535,!(Je+Te<=V);){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}I>>>=Je,V-=Je,S.back+=Je}if(I>>>=Te,V-=Te,S.back+=Te,et&64){P.msg="invalid distance code",S.mode=ue;break}S.offset=Ze,S.extra=et&15,S.mode=we;case we:if(S.extra){for(At=S.extra;V<At;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}S.offset+=I&(1<<S.extra)-1,I>>>=S.extra,V-=S.extra,S.back+=S.extra}if(S.offset>S.dmax){P.msg="invalid distance too far back",S.mode=ue;break}S.mode=xe;case xe:if(j===0)break e;if(ke=_e-j,S.offset>ke){if(ke=S.offset-ke,ke>S.whave&&S.sane){P.msg="invalid distance too far back",S.mode=ue;break}ke>S.wnext?(ke-=S.wnext,Pe=S.wsize-ke):Pe=S.wnext-ke,ke>S.length&&(ke=S.length),wt=S.window}else wt=je,Pe=W-S.offset,ke=S.length;ke>j&&(ke=j),j-=ke,S.length-=ke;do je[W++]=wt[Pe++];while(--ke);S.length===0&&(S.mode=Y);break;case X:if(j===0)break e;je[W++]=S.length,j--,S.mode=Y;break;case ge:if(S.wrap){for(;V<32;){if(K===0)break e;K--,I|=se[g++]<<V,V+=8}if(_e-=j,P.total_out+=_e,S.total+=_e,_e&&(P.adler=S.check=S.flags?n(S.check,je,_e,W-_e):t(S.check,je,_e,W-_e)),_e=j,(S.flags?I:ne(I))!==S.check){P.msg="incorrect data check",S.mode=ue;break}I=0,V=0}S.mode=Ee;case Ee:if(S.wrap&&S.flags){for(;V<32;){if(K===0)break e;K--,I+=se[g++]<<V,V+=8}if(I!==(S.total&4294967295)){P.msg="incorrect length check",S.mode=ue;break}I=0,V=0}S.mode=T;case T:yt=v;break e;case ue:yt=w;break e;case ie:return x;case te:default:return k}return P.next_out=W,P.avail_out=j,P.next_in=g,P.avail_in=K,S.hold=I,S.bits=V,(S.wsize||_e!==P.avail_out&&S.mode<ue&&(S.mode<ge||Z!==s))&&Ie(P,P.output,P.next_out,_e-P.avail_out),Me-=P.avail_in,_e-=P.avail_out,P.total_in+=Me,P.total_out+=_e,S.total+=_e,S.wrap&&_e&&(P.adler=S.check=S.flags?n(S.check,je,_e,P.next_out-_e):t(S.check,je,_e,P.next_out-_e)),P.data_type=S.bits+(S.last?64:0)+(S.mode===U?128:0)+(S.mode===H||S.mode===q?256:0),(Me===0&&_e===0||Z===s)&&yt===c&&(yt=d),yt}function le(P){if(!P||!P.state)return k;var Z=P.state;return Z.window&&(Z.window=null),P.state=null,c}function oe(P,Z){var S;return!P||!P.state||(S=P.state,!(S.wrap&2))?k:(S.head=Z,Z.done=!1,c)}function de(P,Z){var S=Z.length,se,je,g;return!P||!P.state||(se=P.state,se.wrap!==0&&se.mode!==z)?k:se.mode===z&&(je=1,je=t(je,Z,S,0),je!==se.check)?w:(g=Ie(P,Z,S,S),g?(se.mode=ie,x):(se.havedict=1,c))}return Lt.inflateReset=ye,Lt.inflateReset2=Ae,Lt.inflateResetKeep=me,Lt.inflateInit=Re,Lt.inflateInit2=Se,Lt.inflate=N,Lt.inflateEnd=le,Lt.inflateGetHeader=oe,Lt.inflateSetDictionary=de,Lt.inflateInfo="pako inflate (from Nodeca project)",Lt}var kl,Xu;function Cd(){return Xu||(Xu=1,kl={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}),kl}var Sl,Zu;function Z1(){if(Zu)return Sl;Zu=1;function e(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}return Sl=e,Sl}var Qu;function Q1(){if(Qu)return er;Qu=1;var e=X1(),t=An(),n=Sd(),r=Cd(),i=ws(),l=Ed(),a=Z1(),o=Object.prototype.toString;function s(c){if(!(this instanceof s))return new s(c);this.options=t.assign({chunkSize:16384,windowBits:0,to:""},c||{});var v=this.options;v.raw&&v.windowBits>=0&&v.windowBits<16&&(v.windowBits=-v.windowBits,v.windowBits===0&&(v.windowBits=-15)),v.windowBits>=0&&v.windowBits<16&&!(c&&c.windowBits)&&(v.windowBits+=32),v.windowBits>15&&v.windowBits<48&&(v.windowBits&15||(v.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var y=e.inflateInit2(this.strm,v.windowBits);if(y!==r.Z_OK)throw new Error(i[y]);if(this.header=new a,e.inflateGetHeader(this.strm,this.header),v.dictionary&&(typeof v.dictionary=="string"?v.dictionary=n.string2buf(v.dictionary):o.call(v.dictionary)==="[object ArrayBuffer]"&&(v.dictionary=new Uint8Array(v.dictionary)),v.raw&&(y=e.inflateSetDictionary(this.strm,v.dictionary),y!==r.Z_OK)))throw new Error(i[y])}s.prototype.push=function(c,v){var y=this.strm,k=this.options.chunkSize,w=this.options.dictionary,x,d,m,f,_,E=!1;if(this.ended)return!1;d=v===~~v?v:v===!0?r.Z_FINISH:r.Z_NO_FLUSH,typeof c=="string"?y.input=n.binstring2buf(c):o.call(c)==="[object ArrayBuffer]"?y.input=new Uint8Array(c):y.input=c,y.next_in=0,y.avail_in=y.input.length;do{if(y.avail_out===0&&(y.output=new t.Buf8(k),y.next_out=0,y.avail_out=k),x=e.inflate(y,r.Z_NO_FLUSH),x===r.Z_NEED_DICT&&w&&(x=e.inflateSetDictionary(this.strm,w)),x===r.Z_BUF_ERROR&&E===!0&&(x=r.Z_OK,E=!1),x!==r.Z_STREAM_END&&x!==r.Z_OK)return this.onEnd(x),this.ended=!0,!1;y.next_out&&(y.avail_out===0||x===r.Z_STREAM_END||y.avail_in===0&&(d===r.Z_FINISH||d===r.Z_SYNC_FLUSH))&&(this.options.to==="string"?(m=n.utf8border(y.output,y.next_out),f=y.next_out-m,_=n.buf2string(y.output,m),y.next_out=f,y.avail_out=k-f,f&&t.arraySet(y.output,y.output,m,f,0),this.onData(_)):this.onData(t.shrinkBuf(y.output,y.next_out))),y.avail_in===0&&y.avail_out===0&&(E=!0)}while((y.avail_in>0||y.avail_out===0)&&x!==r.Z_STREAM_END);return x===r.Z_STREAM_END&&(d=r.Z_FINISH),d===r.Z_FINISH?(x=e.inflateEnd(this.strm),this.onEnd(x),this.ended=!0,x===r.Z_OK):(d===r.Z_SYNC_FLUSH&&(this.onEnd(r.Z_OK),y.avail_out=0),!0)},s.prototype.onData=function(c){this.chunks.push(c)},s.prototype.onEnd=function(c){c===r.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=t.flattenChunks(this.chunks)),this.chunks=[],this.err=c,this.msg=this.strm.msg};function h(c,v){var y=new s(v);if(y.push(c,!0),y.err)throw y.msg||i[y.err];return y.result}function u(c,v){return v=v||{},v.raw=!0,h(c,v)}return er.Inflate=s,er.inflate=h,er.inflateRaw=u,er.ungzip=h,er}var El,Ju;function J1(){if(Ju)return El;Ju=1;var e=An().assign,t=G1(),n=Q1(),r=Cd(),i={};return e(i,t,n,r),El=i,El}(function(e){(function(){var t={};e.exports=t;var n;typeof U1=="function"?n=J1():n=self.pako;function r(){typeof process>"u"&&console.log.apply(console,arguments)}(function(i,l){(function(){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},o=function(){function h(u){this.message="JPEG error: "+u}return h.prototype=Error(),h.prototype.name="JpegError",h.constructor=h}(),s=function(){function h(u,c){this.message=u,this.g=c}return h.prototype=Error(),h.prototype.name="DNLMarkerError",h.constructor=h}();(function(){function h(){this.M=null,this.B=-1}function u(w,x){for(var d=0,m=[],f,_,E=16;0<E&&!w[E-1];)E--;m.push({children:[],index:0});var C=m[0],M;for(f=0;f<E;f++){for(_=0;_<w[f];_++){for(C=m.pop(),C.children[C.index]=x[d];0<C.index;)C=m.pop();for(C.index++,m.push(C);m.length<=f;)m.push(M={children:[],index:0}),C.children[C.index]=M.children,C=M;d++}f+1<E&&(m.push(M={children:[],index:0}),C.children[C.index]=M.children,C=M)}return m[0].children}function c(w,x,d,m,f,_,E,C,M){function D(){if(0<G)return G--,B>>G&1;if(B=w[x++],B===255){var ee=w[x++];if(ee){if(ee===220&&q){x+=2;var re=w[x++]<<8|w[x++];if(0<re&&re!==d.g)throw new s("Found DNL marker (0xFFDC) while parsing scan data",re)}throw new o("unexpected marker "+(B<<8|ee).toString(16))}}return G=7,B>>>7}function R(ee){for(;;){if(ee=ee[D()],typeof ee=="number")return ee;if((typeof ee>"u"?"undefined":a(ee))!=="object")throw new o("invalid huffman sequence")}}function A(ee){for(var re=0;0<ee;)re=re<<1|D(),ee--;return re}function L(ee){if(ee===1)return D()===1?1:-1;var re=A(ee);return re>=1<<ee-1?re:re+(-1<<ee)+1}function O(ee,re){var ne=R(ee.D);for(ne=ne===0?0:L(ne),ee.a[re]=ee.m+=ne,ne=1;64>ne;){var fe=R(ee.o),me=fe&15;if(fe>>=4,me===0){if(15>fe)break;ne+=16}else ne+=fe,ee.a[re+k[ne]]=L(me),ne++}}function z(ee,re){var ne=R(ee.D);ne=ne===0?0:L(ne)<<M,ee.a[re]=ee.m+=ne}function U(ee,re){ee.a[re]|=D()<<M}function J(ee,re){if(0<H)H--;else for(var ne=_;ne<=E;){var fe=R(ee.o),me=fe&15;if(fe>>=4,me===0){if(15>fe){H=A(fe)+(1<<fe)-1;break}ne+=16}else ne+=fe,ee.a[re+k[ne]]=L(me)*(1<<M),ne++}}function ce(ee,re){for(var ne=_,fe=0,me;ne<=E;){me=re+k[ne];var ye=0>ee.a[me]?-1:1;switch(Y){case 0:if(fe=R(ee.o),me=fe&15,fe>>=4,me===0)15>fe?(H=A(fe)+(1<<fe),Y=4):(fe=16,Y=1);else{if(me!==1)throw new o("invalid ACn encoding");pe=L(me),Y=fe?2:3}continue;case 1:case 2:ee.a[me]?ee.a[me]+=ye*(D()<<M):(fe--,fe===0&&(Y=Y===2?3:0));break;case 3:ee.a[me]?ee.a[me]+=ye*(D()<<M):(ee.a[me]=pe<<M,Y=0);break;case 4:ee.a[me]&&(ee.a[me]+=ye*(D()<<M))}ne++}Y===4&&(H--,H===0&&(Y=0))}for(var q=9<arguments.length&&arguments[9]!==void 0?arguments[9]:!1,F=d.P,b=x,B=0,G=0,H=0,Y=0,pe,ve=m.length,we,xe,X,ge,Ee=d.S?_===0?C===0?z:U:C===0?J:ce:O,T=0,ue=ve===1?m[0].c*m[0].l:F*d.O,ie,te;T<ue;){var ae=f?Math.min(ue-T,f):ue;for(we=0;we<ve;we++)m[we].m=0;if(H=0,ve===1){var $=m[0];for(ge=0;ge<ae;ge++)Ee($,64*(($.c+1)*(T/$.c|0)+T%$.c)),T++}else for(ge=0;ge<ae;ge++){for(we=0;we<ve;we++)for($=m[we],ie=$.h,te=$.j,xe=0;xe<te;xe++)for(X=0;X<ie;X++)Ee($,64*(($.c+1)*((T/F|0)*$.j+xe)+(T%F*$.h+X)));T++}if(G=0,($=y(w,x))&&$.f&&((0,_util.warn)("decodeScan - unexpected MCU data, current marker is: "+$.f),x=$.offset),$=$&&$.F,!$||65280>=$)throw new o("marker was not found");if(65488<=$&&65495>=$)x+=2;else break}return($=y(w,x))&&$.f&&((0,_util.warn)("decodeScan - unexpected Scan data, current marker is: "+$.f),x=$.offset),x-b}function v(w,x){for(var d=x.c,m=x.l,f=new Int16Array(64),_=0;_<m;_++)for(var E=0;E<d;E++){var C=64*((x.c+1)*_+E),M=f,D=x.G,R=x.a;if(!D)throw new o("missing required Quantization Table.");for(var A=0;64>A;A+=8){var L=R[C+A],O=R[C+A+1],z=R[C+A+2],U=R[C+A+3],J=R[C+A+4],ce=R[C+A+5],q=R[C+A+6],F=R[C+A+7];if(L*=D[A],!(O|z|U|J|ce|q|F))L=5793*L+512>>10,M[A]=L,M[A+1]=L,M[A+2]=L,M[A+3]=L,M[A+4]=L,M[A+5]=L,M[A+6]=L,M[A+7]=L;else{O*=D[A+1],z*=D[A+2],U*=D[A+3],J*=D[A+4],ce*=D[A+5],q*=D[A+6],F*=D[A+7];var b=5793*L+128>>8,B=5793*J+128>>8,G=z,H=q;J=2896*(O-F)+128>>8,F=2896*(O+F)+128>>8,U<<=4,ce<<=4,b=b+B+1>>1,B=b-B,L=3784*G+1567*H+128>>8,G=1567*G-3784*H+128>>8,H=L,J=J+ce+1>>1,ce=J-ce,F=F+U+1>>1,U=F-U,b=b+H+1>>1,H=b-H,B=B+G+1>>1,G=B-G,L=2276*J+3406*F+2048>>12,J=3406*J-2276*F+2048>>12,F=L,L=799*U+4017*ce+2048>>12,U=4017*U-799*ce+2048>>12,ce=L,M[A]=b+F,M[A+7]=b-F,M[A+1]=B+ce,M[A+6]=B-ce,M[A+2]=G+U,M[A+5]=G-U,M[A+3]=H+J,M[A+4]=H-J}}for(D=0;8>D;++D)L=M[D],O=M[D+8],z=M[D+16],U=M[D+24],J=M[D+32],ce=M[D+40],q=M[D+48],F=M[D+56],O|z|U|J|ce|q|F?(b=5793*L+2048>>12,B=5793*J+2048>>12,G=z,H=q,J=2896*(O-F)+2048>>12,F=2896*(O+F)+2048>>12,b=(b+B+1>>1)+4112,B=b-B,L=3784*G+1567*H+2048>>12,G=1567*G-3784*H+2048>>12,H=L,J=J+ce+1>>1,ce=J-ce,F=F+U+1>>1,U=F-U,b=b+H+1>>1,H=b-H,B=B+G+1>>1,G=B-G,L=2276*J+3406*F+2048>>12,J=3406*J-2276*F+2048>>12,F=L,L=799*U+4017*ce+2048>>12,U=4017*U-799*ce+2048>>12,ce=L,L=b+F,F=b-F,O=B+ce,q=B-ce,z=G+U,ce=G-U,U=H+J,J=H-J,L=16>L?0:4080<=L?255:L>>4,O=16>O?0:4080<=O?255:O>>4,z=16>z?0:4080<=z?255:z>>4,U=16>U?0:4080<=U?255:U>>4,J=16>J?0:4080<=J?255:J>>4,ce=16>ce?0:4080<=ce?255:ce>>4,q=16>q?0:4080<=q?255:q>>4,F=16>F?0:4080<=F?255:F>>4,R[C+D]=L,R[C+D+8]=O,R[C+D+16]=z,R[C+D+24]=U,R[C+D+32]=J,R[C+D+40]=ce,R[C+D+48]=q,R[C+D+56]=F):(L=5793*L+8192>>14,L=-2040>L?0:2024<=L?255:L+2056>>4,R[C+D]=L,R[C+D+8]=L,R[C+D+16]=L,R[C+D+24]=L,R[C+D+32]=L,R[C+D+40]=L,R[C+D+48]=L,R[C+D+56]=L)}return x.a}function y(w,x){var d=2<arguments.length&&arguments[2]!==void 0?arguments[2]:x,m=w.length-1;if(d=d<x?d:x,x>=m)return null;var f=w[x]<<8|w[x+1];if(65472<=f&&65534>=f)return{f:null,F:f,offset:x};for(var _=w[d]<<8|w[d+1];!(65472<=_&&65534>=_);){if(++d>=m)return null;_=w[d]<<8|w[d+1]}return{f:f.toString(16),F:_,offset:d}}var k=new Uint8Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);h.prototype={parse:function(w){function x(){var G=w[E]<<8|w[E+1];return E+=2,G}function d(){var G=x();G=E+G-2;var H=y(w,G,E);return H&&H.f&&((0,_util.warn)("readDataBlock - incorrect length, current marker is: "+H.f),G=H.offset),G=w.subarray(E,G),E+=G.length,G}function m(G){for(var H=Math.ceil(G.v/8/G.s),Y=Math.ceil(G.g/8/G.u),pe=0;pe<G.b.length;pe++){b=G.b[pe];var ve=Math.ceil(Math.ceil(G.v/8)*b.h/G.s),we=Math.ceil(Math.ceil(G.g/8)*b.j/G.u);b.a=new Int16Array(64*Y*b.j*(H*b.h+1)),b.c=ve,b.l=we}G.P=H,G.O=Y}var f=(1<arguments.length&&arguments[1]!==void 0?arguments[1]:{}).N,_=f===void 0?null:f,E=0,C=null,M=0;f=[];var D=[],R=[],A=x();if(A!==65496)throw new o("SOI not found");for(A=x();A!==65497;){switch(A){case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var L=d();A===65518&&L[0]===65&&L[1]===100&&L[2]===111&&L[3]===98&&L[4]===101&&(C={version:L[5]<<8|L[6],Y:L[7]<<8|L[8],Z:L[9]<<8|L[10],W:L[11]});break;case 65499:A=x()+E-2;for(var O;E<A;){var z=w[E++],U=new Uint16Array(64);if(z>>4)if(z>>4===1)for(L=0;64>L;L++)O=k[L],U[O]=x();else throw new o("DQT - invalid table spec");else for(L=0;64>L;L++)O=k[L],U[O]=w[E++];f[z&15]=U}break;case 65472:case 65473:case 65474:if(J)throw new o("Only single frame JPEGs supported");x();var J={};for(J.X=A===65473,J.S=A===65474,J.precision=w[E++],A=x(),J.g=_||A,J.v=x(),J.b=[],J.C={},L=w[E++],A=U=z=0;A<L;A++){O=w[E];var ce=w[E+1]>>4,q=w[E+1]&15;z<ce&&(z=ce),U<q&&(U=q),ce=J.b.push({h:ce,j:q,T:w[E+2],G:null}),J.C[O]=ce-1,E+=3}J.s=z,J.u=U,m(J);break;case 65476:for(O=x(),A=2;A<O;){for(z=w[E++],U=new Uint8Array(16),L=ce=0;16>L;L++,E++)ce+=U[L]=w[E];for(q=new Uint8Array(ce),L=0;L<ce;L++,E++)q[L]=w[E];A+=17+ce,(z>>4?D:R)[z&15]=u(U,q)}break;case 65501:x();var F=x();break;case 65498:for(L=++M===1&&!_,x(),z=w[E++],O=[],A=0;A<z;A++){U=J.C[w[E++]];var b=J.b[U];U=w[E++],b.D=R[U>>4],b.o=D[U&15],O.push(b)}A=w[E++],z=w[E++],U=w[E++];try{var B=c(w,E,J,O,F,A,z,U>>4,U&15,L);E+=B}catch(G){if(G instanceof s)return(0,_util.warn)('Attempting to re-parse JPEG image using "scanLines" parameter found in DNL marker (0xFFDC) segment.'),this.parse(w,{N:G.g});throw G}break;case 65500:E+=4;break;case 65535:w[E]!==255&&E--;break;default:if(w[E-3]===255&&192<=w[E-2]&&254>=w[E-2])E-=3;else if((L=y(w,E-2))&&L.f)(0,_util.warn)("JpegImage.parse - unexpected data, current marker is: "+L.f),E=L.offset;else throw new o("unknown marker "+A.toString(16))}A=x()}for(this.width=J.v,this.height=J.g,this.A=C,this.b=[],A=0;A<J.b.length;A++)b=J.b[A],(F=f[b.T])&&(b.G=F),this.b.push({R:v(J,b),U:b.h/J.s,V:b.j/J.u,c:b.c,l:b.l});this.i=this.b.length},L:function(w,x){var d=this.width/w,m=this.height/x,f,_,E=this.b.length,C=w*x*E,M=new Uint8ClampedArray(C),D=new Uint32Array(w);for(_=0;_<E;_++){var R=this.b[_],A=R.U*d,L=R.V*m,O=_,z=R.R,U=R.c+1<<3;for(f=0;f<w;f++)R=0|f*A,D[f]=(R&4294967288)<<3|R&7;for(A=0;A<x;A++)for(R=0|A*L,R=U*(R&4294967288)|(R&7)<<3,f=0;f<w;f++)M[O]=z[R+D[f]],O+=E}if(m=this.M)for(_=0;_<C;)for(d=R=0;R<E;R++,_++,d+=2)M[_]=(M[_]*m[d]>>8)+m[d+1];return M},w:function(){return this.A?!!this.A.W:this.i===3?this.B!==0:this.B===1},I:function(w){for(var x,d,m,f=0,_=w.length;f<_;f+=3)x=w[f],d=w[f+1],m=w[f+2],w[f]=x-179.456+1.402*m,w[f+1]=x+135.459-.344*d-.714*m,w[f+2]=x-226.816+1.772*d;return w},K:function(w){for(var x,d,m,f,_=0,E=0,C=w.length;E<C;E+=4)x=w[E],d=w[E+1],m=w[E+2],f=w[E+3],w[_++]=-122.67195406894+d*(-660635669420364e-19*d+.000437130475926232*m-54080610064599e-18*x+.00048449797120281*f-.154362151871126)+m*(-.000957964378445773*m+.000817076911346625*x-.00477271405408747*f+1.53380253221734)+x*(.000961250184130688*x-.00266257332283933*f+.48357088451265)+f*(-.000336197177618394*f+.484791561490776),w[_++]=107.268039397724+d*(219927104525741e-19*d-.000640992018297945*m+.000659397001245577*x+.000426105652938837*f-.176491792462875)+m*(-.000778269941513683*m+.00130872261408275*x+.000770482631801132*f-.151051492775562)+x*(.00126935368114843*x-.00265090189010898*f+.25802910206845)+f*(-.000318913117588328*f-.213742400323665),w[_++]=-20.810012546947+d*(-.000570115196973677*d-263409051004589e-19*m+.0020741088115012*x-.00288260236853442*f+.814272968359295)+m*(-153496057440975e-19*m-.000132689043961446*x+.000560833691242812*f-.195152027534049)+x*(.00174418132927582*x-.00255243321439347*f+.116935020465145)+f*(-.000343531996510555*f+.24165260232407);return w.subarray(0,_)},J:function(w){for(var x,d,m,f=0,_=w.length;f<_;f+=4)x=w[f],d=w[f+1],m=w[f+2],w[f]=434.456-x-1.402*m,w[f+1]=119.541-x+.344*d+.714*m,w[f+2]=481.816-x-1.772*d;return w},H:function(w){for(var x,d,m,f,_=0,E=1/255,C=0,M=w.length;C<M;C+=4)x=w[C]*E,d=w[C+1]*E,m=w[C+2]*E,f=w[C+3]*E,w[_++]=255+x*(-4.387332384609988*x+54.48615194189176*d+18.82290502165302*m+212.25662451639585*f-285.2331026137004)+d*(1.7149763477362134*d-5.6096736904047315*m-17.873870861415444*f-5.497006427196366)+m*(-2.5217340131683033*m-21.248923337353073*f+17.5119270841813)-f*(21.86122147463605*f+189.48180835922747),w[_++]=255+x*(8.841041422036149*x+60.118027045597366*d+6.871425592049007*m+31.159100130055922*f-79.2970844816548)+d*(-15.310361306967817*d+17.575251261109482*m+131.35250912493976*f-190.9453302588951)+m*(4.444339102852739*m+9.8632861493405*f-24.86741582555878)-f*(20.737325471181034*f+187.80453709719578),w[_++]=255+x*(.8842522430003296*x+8.078677503112928*d+30.89978309703729*m-.23883238689178934*f-14.183576799673286)+d*(10.49593273432072*d+63.02378494754052*m+50.606957656360734*f-112.23884253719248)+m*(.03296041114873217*m+115.60384449646641*f-193.58209356861505)-f*(22.33816807309886*f+180.12613974708367);return w.subarray(0,_)},getData:function(w,x,d){if(4<this.i)throw new o("Unsupported color mode");if(w=this.L(w,x),this.i===1&&d){d=w.length,x=new Uint8ClampedArray(3*d);for(var m=0,f=0;f<d;f++){var _=w[f];x[m++]=_,x[m++]=_,x[m++]=_}return x}if(this.i===3&&this.w())return this.I(w);if(this.i===4){if(this.w())return d?this.K(w):this.J(w);if(d)return this.H(w)}return w}},i.JpegDecoder=h})()})(),i.encodeImage=function(a,o,s,h){var u={t256:[o],t257:[s],t258:[8,8,8,8],t259:[1],t262:[2],t273:[1e3],t277:[4],t278:[s],t279:[o*s*4],t282:[1],t283:[1],t284:[1],t286:[0],t287:[0],t296:[1],t305:["Photopea (UTIF.js)"],t338:[1]};if(h)for(var c in h)u[c]=h[c];for(var v=new Uint8Array(i.encode([u])),y=new Uint8Array(a),k=new Uint8Array(1e3+o*s*4),c=0;c<v.length;c++)k[c]=v[c];for(var c=0;c<y.length;c++)k[1e3+c]=y[c];return k.buffer},i.encode=function(a){var o=new Uint8Array(2e4),s=4,h=i._binBE;o[0]=77,o[1]=77,o[3]=42;var u=8;h.writeUint(o,s,u),s+=4;for(var c=0;c<a.length;c++){var v=i._writeIFD(h,o,u,a[c]);u=v[1],c<a.length-1&&h.writeUint(o,v[0],u)}return o.slice(0,u).buffer},i.decode=function(a){i.decode._decodeG3.allow2D=null;var o=new Uint8Array(a),s=0,h=i._binBE.readASCII(o,s,2);s+=2;var u=h=="II"?i._binLE:i._binBE;u.readUshort(o,s),s+=2;var c=u.readUint(o,s);s+=4;for(var v=[];;){var y=i._readIFD(u,o,c,v,0,!1);if(c=u.readUint(o,y),c==0)break}return v},i.decodeImage=function(a,o,s){var h=new Uint8Array(a),u=i._binBE.readASCII(h,0,2);if(o.t256!=null){o.isLE=u=="II",o.width=o.t256[0],o.height=o.t257[0];var c=o.t259?o.t259[0]:1,v=o.t266?o.t266[0]:1;o.t284&&o.t284[0]==2&&r("PlanarConfiguration 2 should not be used!");var y;o.t258?y=Math.min(32,o.t258[0])*o.t258.length:y=o.t277?o.t277[0]:1,c==1&&o.t279!=null&&o.t278&&o.t262[0]==32803&&(y=Math.round(o.t279[0]*8/(o.width*o.t278[0])));var k=Math.ceil(o.width*y/8)*8,w=o.t273;w==null&&(w=o.t324);var x=o.t279;c==1&&w.length==1&&(x=[o.height*(k>>>3)]),x==null&&(x=o.t325);var d=new Uint8Array(o.height*(k>>>3)),m=0;if(o.t322!=null){for(var f=o.t322[0],_=o.t323[0],E=Math.floor((o.width+f-1)/f),C=Math.floor((o.height+_-1)/_),M=new Uint8Array(Math.ceil(f*_*y/8)|0),D=0;D<C;D++)for(var R=0;R<E;R++){for(var A=D*E+R,L=0;L<M.length;L++)M[L]=0;i.decode._decompress(o,s,h,w[A],x[A],c,M,0,v),c==6?d=M:i._copyTile(M,Math.ceil(f*y/8)|0,_,d,Math.ceil(o.width*y/8)|0,o.height,Math.ceil(R*f*y/8)|0,D*_)}m=d.length*8}else{var O=o.t278?o.t278[0]:o.height;O=Math.min(O,o.height);for(var A=0;A<w.length;A++)i.decode._decompress(o,s,h,w[A],x[A],c,d,Math.ceil(m/8)|0,v),m+=k*O;m=Math.min(m,d.length*8)}o.data=new Uint8Array(d.buffer,0,Math.ceil(m/8)|0)}},i.decode._decompress=function(a,o,s,h,u,c,v,y,k){if(c==1||u==v.length&&c!=32767)for(var w=0;w<u;w++)v[y+w]=s[h+w];else if(c==3)i.decode._decodeG3(s,h,u,v,y,a.width,k);else if(c==4)i.decode._decodeG4(s,h,u,v,y,a.width,k);else if(c==5)i.decode._decodeLZW(s,h,v,y);else if(c==6)i.decode._decodeOldJPEG(a,s,h,u,v,y);else if(c==7)i.decode._decodeNewJPEG(a,s,h,u,v,y);else if(c==8)for(var x=new Uint8Array(s.buffer,h,u),d=l.inflate(x),m=0;m<d.length;m++)v[y+m]=d[m];else c==32767?i.decode._decodeARW(a,s,h,u,v,y):c==32773?i.decode._decodePackBits(s,h,u,v,y):c==32809?i.decode._decodeThunder(s,h,u,v,y):c==34713?i.decode._decodeNikon(a,o,s,h,u,v,y):r("Unknown compression",c);var f=a.t258?Math.min(32,a.t258[0]):1,_=a.t277?a.t277[0]:1,E=f*_>>>3,C=a.t278?a.t278[0]:a.height,M=Math.ceil(f*_*a.width/8);if(f==16&&!a.isLE&&a.t33422==null)for(var D=0;D<C;D++)for(var R=y+D*M,A=1;A<M;A+=2){var L=v[R+A];v[R+A]=v[R+A-1],v[R+A-1]=L}if(a.t317&&a.t317[0]==2)for(var D=0;D<C;D++){var O=y+D*M;if(f==16)for(var w=E;w<M;w+=2){var z=(v[O+w+1]<<8|v[O+w])+(v[O+w-E+1]<<8|v[O+w-E]);v[O+w]=z&255,v[O+w+1]=z>>>8&255}else if(_==3)for(var w=3;w<M;w+=3)v[O+w]=v[O+w]+v[O+w-3]&255,v[O+w+1]=v[O+w+1]+v[O+w-2]&255,v[O+w+2]=v[O+w+2]+v[O+w-1]&255;else for(var w=E;w<M;w++)v[O+w]=v[O+w]+v[O+w-E]&255}},i.decode._ljpeg_diff=function(a,o,s){var h=i.decode._getbithuff,u,c;return u=h(a,o,s[0],s),c=h(a,o,u,0),c&1<<u-1||(c-=(1<<u)-1),c},i.decode._decodeARW=function(a,o,s,h,u,c){var v=a.t256[0],y=a.t257[0],k=a.t258[0],w=a.isLE?i._binLE:i._binBE,x=v*y==h||v*y*1.5==h;if(!x){y+=8;var d=[s,0,0,0],m=new Uint16Array(32770),f=[3857,3856,3599,3342,3085,2828,2571,2314,2057,1800,1543,1286,1029,772,771,768,514,513],Y,_,E,J,U,C=0,M=i.decode._ljpeg_diff;for(m[0]=15,E=Y=0;Y<18;Y++)for(var D=32768>>>(f[Y]>>>8),_=0;_<D;_++)m[++E]=f[Y];for(J=v;J--;)for(U=0;U<y+1;U+=2)if(U==y&&(U=1),C+=M(o,d,m),U<y){var R=C&4095;i.decode._putsF(u,(U*v+J)*k,R<<16-k)}return}if(v*y*1.5==h){for(var Y=0;Y<h;Y+=3){var A=o[s+Y+0],L=o[s+Y+1],O=o[s+Y+2];u[c+Y]=L<<4|A>>>4,u[c+Y+1]=A<<4|O>>>4,u[c+Y+2]=O<<4|L>>>4}return}var z=new Uint16Array(16),U,J,ce,q,F,b,B,G,H,Y,pe,ve=new Uint8Array(v+1);for(U=0;U<y;U++){for(var we=0;we<v;we++)ve[we]=o[s++];for(pe=0,J=0;J<v-30;pe+=16){for(q=2047&(ce=w.readUint(ve,pe)),F=2047&ce>>>11,b=15&ce>>>22,B=15&ce>>>26,G=0;G<4&&128<<G<=q-F;G++);for(H=30,Y=0;Y<16;Y++)Y==b?z[Y]=q:Y==B?z[Y]=F:(z[Y]=((w.readUshort(ve,pe+(H>>3))>>>(H&7)&127)<<G)+F,z[Y]>2047&&(z[Y]=2047),H+=7);for(Y=0;Y<16;Y++,J+=2){var R=z[Y]<<1;i.decode._putsF(u,(U*v+J)*k,R<<16-k)}J-=J&1?1:31}}},i.decode._decodeNikon=function(a,o,s,h,u,c,v){var y=[[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,5,4,3,6,2,7,1,0,8,9,11,10,12],[0,0,1,5,1,1,1,1,1,1,2,0,0,0,0,0,0,57,90,56,39,22,5,4,3,2,1,0,11,12,12],[0,0,1,4,2,3,1,2,0,0,0,0,0,0,0,0,0,5,4,6,3,7,2,8,1,9,0,10,11,12],[0,0,1,4,3,1,1,1,1,1,2,0,0,0,0,0,0,5,6,4,7,8,3,9,2,1,0,10,11,12,13,14],[0,0,1,5,1,1,1,1,1,1,1,2,0,0,0,0,0,8,92,75,58,41,7,6,5,4,3,2,1,0,13,14],[0,0,1,4,2,2,3,1,2,0,0,0,0,0,0,0,0,7,6,8,5,9,4,10,3,11,12,2,0,1,13,14]],k=a.t256[0],w=a.t257[0],x=a.t258[0],d=0,m=0,f=i.decode._make_decoder,_=i.decode._getbithuff,E=o[0].exifIFD.makerNote,C=E.t150?E.t150:E.t140,M=0,D=C[M++],R=C[M++];(D==73||R==88)&&(M+=2110),D==70&&(d=2),x==14&&(d+=3);for(var A=[[0,0],[0,0]],L=a.isLE?i._binLE:i._binBE,ce=0;ce<2;ce++)for(var O=0;O<2;O++)A[ce][O]=L.readShort(C,M),M+=2;var z=1<<x&32767,U=0,J=L.readShort(C,M);M+=2,J>1&&(U=Math.floor(z/(J-1))),D==68&&R==32&&U>0&&(m=L.readShort(C,562));var ce,q,F,b,B,G,H=[0,0],Y=f(y[d]),pe=[h,0,0,0];for(q=0;q<w;q++)for(m&&q==m&&(Y=f(y[d+1])),F=0;F<k;F++){ce=_(s,pe,Y[0],Y),b=ce&15,B=ce>>>4,G=(_(s,pe,b-B,0)<<1)+1<<B>>>1,G&1<<b-1||(G-=(1<<b)-(B==0?1:0)),F<2?H[F]=A[q&1][F]+=G:H[F&1]+=G;var ve=Math.min(Math.max(H[F&1],0),(1<<x)-1),we=(q*k+F)*x;i.decode._putsF(c,we,ve<<16-x)}},i.decode._putsF=function(a,o,s){s=s<<8-(o&7);var h=o>>>3;a[h]|=s>>>16,a[h+1]|=s>>>8,a[h+2]|=s},i.decode._getbithuff=function(a,o,s,h){var u=0;i.decode._get_byte;var c,v=o[0],y=o[1],k=o[2],w=o[3];if(s==0||k<0)return 0;for(;!w&&k<s&&(c=a[v++])!=-1&&!(w=u);)y=(y<<8)+c,k+=8;if(c=y<<32-k>>>32-s,h?(k-=h[c+1]>>>8,c=h[c+1]&255):k-=s,k<0)throw"e";return o[0]=v,o[1]=y,o[2]=k,o[3]=w,c},i.decode._make_decoder=function(a){var o,s,h,u,c,v=[];for(o=16;o!=0&&!a[o];o--);var y=17;for(v[0]=o,h=s=1;s<=o;s++)for(u=0;u<a[s];u++,++y)for(c=0;c<1<<o-s;c++)h<=1<<o&&(v[h++]=s<<8|a[y]);return v},i.decode._decodeNewJPEG=function(a,o,s,h,u,c){var v=a.t347,y=v?v.length:0,k=new Uint8Array(y+h);if(v){for(var w=216,x=217,d=0,m=0;m<y-1&&!(v[m]==255&&v[m+1]==x);m++)k[d++]=v[m];var f=o[s],_=o[s+1];(f!=255||_!=w)&&(k[d++]=f,k[d++]=_);for(var m=2;m<h;m++)k[d++]=o[s+m]}else for(var m=0;m<h;m++)k[m]=o[s+m];if(a.t262[0]==32803||a.t262[0]==34892){var E=a.t258[0],C=i.LosslessJpegDecode(k),M=C.length;if(E==16)if(a.isLE)for(var m=0;m<M;m++)u[c+(m<<1)]=C[m]&255,u[c+(m<<1)+1]=C[m]>>>8;else for(var m=0;m<M;m++)u[c+(m<<1)]=C[m]>>>8,u[c+(m<<1)+1]=C[m]&255;else if(E==14||E==12)for(var D=16-E,m=0;m<M;m++)i.decode._putsF(u,m*E,C[m]<<D);else throw new Error("unsupported bit depth "+E)}else{var R=new i.JpegDecoder;R.parse(k);for(var A=R.getData(R.width,R.height),m=0;m<A.length;m++)u[c+m]=A[m]}a.t262[0]==6&&(a.t262[0]=2)},i.decode._decodeOldJPEGInit=function(a,o,s,h){var u=216,c=219,v=196,y=221,k=192,w=218,x=0,d=0,m,f,_=!1,E,C,M,D=a.t513,R=D?D[0]:0,A=a.t514,L=A?A[0]:0,O=a.t324||a.t273||D,z=a.t530,U=0,J=0,ce=a.t277?a.t277[0]:1,q=a.t515;if(O&&(d=O[0],_=O.length>1),!_){if(o[s]==255&&o[s+1]==u)return{jpegOffset:s};if(D!=null&&(o[s+R]==255&&o[s+R+1]==u?x=s+R:r("JPEGInterchangeFormat does not point to SOI"),A==null?r("JPEGInterchangeFormatLength field is missing"):(R>=d||R+L<=d)&&r("JPEGInterchangeFormatLength field value is invalid"),x!=null))return{jpegOffset:x}}if(z!=null&&(U=z[0],J=z[1]),D!=null&&A!=null)if(L>=2&&R+L<=d){for(o[s+R+L-2]==255&&o[s+R+L-1]==u?m=new Uint8Array(L-2):m=new Uint8Array(L),E=0;E<m.length;E++)m[E]=o[s+R+E];r("Incorrect JPEG interchange format: using JPEGInterchangeFormat offset to derive tables")}else r("JPEGInterchangeFormat+JPEGInterchangeFormatLength > offset to first strip or tile");if(m==null){var F=0,b=[];b[F++]=255,b[F++]=u;var B=a.t519;if(B==null)throw new Error("JPEGQTables tag is missing");for(E=0;E<B.length;E++)for(b[F++]=255,b[F++]=c,b[F++]=0,b[F++]=67,b[F++]=E,C=0;C<64;C++)b[F++]=o[s+B[E]+C];for(M=0;M<2;M++){var G=a[M==0?"t520":"t521"];if(G==null)throw new Error((M==0?"JPEGDCTables":"JPEGACTables")+" tag is missing");for(E=0;E<G.length;E++){b[F++]=255,b[F++]=v;var H=19;for(C=0;C<16;C++)H+=o[s+G[E]+C];for(b[F++]=H>>>8,b[F++]=H&255,b[F++]=E|M<<4,C=0;C<16;C++)b[F++]=o[s+G[E]+C];for(C=0;C<H;C++)b[F++]=o[s+G[E]+16+C]}}if(b[F++]=255,b[F++]=k,b[F++]=0,b[F++]=8+3*ce,b[F++]=8,b[F++]=a.height>>>8&255,b[F++]=a.height&255,b[F++]=a.width>>>8&255,b[F++]=a.width&255,b[F++]=ce,ce==1)b[F++]=1,b[F++]=17,b[F++]=0;else for(E=0;E<3;E++)b[F++]=E+1,b[F++]=E!=0?17:(U&15)<<4|J&15,b[F++]=E;q!=null&&q[0]!=0&&(b[F++]=255,b[F++]=y,b[F++]=0,b[F++]=4,b[F++]=q[0]>>>8&255,b[F++]=q[0]&255),m=new Uint8Array(b)}var Y=-1;for(E=0;E<m.length-1;){if(m[E]==255&&m[E+1]==k){Y=E;break}E++}if(Y==-1){var pe=new Uint8Array(m.length+10+3*ce);pe.set(m);var ve=m.length;if(Y=m.length,m=pe,m[ve++]=255,m[ve++]=k,m[ve++]=0,m[ve++]=8+3*ce,m[ve++]=8,m[ve++]=a.height>>>8&255,m[ve++]=a.height&255,m[ve++]=a.width>>>8&255,m[ve++]=a.width&255,m[ve++]=ce,ce==1)m[ve++]=1,m[ve++]=17,m[ve++]=0;else for(E=0;E<3;E++)m[ve++]=E+1,m[ve++]=E!=0?17:(U&15)<<4|J&15,m[ve++]=E}if(o[d]==255&&o[d+1]==w){var we=o[d+2]<<8|o[d+3];for(f=new Uint8Array(we+2),f[0]=o[d],f[1]=o[d+1],f[2]=o[d+2],f[3]=o[d+3],E=0;E<we-2;E++)f[E+4]=o[d+E+4]}else{f=new Uint8Array(8+2*ce);var xe=0;if(f[xe++]=255,f[xe++]=w,f[xe++]=0,f[xe++]=6+2*ce,f[xe++]=ce,ce==1)f[xe++]=1,f[xe++]=0;else for(E=0;E<3;E++)f[xe++]=E+1,f[xe++]=E<<4|E;f[xe++]=0,f[xe++]=63,f[xe++]=0}return{jpegOffset:s,tables:m,sosMarker:f,sofPosition:Y}},i.decode._decodeOldJPEG=function(a,o,s,h,u,c){var v,y,k,w,x,d=i.decode._decodeOldJPEGInit(a,o,s,h);if(d.jpegOffset!=null)for(y=s+h-d.jpegOffset,w=new Uint8Array(y),v=0;v<y;v++)w[v]=o[d.jpegOffset+v];else{for(k=d.tables.length,w=new Uint8Array(k+d.sosMarker.length+h+2),w.set(d.tables),x=k,w[d.sofPosition+5]=a.height>>>8&255,w[d.sofPosition+6]=a.height&255,w[d.sofPosition+7]=a.width>>>8&255,w[d.sofPosition+8]=a.width&255,(o[s]!=255||o[s+1]!=SOS)&&(w.set(d.sosMarker,x),x+=sosMarker.length),v=0;v<h;v++)w[x++]=o[s+v];w[x++]=255,w[x++]=EOI}var m=new i.JpegDecoder;m.parse(w);for(var f=m.getData(m.width,m.height),v=0;v<f.length;v++)u[c+v]=f[v];a.t262&&a.t262[0]==6&&(a.t262[0]=2)},i.decode._decodePackBits=function(a,o,s,h,u){for(var c=new Int8Array(a.buffer),v=new Int8Array(h.buffer),y=o+s;o<y;){var k=c[o];if(o++,k>=0&&k<128)for(var w=0;w<k+1;w++)v[u]=c[o],u++,o++;if(k>=-127&&k<0){for(var w=0;w<-k+1;w++)v[u]=c[o],u++;o++}}},i.decode._decodeThunder=function(a,o,s,h,u){for(var c=[0,1,0,-1],v=[0,1,2,3,0,-3,-2,-1],y=o+s,k=u*2,w=0;o<y;){var x=a[o],d=x>>>6,m=x&63;if(o++,d==3&&(w=m&15,h[k>>>1]|=w<<4*(1-k&1),k++),d==0)for(var f=0;f<m;f++)h[k>>>1]|=w<<4*(1-k&1),k++;if(d==2)for(var f=0;f<2;f++){var _=m>>>3*(1-f)&7;_!=4&&(w+=v[_],h[k>>>1]|=w<<4*(1-k&1),k++)}if(d==1)for(var f=0;f<3;f++){var _=m>>>2*(2-f)&3;_!=2&&(w+=c[_],h[k>>>1]|=w<<4*(1-k&1),k++)}}},i.decode._dmap={1:0,"011":1,"000011":2,"0000011":3,"010":-1,"000010":-2,"0000010":-3},i.decode._lens=function(){var a=function(k,w,x,d){for(var m=0;m<w.length;m++)k[w[m]]=x+m*d},o="00110101,000111,0111,1000,1011,1100,1110,1111,10011,10100,00111,01000,001000,000011,110100,110101,101010,101011,0100111,0001100,0001000,0010111,0000011,0000100,0101000,0101011,0010011,0100100,0011000,00000010,00000011,00011010,00011011,00010010,00010011,00010100,00010101,00010110,00010111,00101000,00101001,00101010,00101011,00101100,00101101,00000100,00000101,00001010,00001011,01010010,01010011,01010100,01010101,00100100,00100101,01011000,01011001,01011010,01011011,01001010,01001011,00110010,00110011,00110100",s="0000110111,010,11,10,011,0011,0010,00011,000101,000100,0000100,0000101,0000111,00000100,00000111,000011000,0000010111,0000011000,0000001000,00001100111,00001101000,00001101100,00000110111,00000101000,00000010111,00000011000,000011001010,000011001011,000011001100,000011001101,000001101000,000001101001,000001101010,000001101011,000011010010,000011010011,000011010100,000011010101,000011010110,000011010111,000001101100,000001101101,000011011010,000011011011,000001010100,000001010101,000001010110,000001010111,000001100100,000001100101,000001010010,000001010011,000000100100,000000110111,000000111000,000000100111,000000101000,000001011000,000001011001,000000101011,000000101100,000001011010,000001100110,000001100111",h="11011,10010,010111,0110111,00110110,00110111,01100100,01100101,01101000,01100111,011001100,011001101,011010010,011010011,011010100,011010101,011010110,011010111,011011000,011011001,011011010,011011011,010011000,010011001,010011010,011000,010011011",u="0000001111,000011001000,000011001001,000001011011,000000110011,000000110100,000000110101,0000001101100,0000001101101,0000001001010,0000001001011,0000001001100,0000001001101,0000001110010,0000001110011,0000001110100,0000001110101,0000001110110,0000001110111,0000001010010,0000001010011,0000001010100,0000001010101,0000001011010,0000001011011,0000001100100,0000001100101",c="00000001000,00000001100,00000001101,000000010010,000000010011,000000010100,000000010101,000000010110,000000010111,000000011100,000000011101,000000011110,000000011111";o=o.split(","),s=s.split(","),h=h.split(","),u=u.split(","),c=c.split(",");var v={},y={};return a(v,o,0,1),a(v,h,64,64),a(v,c,1792,64),a(y,s,0,1),a(y,u,64,64),a(y,c,1792,64),[v,y]}(),i.decode._decodeG4=function(a,o,s,h,u,c,v){for(var y=i.decode,k=o<<3,w=0,x="",d=[],m=[],f=0;f<c;f++)m.push(0);m=y._makeDiff(m);for(var _=0,E=0,C=0,M=0,D=0,R=0,A="",L=0,O=Math.ceil(c/8)*8;k>>>3<o+s;){C=y._findDiff(m,_+(_==0?0:1),1-D),M=y._findDiff(m,C,D);var z=0;if(v==1&&(z=a[k>>>3]>>>7-(k&7)&1),v==2&&(z=a[k>>>3]>>>(k&7)&1),k++,x+=z,A=="H"){if(y._lens[D][x]!=null){var U=y._lens[D][x];x="",w+=U,U<64&&(y._addNtimes(d,w,D),_+=w,D=1-D,w=0,L--,L==0&&(A=""))}}else x=="0001"&&(x="",y._addNtimes(d,M-_,D),_=M),x=="001"&&(x="",A="H",L=2),y._dmap[x]!=null&&(E=C+y._dmap[x],y._addNtimes(d,E-_,D),_=E,x="",D=1-D);d.length==c&&A==""&&(y._writeBits(d,h,u*8+R*O),D=0,R++,_=0,m=y._makeDiff(d),d=[])}},i.decode._findDiff=function(a,o,s){for(var h=0;h<a.length;h+=2)if(a[h]>=o&&a[h+1]==s)return a[h]},i.decode._makeDiff=function(a){var o=[];a[0]==1&&o.push(0,1);for(var s=1;s<a.length;s++)a[s-1]!=a[s]&&o.push(s,a[s]);return o.push(a.length,0,a.length,1),o},i.decode._decodeG3=function(a,o,s,h,u,c,v){for(var y=i.decode,k=o<<3,w=0,x="",d=[],m=[],f=0;f<c;f++)d.push(0);for(var _=0,E=0,C=0,M=0,D=0,R=-1,A="",L=0,O=!1,z=Math.ceil(c/8)*8;k>>>3<o+s;){C=y._findDiff(m,_+(_==0?0:1),1-D),M=y._findDiff(m,C,D);var U=0;if(v==1&&(U=a[k>>>3]>>>7-(k&7)&1),v==2&&(U=a[k>>>3]>>>(k&7)&1),k++,x+=U,O){if(y._lens[D][x]!=null){var J=y._lens[D][x];x="",w+=J,J<64&&(y._addNtimes(d,w,D),D=1-D,w=0)}}else if(A=="H"){if(y._lens[D][x]!=null){var J=y._lens[D][x];x="",w+=J,J<64&&(y._addNtimes(d,w,D),_+=w,D=1-D,w=0,L--,L==0&&(A=""))}}else x=="0001"&&(x="",y._addNtimes(d,M-_,D),_=M),x=="001"&&(x="",A="H",L=2),y._dmap[x]!=null&&(E=C+y._dmap[x],y._addNtimes(d,E-_,D),_=E,x="",D=1-D);x.endsWith("000000000001")&&(R>=0&&y._writeBits(d,h,u*8+R*z),v==1&&(O=(a[k>>>3]>>>7-(k&7)&1)==1),v==2&&(O=(a[k>>>3]>>>(k&7)&1)==1),k++,y._decodeG3.allow2D==null&&(y._decodeG3.allow2D=O),y._decodeG3.allow2D||(O=!0,k--),x="",D=0,R++,_=0,m=y._makeDiff(d),d=[])}d.length==c&&y._writeBits(d,h,u*8+R*z)},i.decode._addNtimes=function(a,o,s){for(var h=0;h<o;h++)a.push(s)},i.decode._writeBits=function(a,o,s){for(var h=0;h<a.length;h++)o[s+h>>>3]|=a[h]<<7-(s+h&7)},i.decode._decodeLZW=function(a,o,s,h){if(i.decode._lzwTab==null){for(var u=new Uint32Array(65535),c=new Uint16Array(65535),x=new Uint8Array(2e6),v=0;v<256;v++)x[v<<2]=v,u[v]=v<<2,c[v]=1;i.decode._lzwTab=[u,c,x]}for(var y=i.decode._copyData,k=i.decode._lzwTab[0],w=i.decode._lzwTab[1],x=i.decode._lzwTab[2],d=258,m=1032,f=9,_=o<<3,E=256,C=257,M=0,D=0,R=0;M=a[_>>>3]<<16|a[_+8>>>3]<<8|a[_+16>>>3],D=M>>24-(_&7)-f&(1<<f)-1,_+=f,D!=C;){if(D==E){if(f=9,d=258,m=1032,M=a[_>>>3]<<16|a[_+8>>>3]<<8|a[_+16>>>3],D=M>>24-(_&7)-f&(1<<f)-1,_+=f,D==C)break;s[h]=D,h++}else if(D<d){var A=k[D],L=w[D];if(y(x,A,s,h,L),h+=L,R>=d)k[d]=m,x[k[d]]=A[0],w[d]=1,m=m+1+3&-4,d++;else{k[d]=m;var O=k[R],z=w[R];y(x,O,x,m,z),x[m+z]=x[A],z++,w[d]=z,d++,m=m+z+3&-4}d+1==1<<f&&f++}else{if(R>=d)k[d]=m,w[d]=0,d++;else{k[d]=m;var O=k[R],z=w[R];y(x,O,x,m,z),x[m+z]=x[m],z++,w[d]=z,d++,y(x,m,s,h,z),h+=z,m=m+z+3&-4}d+1==1<<f&&f++}R=D}},i.decode._copyData=function(a,o,s,h,u){for(var c=0;c<u;c+=4)s[h+c]=a[o+c],s[h+c+1]=a[o+c+1],s[h+c+2]=a[o+c+2],s[h+c+3]=a[o+c+3]},i.tags={},i.ttypes={256:3,257:3,258:3,259:3,262:3,273:4,274:3,277:3,278:4,279:4,282:5,283:5,284:3,286:5,287:5,296:3,305:2,306:2,338:3,513:4,514:4,34665:4},i._readIFD=function(a,o,s,h,u,c){var v=a.readUshort(o,s);s+=2;var y={};h.push(y),c&&r("   ".repeat(u),h.length-1,">>>----------------");for(var k=0;k<v;k++){var w=a.readUshort(o,s);s+=2;var x=a.readUshort(o,s);s+=2;var d=a.readUint(o,s);s+=4;var m=a.readUint(o,s);s+=4;var f=[];if((x==1||x==7)&&(f=new Uint8Array(o.buffer,d<5?s-4:m,d)),x==2){var _=d<5?s-4:m,E=o[_];E<128?f.push(a.readASCII(o,_,d-1)):f=new Uint8Array(o.buffer,_,d-1)}if(x==3)for(var C=0;C<d;C++)f.push(a.readUshort(o,(d<3?s-4:m)+2*C));if(x==4)for(var C=0;C<d;C++)f.push(a.readUint(o,(d<2?s-4:m)+4*C));if(x==5)for(var C=0;C<d;C++)f.push(a.readUint(o,m+C*8)/a.readUint(o,m+C*8+4));if(x==8)for(var C=0;C<d;C++)f.push(a.readShort(o,(d<3?s-4:m)+2*C));if(x==9)for(var C=0;C<d;C++)f.push(a.readInt(o,(d<2?s-4:m)+4*C));if(x==10)for(var C=0;C<d;C++)f.push(a.readInt(o,m+C*8)/a.readInt(o,m+C*8+4));if(x==11)for(var C=0;C<d;C++)f.push(a.readFloat(o,m+C*4));if(x==12)for(var C=0;C<d;C++)f.push(a.readDouble(o,m+C*8));if(y["t"+w]=f,d!=0&&f.length==0&&r("unknown TIFF tag type: ",x,"num:",d),c&&r("   ".repeat(u),w,x,i.tags[w],f),!(w==330&&y.t272&&y.t272[0]=="DSLR-A100")){if(w==330||w==34665||w==50740&&a.readUshort(o,a.readUint(f,0))<300){for(var M=w==50740?[a.readUint(f,0)]:f,D=[],C=0;C<M.length;C++)i._readIFD(a,o,M[C],D,u+1,c);w==330&&(y.subIFD=D),w==34665&&(y.exifIFD=D[0]),w==50740&&(y.dngPrvt=D[0])}}if(w==37500){var R=f;if(a.readASCII(R,0,5)=="Nikon")y.makerNote=i.decode(R.slice(10).buffer)[0];else if(a.readUshort(o,m)<300){var A=[];i._readIFD(a,o,m,A,u+1,c),y.makerNote=A[0]}}}return c&&r("   ".repeat(u),"<<<---------------"),s},i._writeIFD=function(a,o,s,h){var u=Object.keys(h);a.writeUshort(o,s,u.length),s+=2;for(var c=s+u.length*12+4,v=0;v<u.length;v++){var y=u[v],k=parseInt(y.slice(1)),w=i.ttypes[k];if(w==null)throw new Error("unknown type of tag: "+k);var x=h[y];w==2&&(x=x[0]+"\0");var d=x.length;a.writeUshort(o,s,k),s+=2,a.writeUshort(o,s,w),s+=2,a.writeUint(o,s,d),s+=4;var m=[-1,1,1,2,4,8,0,0,0,0,0,0,8][w]*d,f=s;if(m>4&&(a.writeUint(o,s,c),f=c),w==2&&a.writeASCII(o,f,x),w==3)for(var _=0;_<d;_++)a.writeUshort(o,f+2*_,x[_]);if(w==4)for(var _=0;_<d;_++)a.writeUint(o,f+4*_,x[_]);if(w==5)for(var _=0;_<d;_++)a.writeUint(o,f+8*_,Math.round(x[_]*1e4)),a.writeUint(o,f+8*_+4,1e4);if(w==12)for(var _=0;_<d;_++)a.writeDouble(o,f+8*_,x[_]);m>4&&(m+=m&1,c+=m),s+=4}return[s,c]},i.toRGBA8=function(a){var o=a.width,s=a.height,h=o*s,u=h*4,c=a.data,v=new Uint8Array(h*4),y=a.t262?a.t262[0]:2,k=a.t258?Math.min(32,a.t258[0]):1;if(y==0)for(var w=Math.ceil(k*o/8),x=0;x<s;x++){var d=x*w,m=x*o;if(k==1)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+(f>>3)]>>7-(f&7)&1;v[_]=v[_+1]=v[_+2]=(1-E)*255,v[_+3]=255}if(k==4)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+(f>>1)]>>4-4*(f&1)&15;v[_]=v[_+1]=v[_+2]=(15-E)*17,v[_+3]=255}if(k==8)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+f];v[_]=v[_+1]=v[_+2]=255-E,v[_+3]=255}}else if(y==1)for(var w=Math.ceil(k*o/8),x=0;x<s;x++){var d=x*w,m=x*o;if(k==1)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+(f>>3)]>>7-(f&7)&1;v[_]=v[_+1]=v[_+2]=E*255,v[_+3]=255}if(k==2)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+(f>>2)]>>6-2*(f&3)&3;v[_]=v[_+1]=v[_+2]=E*85,v[_+3]=255}if(k==8)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+f];v[_]=v[_+1]=v[_+2]=E,v[_+3]=255}if(k==16)for(var f=0;f<o;f++){var _=m+f<<2,E=c[d+(2*f+1)];v[_]=v[_+1]=v[_+2]=Math.min(255,E),v[_+3]=255}}else if(y==2){var C=a.t258?a.t258.length:3;if(k==8){if(C==4)for(var f=0;f<u;f++)v[f]=c[f];if(C==3)for(var f=0;f<h;f++){var _=f<<2,M=f*3;v[_]=c[M],v[_+1]=c[M+1],v[_+2]=c[M+2],v[_+3]=255}}else{if(C==4)for(var f=0;f<h;f++){var _=f<<2,M=f*8+1;v[_]=c[M],v[_+1]=c[M+2],v[_+2]=c[M+4],v[_+3]=c[M+6]}if(C==3)for(var f=0;f<h;f++){var _=f<<2,M=f*6+1;v[_]=c[M],v[_+1]=c[M+2],v[_+2]=c[M+4],v[_+3]=255}}}else if(y==3)for(var D=a.t320,f=0;f<h;f++){var _=f<<2,R=c[f];v[_]=D[R]>>8,v[_+1]=D[256+R]>>8,v[_+2]=D[512+R]>>8,v[_+3]=255}else if(y==5)for(var C=a.t258?a.t258.length:4,A=C>4?1:0,f=0;f<h;f++){var _=f<<2,L=f*C,O=255-c[L],z=255-c[L+1],U=255-c[L+2],J=(255-c[L+3])*(1/255);v[_]=~~(O*J+.5),v[_+1]=~~(z*J+.5),v[_+2]=~~(U*J+.5),v[_+3]=255*(1-A)+c[L+4]*A}else r("Unknown Photometric interpretation: "+y);return v},i.replaceIMG=function(a){a==null&&(a=document.getElementsByTagName("img"));for(var o=["tif","tiff","dng","cr2","nef"],s=0;s<a.length;s++){var h=a[s],u=h.getAttribute("src");if(u!=null){var c=u.split(".").pop().toLowerCase();if(o.indexOf(c)!=-1){var v=new XMLHttpRequest;i._xhrs.push(v),i._imgs.push(h),v.open("GET",u),v.responseType="arraybuffer",v.onload=i._imgLoaded,v.send()}}}},i._xhrs=[],i._imgs=[],i._imgLoaded=function(a){var o=a.target.response,s=i.decode(o),h=s,u=0,c=h[0];s[0].subIFD&&(h=h.concat(s[0].subIFD));for(var v=0;v<h.length;v++){var m=h[v];if(!(m.t258==null||m.t258.length<3)){var y=m.t256*m.t257;y>u&&(u=y,c=m)}}i.decodeImage(o,c,s);var k=i.toRGBA8(c),w=c.width,x=c.height,d=i._xhrs.indexOf(a.target),m=i._imgs[d];i._xhrs.splice(d,1),i._imgs.splice(d,1);var f=document.createElement("canvas");f.width=w,f.height=x;for(var _=f.getContext("2d"),E=_.createImageData(w,x),v=0;v<k.length;v++)E.data[v]=k[v];_.putImageData(E,0,0),m.setAttribute("src",f.toDataURL())},i._binBE={nextZero:function(a,o){for(;a[o]!=0;)o++;return o},readUshort:function(a,o){return a[o]<<8|a[o+1]},readShort:function(a,o){var s=i._binBE.ui8;return s[0]=a[o+1],s[1]=a[o+0],i._binBE.i16[0]},readInt:function(a,o){var s=i._binBE.ui8;return s[0]=a[o+3],s[1]=a[o+2],s[2]=a[o+1],s[3]=a[o+0],i._binBE.i32[0]},readUint:function(a,o){var s=i._binBE.ui8;return s[0]=a[o+3],s[1]=a[o+2],s[2]=a[o+1],s[3]=a[o+0],i._binBE.ui32[0]},readASCII:function(a,o,s){for(var h="",u=0;u<s;u++)h+=String.fromCharCode(a[o+u]);return h},readFloat:function(a,o){for(var s=i._binBE.ui8,h=0;h<4;h++)s[h]=a[o+3-h];return i._binBE.fl32[0]},readDouble:function(a,o){for(var s=i._binBE.ui8,h=0;h<8;h++)s[h]=a[o+7-h];return i._binBE.fl64[0]},writeUshort:function(a,o,s){a[o]=s>>8&255,a[o+1]=s&255},writeUint:function(a,o,s){a[o]=s>>24&255,a[o+1]=s>>16&255,a[o+2]=s>>8&255,a[o+3]=s>>0&255},writeASCII:function(a,o,s){for(var h=0;h<s.length;h++)a[o+h]=s.charCodeAt(h)},writeDouble:function(a,o,s){i._binBE.fl64[0]=s;for(var h=0;h<8;h++)a[o+h]=i._binBE.ui8[7-h]}},i._binBE.ui8=new Uint8Array(8),i._binBE.i16=new Int16Array(i._binBE.ui8.buffer),i._binBE.i32=new Int32Array(i._binBE.ui8.buffer),i._binBE.ui32=new Uint32Array(i._binBE.ui8.buffer),i._binBE.fl32=new Float32Array(i._binBE.ui8.buffer),i._binBE.fl64=new Float64Array(i._binBE.ui8.buffer),i._binLE={nextZero:i._binBE.nextZero,readUshort:function(a,o){return a[o+1]<<8|a[o]},readShort:function(a,o){var s=i._binBE.ui8;return s[0]=a[o+0],s[1]=a[o+1],i._binBE.i16[0]},readInt:function(a,o){var s=i._binBE.ui8;return s[0]=a[o+0],s[1]=a[o+1],s[2]=a[o+2],s[3]=a[o+3],i._binBE.i32[0]},readUint:function(a,o){var s=i._binBE.ui8;return s[0]=a[o+0],s[1]=a[o+1],s[2]=a[o+2],s[3]=a[o+3],i._binBE.ui32[0]},readASCII:i._binBE.readASCII,readFloat:function(a,o){for(var s=i._binBE.ui8,h=0;h<4;h++)s[h]=a[o+h];return i._binBE.fl32[0]},readDouble:function(a,o){for(var s=i._binBE.ui8,h=0;h<8;h++)s[h]=a[o+h];return i._binBE.fl64[0]}},i._copyTile=function(a,o,s,h,u,c,v,y){for(var k=Math.min(o,u-v),w=Math.min(s,c-y),x=0;x<w;x++)for(var d=(y+x)*u+v,m=x*o,f=0;f<k;f++)h[d+f]=a[m+f]},i.LosslessJpegDecode=function(){function a(u){this.w=u,this.N=0,this._=0,this.G=0}a.prototype={t:function(u){this.N=Math.max(0,Math.min(this.w.length,u))},i:function(){return this.w[this.N++]},l:function(){var u=this.N;return this.N+=2,this.w[u]<<8|this.w[u+1]},J:function(){return this._==0&&(this.G=this.w[this.N],this.N+=1+(this.G+1>>>8),this._=8),this.G>>>--this._&1},Z:function(u){var c=this._,v=this.G,y=Math.min(c,u);u-=y,c-=y;for(var k=v>>>c&(1<<y)-1;u>0;)v=this.w[this.N],this.N+=1+(v+1>>>8),y=Math.min(8,u),u-=y,c=8-y,k<<=y,k|=v>>>c&(1<<y)-1;return this._=c,this.G=v,k}};var o={};o.X=function(){return[0,0,-1]},o.s=function(u,c,v){u[o.Y(u,0,v)+2]=c},o.Y=function(u,c,v){if(u[c+2]!=-1)return 0;if(v==0)return c;for(var y=0;y<2;y++){u[c+y]==0&&(u[c+y]=u.length,u.push(0),u.push(0),u.push(-1));var k=o.Y(u,u[c+y],v-1);if(k!=0)return k}return 0},o.B=function(u,c){for(var v=0,y=0,k=0,w=c._,x=c.G,d=c.N;;)if(w==0&&(x=c.w[d],d+=1+(x+1>>>8),w=8),k=x>>>--w&1,v=u[v+k],y=u[v+2],y!=-1)return c._=w,c.G=x,c.N=d,y;return-1};function s(u){this.z=new a(u),this.D(this.z)}s.prototype={$:function(u,c){this.Q=u.i(),this.F=u.l(),this.o=u.l();var v=this.O=u.i();this.L=[];for(var y=0;y<v;y++){var k=u.i();u.i(),u.i(),this.L[k]=y}u.t(u.N+c-(6+v*3))},e:function(){var u=0,c=this.z.i();this.H==null&&(this.H={});for(var v=this.H[c]=o.X(),y=[],k=0;k<16;k++)y[k]=this.z.i(),u+=y[k];for(var k=0;k<16;k++)for(var w=0;w<y[k];w++)o.s(v,this.z.i(),k+1);return u+17},W:function(u){for(;u>0;)u-=this.e()},p:function(u,c){var v=u.i();this.U||(this.U=[]);for(var y=0;y<v;y++){var k=u.i(),w=u.i();this.U[this.L[k]]=this.H[w>>>4]}this.g=u.i(),u.t(u.N+c-(2+v*2))},D:function(u){var c=!1,v=u.l();if(v===s.q)do{var v=u.l(),y=u.l()-2;switch(v){case s.m:this.$(u,y);break;case s.K:this.W(y);break;case s.V:this.p(u,y),c=!0;break;default:u.t(u.N+y);break}}while(!c)},I:function(u,c){var v=o.B(c,u);if(v==16)return-32768;var y=u.Z(v);return y&1<<v-1||(y-=(1<<v)-1),y},B:function(u,c){for(var v=this.z,y=this.O,k=this.F,w=this.I,x=this.g,d=this.o*y,m=this.U,f=0;f<y;f++)u[f]=w(v,m[f])+(1<<this.Q-1);for(var _=y;_<d;_+=y)for(var f=0;f<y;f++)u[_+f]=w(v,m[f])+u[_+f-y];for(var E=c,C=1;C<k;C++){for(var f=0;f<y;f++)u[E+f]=w(v,m[f])+u[E+f-c];for(var _=y;_<d;_+=y)for(var f=0;f<y;f++){var M=E+_+f,D=u[M-y];x==6&&(D=u[M-c]+(D-u[M-y-c]>>>1)),u[M]=D+w(v,m[f])}E+=c}}},s.m=65475,s.K=65476,s.q=65496,s.V=65498;function h(u){var c=new s(u),v=c.Q>8?Uint16Array:Uint8Array,y=new v(c.o*c.F*c.O),k=c.o*c.O;return c.B(y,k),y}return h}()})(t,n)})()})(xd);var Cl=xd.exports;async function ys(e,t){const n=await e.arrayBuffer(),r=Cl.decode(n);if(!r||r.length===0)throw new Error("Invalid TIFF file: No IFDs found.");let i=r[0];i=r.reduce((u,c)=>u.width*u.height>c.width*c.height?u:c),Cl.decodeImage(n,i,r);const l=Cl.toRGBA8(i);if(!i.width||!i.height||l.length!==i.width*i.height*4)throw new Error("RGBA buffer size mismatch or invalid dimensions.");const a=new ImageData(new Uint8ClampedArray(l),i.width,i.height),o=document.createElement("canvas");o.width=i.width,o.height=i.height;const s=o.getContext("2d");if(!s)throw new Error("Could not create 2D context for TIFF processing.");s.putImageData(a,0,0);const h=o.toDataURL();return new Promise((u,c)=>{const v=new Image;v.onload=()=>{u(v)},v.onerror=y=>{console.error("[UTIF Debug] CRITICAL: HTMLImageElement failed to load Data URL.",y),c(new Error("Failed to load image from Data URL."))},v.src=h})}function gi(e,t){const n=Array(t).fill(0).map(()=>Array(t).fill(0)),r=Math.floor(t/2),i=2*e*e;let l=0;for(let a=-r;a<=r;a++)for(let o=-r;o<=r;o++){const s=1/(Math.PI*i)*Math.exp(-(o*o+a*a)/i);n[a+r][o+r]=s,l+=s}for(let a=0;a<t;a++)for(let o=0;o<t;o++)n[a][o]/=l;return n}function q1(e){const t=1/(e*e);return Array(e).fill(0).map(()=>Array(e).fill(t))}function jd(e,t){const n=Array(t).fill(0).map(()=>Array(t).fill(0)),r=Math.floor(t/2),i=e*e,l=i*i;let a=0;for(let s=-r;s<=r;s++)for(let h=-r;h<=r;h++){const u=h*h+s*s,c=-1/(Math.PI*l)*(1-u/(2*i))*Math.exp(-u/(2*i));n[s+r][h+r]=c,a+=c}const o=a/(t*t);for(let s=0;s<t;s++)for(let h=0;h<t;h++)n[s][h]-=o;return n}function ep(e){return[[0,-1,0],[-1,4+e,-1],[0,-1,0]]}function tp(e){const{kernelSize:t,sigma:n,theta:r,lambda:i,gamma:l,psi:a}=e,o=Array(t).fill(0).map(()=>Array(t).fill(0)),s=Math.floor(t/2),h=n,u=n/l;for(let c=0;c<t;c++)for(let v=0;v<t;v++){const y=(v-s)*Math.cos(r)+(c-s)*Math.sin(r),k=-(v-s)*Math.sin(r)+(c-s)*Math.cos(r),w=Math.exp(-.5*(y*y/(h*h)+k*k/(u*u))),x=Math.cos(2*Math.PI*(y/i)+a);o[c][v]=w*x}return o}function qt(e,t){const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=new Uint8ClampedArray(r),o=Math.floor(t.length/2);for(let s=0;s<l;s++)for(let h=0;h<i;h++){let u=0,c=0,v=0;for(let k=0;k<t.length;k++)for(let w=0;w<t[k].length;w++){const x=s+k-o,d=h+w-o;if(x>=0&&x<l&&d>=0&&d<i){const m=(x*i+d)*4,f=t[k][w];u+=a[m]*f,c+=a[m+1]*f,v+=a[m+2]*f}}const y=(s*i+h)*4;r[y]=Math.max(0,Math.min(255,u)),r[y+1]=Math.max(0,Math.min(255,c)),r[y+2]=Math.max(0,Math.min(255,v))}e.putImageData(n,0,0)}const np=[[0,1,0],[1,-4,1],[0,1,0]],rp=[[-1,0,1],[-1,0,1],[-1,0,1]],ip=[[-1,-1,-1],[0,0,0],[1,1,1]],ap=[[-3,0,3],[-10,0,10],[-3,0,3]],lp=[[-3,-10,-3],[0,0,0],[3,10,3]],Md=[[-1,0,1],[-2,0,2],[-1,0,1]],Nd=[[-1,-2,-1],[0,0,0],[1,2,1]],op=[[1,0],[0,-1]],sp=[[0,1],[-1,0]],up=[[-1,-1,-1],[-1,8,-1],[-1,-1,-1]];function ki(e,t,n){const r=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:i,width:l,height:a}=r,o=new Uint8ClampedArray(l*a),s=new Uint8ClampedArray(i.length);for(let u=0;u<i.length;u+=4){const c=i[u]*.299+i[u+1]*.587+i[u+2]*.114;o[u/4]=c}const h=Math.floor(t.length/2);for(let u=h;u<a-h;u++)for(let c=h;c<l-h;c++){let v=0,y=0;for(let x=0;x<t.length;x++)for(let d=0;d<t.length;d++){const m=u+x-h,f=c+d-h,_=o[m*l+f];v+=_*t[x][d],y+=_*n[x][d]}const k=Math.sqrt(v*v+y*y),w=(u*l+c)*4;s[w]=k,s[w+1]=k,s[w+2]=k,s[w+3]=255}e.putImageData(new ImageData(s,l,a),0,0)}const cp=(e,t)=>{const n=q1(t.kernelSize);qt(e,n)},fp=(e,t)=>{const n=gi(t.sigma,t.kernelSize);qt(e,n)},Dd=(e,t)=>{const n=ep(t.sharpenAmount);qt(e,n)},dp=(e,t)=>{const n=tp(t);qt(e,n)},Rd=e=>qt(e,np),Ad=e=>qt(e,up),hp=e=>ki(e,rp,ip),pp=e=>ki(e,ap,lp),vp=e=>ki(e,Md,Nd),gp=e=>ki(e,op,sp),mp=(e,t)=>{const n=jd(t.sigma,t.kernelSize);qt(e,n)},wp=(e,t)=>{const{kernelSize:n,sigma:r,sigma2:i}=t,l=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:a,width:o,height:s}=l,h=new Uint8ClampedArray(o*s);for(let d=0;d<a.length;d+=4)h[d/4]=a[d]*.299+a[d+1]*.587+a[d+2]*.114;const u=document.createElement("canvas");u.width=o,u.height=s;const c=u.getContext("2d"),v=c.createImageData(o,s);for(let d=0;d<h.length;d++)v.data[d*4]=h[d],v.data[d*4+1]=h[d],v.data[d*4+2]=h[d],v.data[d*4+3]=255;c.putImageData(v,0,0);const y=gi(r,n);qt(c,y);const k=c.getImageData(0,0,o,s).data;c.putImageData(v,0,0);const w=gi(i,n);qt(c,w);const x=c.getImageData(0,0,o,s).data;for(let d=0;d<a.length;d+=4){const m=Math.abs(k[d]-x[d]);a[d]=m,a[d+1]=m,a[d+2]=m,a[d+3]=255}e.putImageData(l,0,0)},yp=(e,t)=>{const{kernelSize:n,sigma:r,threshold:i}=t,l=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:a,width:o,height:s}=l,h=document.createElement("canvas");h.width=o,h.height=s;const u=h.getContext("2d");u.putImageData(l,0,0);const c=jd(r,n),y=((w,x)=>{const d=w.getImageData(0,0,w.canvas.width,w.canvas.height),{data:m,width:f,height:_}=d,E=Math.floor(x.length/2),C=new Float32Array(f*_);for(let M=0;M<_;M++)for(let D=0;D<f;D++){let R=0;for(let A=0;A<x.length;A++)for(let L=0;L<x[A].length;L++){const O=M+A-E,z=D+L-E;if(O>=0&&O<_&&z>=0&&z<f){const U=(O*f+z)*4,J=m[U]*.299+m[U+1]*.587+m[U+2]*.114;R+=J*x[A][L]}}C[M*f+D]=R}return C})(u,c),k=new Uint8ClampedArray(a.length);for(let w=1;w<s-1;w++)for(let x=1;x<o-1;x++){const d=w*o+x,m=y[d],f=[y[d-1],y[d+1],y[d-o],y[d+o]];let _=!1;for(const C of f)if(Math.sign(m)!==Math.sign(C)&&Math.abs(m-C)>i){_=!0;break}const E=(w*o+x)*4;_&&(k[E]=255,k[E+1]=255,k[E+2]=255),k[E+3]=255}e.putImageData(new ImageData(k,o,s),0,0)},xp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n;ki(e,Md,Nd);const a=e.getImageData(0,0,i,l),{data:o}=a;for(let s=0;s<o.length;s+=4){const h=o[s];h<t.lowThreshold?o[s]=o[s+1]=o[s+2]=0:h>t.highThreshold?o[s]=o[s+1]=o[s+2]=255:o[s]=o[s+1]=o[s+2]=0}e.putImageData(a,0,0)},_p=(e,t)=>{Pd(e,t)},kp=e=>{Ad(e)},Sp=e=>{Dd(e,{sharpenAmount:1})},Ep=e=>{Rd(e)};function Ld(e){const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:n}=t;for(let r=0;r<n.length;r+=4){const i=n[r]*.299+n[r+1]*.587+n[r+2]*.114;n[r]=n[r+1]=n[r+2]=i}e.putImageData(t,0,0)}function xs(e,t){const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),r=e.createImageData(n.width,n.height),i=Math.floor(t/2);for(let l=0;l<n.height;l++)for(let a=0;a<n.width;a++){let o=255;for(let h=-i;h<=i;h++)for(let u=-i;u<=i;u++){const c=Math.min(n.height-1,Math.max(0,l+h)),v=Math.min(n.width-1,Math.max(0,a+u)),y=(c*n.width+v)*4;o=Math.min(o,n.data[y])}const s=(l*n.width+a)*4;r.data[s]=r.data[s+1]=r.data[s+2]=o,r.data[s+3]=255}e.putImageData(r,0,0)}function _s(e,t){const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),r=e.createImageData(n.width,n.height),i=Math.floor(t/2);for(let l=0;l<n.height;l++)for(let a=0;a<n.width;a++){let o=0;for(let h=-i;h<=i;h++)for(let u=-i;u<=i;u++){const c=Math.min(n.height-1,Math.max(0,l+h)),v=Math.min(n.width-1,Math.max(0,a+u)),y=(c*n.width+v)*4;o=Math.max(o,n.data[y])}const s=(l*n.width+a)*4;r.data[s]=r.data[s+1]=r.data[s+2]=o,r.data[s+3]=255}e.putImageData(r,0,0)}const zd=(e,t)=>{Ld(e),xs(e,t.kernelSize||3),_s(e,t.kernelSize||3)},Id=(e,t)=>{Ld(e),_s(e,t.kernelSize||3),xs(e,t.kernelSize||3)},Cp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),r=document.createElement("canvas").getContext("2d");r.canvas.width=n.width,r.canvas.height=n.height,r.putImageData(n,0,0),zd(r,t);const i=r.getImageData(0,0,n.width,n.height);for(let l=0;l<n.data.length;l+=4){const a=Math.max(0,n.data[l]-i.data[l]);n.data[l]=n.data[l+1]=n.data[l+2]=a}e.putImageData(n,0,0)},jp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),r=document.createElement("canvas").getContext("2d");r.canvas.width=n.width,r.canvas.height=n.height,r.putImageData(n,0,0),Id(r,t);const i=r.getImageData(0,0,n.width,n.height);for(let l=0;l<n.data.length;l+=4){const a=Math.max(0,i.data[l]-n.data[l]);n.data[l]=n.data[l+1]=n.data[l+2]=a}e.putImageData(n,0,0)},Mp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),r=document.createElement("canvas").getContext("2d"),i=document.createElement("canvas").getContext("2d");r.canvas.width=i.canvas.width=n.width,r.canvas.height=i.canvas.height=n.height,r.putImageData(n,0,0),i.putImageData(n,0,0),_s(r,t.kernelSize||3),xs(i,t.kernelSize||3);const l=r.getImageData(0,0,n.width,n.height),a=i.getImageData(0,0,n.width,n.height);for(let o=0;o<n.data.length;o+=4){const s=Math.max(0,l.data[o]-a.data[o]);n.data[o]=n.data[o+1]=n.data[o+2]=s}e.putImageData(n,0,0)},Np=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=t.lowThreshold??128,o=new Uint8Array(i*l);for(let u=0,c=0;u<r.length;u+=4,c++)o[c]=.299*r[u]+.587*r[u+1]+.114*r[u+2]>a?0:1;const s=new Uint16Array(i*l).fill(1e4);for(let u=0;u<l;u++)for(let c=0;c<i;c++){const v=u*i+c;if(o[v]===0){s[v]=0;continue}const y=u>0?s[v-i]+1:1e4,k=c>0?s[v-1]+1:1e4;s[v]=Math.min(s[v],y,k)}for(let u=l-1;u>=0;u--)for(let c=i-1;c>=0;c--){const v=u*i+c,y=u<l-1?s[v+i]+1:1e4,k=c<i-1?s[v+1]+1:1e4;s[v]=Math.min(s[v],y,k)}let h=0;for(let u=0;u<s.length;u++)s[u]<1e4&&(h=Math.max(h,s[u]));for(let u=0,c=0;u<r.length;u+=4,c++){const v=s[c]>=1e4?0:Math.round(255*s[c]/(h||1));r[u]=r[u+1]=r[u+2]=v,r[u+3]=255}e.putImageData(n,0,0)},Dp=e=>{const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:n}=t;let r=255,i=0;for(let a=0;a<n.length;a+=4){const o=n[a]*.299+n[a+1]*.587+n[a+2]*.114;o<r&&(r=o),o>i&&(i=o)}const l=i-r;if(l!==0){for(let a=0;a<n.length;a+=4){const o=n[a],s=n[a+1],h=n[a+2];n[a]=255*(o-r)/l,n[a+1]=255*(s-r)/l,n[a+2]=255*(h-r)/l}e.putImageData(t,0,0)}},Rp=e=>{const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:n,width:r,height:i}=t,l=new Uint8ClampedArray(r*i),a=new Array(256).fill(0);for(let c=0;c<n.length;c+=4){const v=Math.round(n[c]*.299+n[c+1]*.587+n[c+2]*.114);l[c/4]=v,a[v]++}const o=new Array(256).fill(0);o[0]=a[0];for(let c=1;c<256;c++)o[c]=o[c-1]+a[c];let s=0;for(let c=0;c<256;c++)if(o[c]>0){s=o[c];break}const h=new Uint8ClampedArray(256),u=r*i;for(let c=0;c<256;c++)h[c]=Math.round(255*(o[c]-s)/(u-s));for(let c=0;c<n.length;c+=4){const v=l[c/4],y=h[v];n[c]=y,n[c+1]=y,n[c+2]=y}e.putImageData(t,0,0)},Ap=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,{clipLimit:a,gridSize:o}=t,s=Math.floor(i/o),h=Math.floor(l/o),u=new Uint8ClampedArray(i*l);for(let v=0;v<r.length;v+=4)u[v/4]=Math.round(r[v]*.299+r[v+1]*.587+r[v+2]*.114);const c=new Array(o*o).fill(0).map(()=>new Uint8ClampedArray(256));for(let v=0;v<o;v++)for(let y=0;y<o;y++){const k=y*s,w=v*h,x=k+s,d=w+h,m=s*h,f=new Array(256).fill(0);for(let R=w;R<d;R++)for(let A=k;A<x;A++)f[u[R*i+A]]++;const _=Math.max(1,a*m/256);let E=0;for(let R=0;R<256;R++)f[R]>_&&(E+=f[R]-_,f[R]=_);const C=E/256;for(let R=0;R<256;R++)f[R]+=C;const M=new Array(256).fill(0);M[0]=f[0];for(let R=1;R<256;R++)M[R]=M[R-1]+f[R];const D=c[v*o+y];for(let R=0;R<256;R++)D[R]=Math.round(255*M[R]/m)}for(let v=0;v<l;v++)for(let y=0;y<i;y++){const k=y/s-.5,w=v/h-.5;let x=Math.floor(k),d=Math.floor(w),m=x+1,f=d+1;x=Math.max(0,Math.min(o-1,x)),d=Math.max(0,Math.min(o-1,d)),m=Math.max(0,Math.min(o-1,m)),f=Math.max(0,Math.min(o-1,f));const _=u[v*i+y],E=c[d*o+x][_],C=c[f*o+x][_],M=c[d*o+m][_],D=c[f*o+m][_],R=k-x,A=w-d,L=E*(1-R)+M*R,O=C*(1-R)+D*R,z=L*(1-A)+O*A,U=(v*i+y)*4;r[U]=z,r[U+1]=z,r[U+2]=z}e.putImageData(n,0,0)},Lp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r}=n,{gamma:i}=t;if(i===1)return;const l=1/i,a=new Uint8ClampedArray(256);for(let o=0;o<256;o++)a[o]=Math.pow(o/255,l)*255;for(let o=0;o<r.length;o+=4)r[o]=a[r[o]],r[o+1]=a[r[o+1]],r[o+2]=a[r[o+2]];e.putImageData(n,0,0)},zp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=new Uint8ClampedArray(r),{kernelSize:o}=t,s=Math.floor(o/2),h=new Uint8ClampedArray(i*l);for(let u=0;u<a.length;u+=4){const c=a[u]*.299+a[u+1]*.587+a[u+2]*.114;h[u/4]=c}for(let u=0;u<l;u++)for(let c=0;c<i;c++){const v=[];for(let w=-s;w<=s;w++)for(let x=-s;x<=s;x++){const d=u+w,m=c+x;d>=0&&d<l&&m>=0&&m<i&&v.push(h[d*i+m])}v.sort((w,x)=>w-x);const y=v[Math.floor(v.length/2)],k=(u*i+c)*4;r[k]=y,r[k+1]=y,r[k+2]=y}e.putImageData(n,0,0)},Ip=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,{kernelSize:a}=t,o=Math.floor(a/2),s=new Uint8ClampedArray(i*l);for(let u=0;u<r.length;u+=4)s[u/4]=Math.round(r[u]*.299+r[u+1]*.587+r[u+2]*.114);const h=new Uint8ClampedArray(r.length);for(let u=0;u<l;u++)for(let c=0;c<i;c++){const v=s[u*i+c],y=new Array(256).fill(0);let k=0;for(let f=-o;f<=o;f++)for(let _=-o;_<=o;_++){const E=u+f,C=c+_;E>=0&&E<l&&C>=0&&C<i&&(y[s[E*i+C]]++,k++)}const w=new Array(256).fill(0);w[0]=y[0];for(let f=1;f<256;f++)w[f]=w[f-1]+y[f];let x=0;for(let f=0;f<256;f++)if(w[f]>0){x=w[f];break}const d=Math.round(255*(w[v]-x)/(k-x)),m=(u*i+c)*4;h[m]=d,h[m+1]=d,h[m+2]=d,h[m+3]=255}e.putImageData(new ImageData(h,i,l),0,0)},Pp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,{gridSize:a}=t,o=Math.floor(i/a),s=Math.floor(l/a),h=new Uint8ClampedArray(i*l);for(let c=0;c<r.length;c+=4)h[c/4]=Math.round(r[c]*.299+r[c+1]*.587+r[c+2]*.114);const u=new Array(a*a).fill(0).map(()=>new Uint8ClampedArray(256));for(let c=0;c<a;c++)for(let v=0;v<a;v++){const y=v*o,k=c*s,w=y+o,x=k+s,d=o*s,m=new Array(256).fill(0);for(let C=k;C<x;C++)for(let M=y;M<w;M++)m[h[C*i+M]]++;const f=new Array(256).fill(0);f[0]=m[0];for(let C=1;C<256;C++)f[C]=f[C-1]+m[C];const _=f.find(C=>C>0)||0,E=u[c*a+v];for(let C=0;C<256;C++)E[C]=Math.round(255*(f[C]-_)/(d-_))}for(let c=0;c<l;c++)for(let v=0;v<i;v++){const y=v/o-.5,k=c/s-.5;let w=Math.floor(y),x=Math.floor(k),d=w+1,m=x+1;w=Math.max(0,Math.min(a-1,w)),x=Math.max(0,Math.min(a-1,x)),d=Math.max(0,Math.min(a-1,d)),m=Math.max(0,Math.min(a-1,m));const f=h[c*i+v],_=u[x*a+w][f],E=u[m*a+w][f],C=u[x*a+d][f],M=u[m*a+d][f],D=y-w,R=k-x,A=_*(1-D)+C*D,L=E*(1-D)+M*D,O=A*(1-R)+L*R,z=(c*i+v)*4;r[z]=O,r[z+1]=O,r[z+2]=O}e.putImageData(n,0,0)},Fp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=new Uint8ClampedArray(r),{kernelSize:o}=t,s=Math.floor(o/2),h=new Uint8ClampedArray(i*l);for(let c=0;c<a.length;c+=4){const v=a[c]*.299+a[c+1]*.587+a[c+2]*.114;h[c/4]=v}const u=[[1,2,1],[2,4,2],[1,2,1]];for(let c=0;c<l;c++)for(let v=0;v<i;v++){const y=[];if(o===3)for(let x=-s;x<=s;x++)for(let d=-s;d<=s;d++){const m=c+x,f=v+d;if(m>=0&&m<l&&f>=0&&f<i){const _=h[m*i+f],E=u[x+s][d+s];for(let C=0;C<E;C++)y.push(_)}}else for(let x=-s;x<=s;x++)for(let d=-s;d<=s;d++){const m=c+x,f=v+d;m>=0&&m<l&&f>=0&&f<i&&y.push(h[m*i+f])}y.sort((x,d)=>x-d);const k=y[Math.floor(y.length/2)],w=(c*i+v)*4;r[w]=k,r[w+1]=k,r[w+2]=k}e.putImageData(n,0,0)},bp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=new Uint8ClampedArray(r),{kernelSize:o,alpha:s}=t,h=Math.floor(o/2),u=new Uint8ClampedArray(i*l);for(let v=0;v<a.length;v+=4){const y=a[v]*.299+a[v+1]*.587+a[v+2]*.114;u[v/4]=y}const c=Math.floor(o*o*s/2);for(let v=0;v<l;v++)for(let y=0;y<i;y++){const k=[];for(let f=-h;f<=h;f++)for(let _=-h;_<=h;_++){const E=v+f,C=y+_;E>=0&&E<l&&C>=0&&C<i&&k.push(u[E*i+C])}k.sort((f,_)=>f-_);const w=k.slice(c,k.length-c);if(w.length===0){const f=k[Math.floor(k.length/2)],_=(v*i+y)*4;r[_]=f,r[_+1]=f,r[_+2]=f;continue}const d=w.reduce((f,_)=>f+_,0)/w.length,m=(v*i+y)*4;r[m]=d,r[m+1]=d,r[m+2]=d}e.putImageData(n,0,0)},Pd=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=new Uint8ClampedArray(r),{kernelSize:o,sigmaColor:s,sigmaSpace:h}=t,u=Math.floor(o/2),c=(k,w)=>1/(2*Math.PI*w*w)*Math.exp(-(k*k)/(2*w*w)),v=new Uint8ClampedArray(i*l);for(let k=0;k<a.length;k+=4){const w=a[k]*.299+a[k+1]*.587+a[k+2]*.114;v[k/4]=w}const y=gi(h,o);for(let k=0;k<l;k++)for(let w=0;w<i;w++){const x=v[k*i+w];let d=0,m=0;for(let E=-u;E<=u;E++)for(let C=-u;C<=u;C++){const M=k+E,D=w+C;if(M>=0&&M<l&&D>=0&&D<i){const R=v[M*i+D],A=R-x,L=c(A,s),O=y[E+u][C+u],z=L*O;d+=R*z,m+=z}}const f=(k*i+w)*4,_=m===0?x:d/m;r[f]=_,r[f+1]=_,r[f+2]=_}e.putImageData(n,0,0)},Tp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,a=new Uint8ClampedArray(r),{patchSize:o,searchWindowSize:s,h}=t,u=Math.floor(o/2),c=Math.floor(s/2),v=h*h,y=new Uint8ClampedArray(i*l);for(let x=0;x<a.length;x+=4)y[x/4]=a[x]*.299+a[x+1]*.587+a[x+2]*.114;const k=new Uint8ClampedArray(y.length),w=(x,d,m,f)=>{let _=0;for(let E=-u;E<=u;E++)for(let C=-u;C<=u;C++){const M=x+C,D=d+E,R=m+C,A=f+E;if(M>=0&&M<i&&D>=0&&D<l&&R>=0&&R<i&&A>=0&&A<l){const L=y[D*i+M]-y[A*i+R];_+=L*L}}return _/(o*o)};for(let x=0;x<l;x++)for(let d=0;d<i;d++){let m=0,f=0;const _=Math.max(x-c,0),E=Math.min(x+c,l-1),C=Math.max(d-c,0),M=Math.min(d+c,i-1);for(let D=_;D<=E;D++)for(let R=C;R<=M;R++){const A=w(d,x,R,D),L=Math.exp(-A/v);m+=L,f+=L*y[D*i+R]}k[x*i+d]=f/m}for(let x=0;x<r.length;x+=4){const d=k[x/4];r[x]=d,r[x+1]=d,r[x+2]=d}e.putImageData(n,0,0)},Op=(e,t)=>{const{kernelSize:n,sigma:r,sharpenAmount:i}=t,l=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:a,width:o,height:s}=l,h=new Uint8ClampedArray(a),u=document.createElement("canvas");u.width=o,u.height=s;const c=u.getContext("2d");c.putImageData(l,0,0);const v=gi(r,n);qt(c,v);const y=c.getImageData(0,0,o,s).data;for(let k=0;k<a.length;k+=4){const w=h[k],x=y[k],d=w+i*(w-x);a[k]=Math.max(0,Math.min(255,d));const m=h[k+1],f=y[k+1],_=m+i*(m-f);a[k+1]=Math.max(0,Math.min(255,_));const E=h[k+2],C=y[k+2],M=E+i*(E-C);a[k+2]=Math.max(0,Math.min(255,M)),a[k+3]=h[k+3]}e.putImageData(l,0,0)},Bp=(e,t)=>{const n=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:r,width:i,height:l}=n,{iterations:a,kappa:o}=t,s=.14;let h=new Float32Array(i*l);for(let c=0;c<r.length;c+=4)h[c/4]=r[c]*.299+r[c+1]*.587+r[c+2]*.114;let u=new Float32Array(h.length);for(let c=0;c<a;c++){for(let v=1;v<l-1;v++)for(let y=1;y<i-1;y++){const k=v*i+y,w=h[k-i]-h[k],x=h[k+i]-h[k],d=h[k-1]-h[k],m=h[k+1]-h[k],f=1/(1+w/o*(w/o)),_=1/(1+x/o*(x/o)),E=1/(1+d/o*(d/o)),C=1/(1+m/o*(m/o));u[k]=h[k]+s*(f*w+_*x+E*d+C*m)}[h,u]=[u,h]}for(let c=0;c<r.length;c+=4){const v=h[c/4];r[c]=v,r[c+1]=v,r[c+2]=v}e.putImageData(n,0,0)},Hp=e=>{const t=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:n,width:r,height:i}=t,l=new Uint8ClampedArray(r*i);for(let o=0;o<n.length;o+=4)l[o/4]=Math.round(n[o]*.299+n[o+1]*.587+n[o+2]*.114);const a=new Uint8ClampedArray(n.length);for(let o=1;o<i-1;o++)for(let s=1;s<r-1;s++){const h=o*r+s,u=l[h];let c=0;l[h-r-1]>=u&&(c|=1),l[h-r]>=u&&(c|=2),l[h-r+1]>=u&&(c|=4),l[h+1]>=u&&(c|=8),l[h+r+1]>=u&&(c|=16),l[h+r]>=u&&(c|=32),l[h+r-1]>=u&&(c|=64),l[h-1]>=u&&(c|=128);const v=(o*r+s)*4;a[v]=c,a[v+1]=c,a[v+2]=c,a[v+3]=255}e.putImageData(new ImageData(a,r,i),0,0)};function tr(e,t,n){const r=new Float32Array(t*n);let i=0;for(let l=0;l<t;l++)i+=e[l],r[l]=i;for(let l=1;l<n;l++){i=0;for(let a=0;a<t;a++)i+=e[l*t+a],r[l*t+a]=i+r[(l-1)*t+a]}return r}function nr(e,t,n,r){const i=new Float32Array(t*n),l=Math.round(r);for(let a=0;a<n;a++)for(let o=0;o<t;o++){const s=Math.max(0,a-l-1),h=Math.min(n-1,a+l),u=Math.max(0,o-l-1),c=Math.min(t-1,o+l),v=(h-s)*(c-u),y=e[h*t+c]-e[s*t+c]-e[h*t+u]+e[s*t+u];i[a*t+o]=y/v}return i}const Wp=(e,t)=>{const{kernelSize:n,epsilon:r}=t,i=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:l,width:a,height:o}=i,s=new Float32Array(a*o),h=new Float32Array(a*o);for(let z=0;z<l.length;z+=4){const U=(l[z]*.299+l[z+1]*.587+l[z+2]*.114)/255;s[z/4]=U,h[z/4]=U}const u=tr(s,a,o),c=tr(h,a,o),v=s.map(z=>z*z),y=tr(v,a,o),k=new Float32Array(a*o);for(let z=0;z<k.length;z++)k[z]=s[z]*h[z];const w=tr(k,a,o),x=nr(u,a,o,n),d=nr(c,a,o,n),m=nr(y,a,o,n),f=nr(w,a,o,n),_=new Float32Array(a*o),E=new Float32Array(a*o);for(let z=0;z<_.length;z++)_[z]=m[z]-x[z]*x[z],E[z]=f[z]-x[z]*d[z];const C=new Float32Array(a*o),M=new Float32Array(a*o);for(let z=0;z<C.length;z++)C[z]=E[z]/(_[z]+r),M[z]=d[z]-C[z]*x[z];const D=tr(C,a,o),R=tr(M,a,o),A=nr(D,a,o,n),L=nr(R,a,o,n),O=new Float32Array(a*o);for(let z=0;z<O.length;z++)O[z]=A[z]*s[z]+L[z];for(let z=0;z<l.length;z+=4){const U=Math.max(0,Math.min(255,O[z/4]*255));l[z]=U,l[z+1]=U,l[z+2]=U,l[z+3]=255}e.putImageData(i,0,0)},Up=[1,4,6,4,1],$p=[-1,-2,0,2,1],Vp=[-1,0,2,0,-1],Gp=[-1,2,0,-2,1],Kp=[1,-4,6,-4,1],qu={L5:Up,E5:$p,S5:Vp,W5:Gp,R5:Kp};function Yp(e,t){const n=qu[e],r=qu[t],i=Array(5).fill(0).map(()=>Array(5).fill(0));for(let l=0;l<5;l++)for(let a=0;a<5;a++)i[l][a]=n[l]*r[a];return i}const Xp=["L5E5","E5L5","L5R5","R5L5","E5S5","S5E5","S5S5","R5R5","L5S5","S5L5","E5E5","E5W5","W5E5","S5W5","W5S5"],Zp=(e,t)=>{const{lawsKernelType:n,kernelSize:r}=t,[i,l]=n.match(/.{1,2}/g),a=Yp(i,l),o=e.getImageData(0,0,e.canvas.width,e.canvas.height),{data:s,width:h,height:u}=o,c=new Float32Array(h*u);for(let d=0;d<s.length;d+=4)c[d/4]=s[d]*.299+s[d+1]*.587+s[d+2]*.114;const v=new Float32Array(h*u),y=2;for(let d=0;d<u;d++)for(let m=0;m<h;m++){let f=0;for(let _=0;_<5;_++)for(let E=0;E<5;E++){const C=d+_-y,M=m+E-y;C>=0&&C<u&&M>=0&&M<h&&(f+=c[C*h+M]*a[_][E])}v[d*h+m]=f}const k=new Float32Array(h*u),w=Math.floor(r/2);let x=0;for(let d=0;d<u;d++)for(let m=0;m<h;m++){let f=0;for(let E=-w;E<=w;E++)for(let C=-w;C<=w;C++){const M=d+E,D=m+C;M>=0&&M<u&&D>=0&&D<h&&(f+=Math.abs(v[M*h+D]))}const _=f/(r*r);k[d*h+m]=_,_>x&&(x=_)}x===0&&(x=1);for(let d=0;d<s.length;d+=4){const m=k[d/4]/x*255;s[d]=m,s[d+1]=m,s[d+2]=m,s[d+3]=255}e.putImageData(o,0,0)},Oa=Q.forwardRef(({file:e,label:t,isReference:n,cache:r,filteredCache:i,appMode:l,overrideScale:a,refPoint:o,onSetRefPoint:s,folderKey:h,onClick:u,isActive:c,overrideFilterType:v,overrideFilterParams:y,rotation:k},w)=>{const x=Q.useRef(null),[d,m]=Q.useState(null),[f,_]=Q.useState(null),[E,C]=Q.useState(!1),[M,D]=Q.useState(null),{viewport:R,setViewport:A,setFitScaleFn:L,pinpointMouseMode:O,setPinpointScale:z,pinpointGlobalScale:U,showMinimap:J,showGrid:ce,gridColor:q,pinpointRotations:F,pinpointGlobalRotation:b,viewerFilters:B,viewerFilterParams:G,indicator:H,activeCanvasKey:Y,compareRotation:pe,minimapWidth:ve,minimapPosition:we}=Fe();Q.useEffect(()=>{let T=!1;if(!e){m(null);return}const ue=`${t}-${e.name}`,ie=r.get(ue);if(ie){m(ie);return}return(async()=>{try{const te=(e.name.split(".").pop()||"").toLowerCase();let ae;if(te==="tif"||te==="tiff"){const $=await ys(e,gs);ae=await createImageBitmap($)}else{const $=F1?{imageOrientation:"from-image"}:{};ae=await createImageBitmap(e,$)}T||(r.set(ue,ae),m(ae))}catch(te){console.error("Error loading image:",te),T||m(null)}})(),()=>{T=!0}},[e,t,r]),Q.useEffect(()=>{(async()=>{const ue=v??(typeof h=="string"?B[h]:"none")??"none",ie=y??(typeof h=="string"?G[h]:void 0);if(!d||!e){_(null);return}if(ue==="none"){_(d);return}const te=i?`${String(h)}|${e.name}|${ue}|${JSON.stringify(ie)}`:"";if(i&&te){const ne=i.get(te);if(ne){_(ne);return}}const ae=document.createElement("canvas");ae.width=d.width,ae.height=d.height;const $=ae.getContext("2d");if(!$)return;const ee={grayscale:"grayscale(100%)",invert:"invert(100%)",sepia:"sepia(100%)"};switch(ue in ee?($.filter=ee[ue],$.drawImage(d,0,0),$.filter="none"):$.drawImage(d,0,0),ue){case"linearstretch":Dp($);break;case"histogramequalization":Rp($);break;case"laplacian":Rd($);break;case"highpass":Ad($);break;case"prewitt":hp($);break;case"scharr":pp($);break;case"sobel":vp($);break;case"robertscross":gp($);break;case"log":ie&&mp($,ie);break;case"dog":ie&&wp($,ie);break;case"marrhildreth":ie&&yp($,ie);break;case"gaussianblur":ie&&fp($,ie);break;case"boxblur":ie&&cp($,ie);break;case"median":ie&&zp($,ie);break;case"weightedmedian":ie&&Fp($,ie);break;case"alphatrimmedmean":ie&&bp($,ie);break;case"localhistogramequalization":ie&&Ip($,ie);break;case"adaptivehistogramequalization":ie&&Pp($,ie);break;case"sharpen":ie&&Dd($,ie);break;case"canny":ie&&xp($,ie);break;case"clahe":ie&&Ap($,ie);break;case"gammacorrection":ie&&Lp($,ie);break;case"bilateral":ie&&Pd($,ie);break;case"nonlocalmeans":ie&&Tp($,ie);break;case"anisotropicdiffusion":ie&&Bp($,ie);break;case"unsharpmask":ie&&Op($,ie);break;case"gabor":ie&&dp($,ie);break;case"lawstextureenergy":ie&&Zp($,ie);break;case"lbp":Hp($);break;case"guided":ie&&Wp($,ie);break;case"edgepreserving":ie&&_p($,ie);break;case"dft":kp($);break;case"dct":Sp($);break;case"wavelet":Ep($);break;case"morph_open":ie&&zd($,ie);break;case"morph_close":ie&&Id($,ie);break;case"morph_tophat":ie&&Cp($,ie);break;case"morph_blackhat":ie&&jp($,ie);break;case"morph_gradient":ie&&Mp($,ie);break;case"distancetransform":ie&&Np($,ie);break}const re=await createImageBitmap(ae);i&&te&&i.set(te,re),_(re)})()},[d,e,B,G,h,v,y,i]);const xe=Q.useCallback((T,ue,ie)=>{const{width:te,height:ae}=T.canvas;T.clearRect(0,0,te,ae),T.save();const $=a??R.scale,ee=l==="pinpoint"?$*U:$,re=ue.width*ee,ne=ue.height*ee;let fe=0,me=0,ye=0,Ae=0;if(l==="pinpoint"&&typeof h=="string"){const Se=o||{x:.5,y:.5},Re=R.refScreenX??te/2,Le=R.refScreenY??ae/2,Ne=Se.x*ue.width,De=Se.y*ue.height;fe=Math.round(Re-Ne*ee),me=Math.round(Le-De*ee);const N=(F[h]||0)+(b||0);ye=fe+re/2,Ae=me+ne/2,N!==0&&(T.translate(ye,Ae),T.rotate(N*Math.PI/180),T.translate(-ye,-Ae))}else{const Se=(R.cx||.5)*ue.width,Re=(R.cy||.5)*ue.height;fe=Math.round(te/2-Se*ee),me=Math.round(ae/2-Re*ee);const Le=l==="analysis"?k||0:l==="compare"&&pe||0;Le!==0&&(ye=fe+re/2,Ae=me+ne/2,T.translate(ye,Ae),T.rotate(Le*Math.PI/180),T.translate(-ye,-Ae))}if(T.imageSmoothingEnabled=!0,T.imageSmoothingQuality="high",T.drawImage(ue,fe,me,re,ne),T.restore(),ce){T.save(),T.strokeStyle=q,T.globalAlpha=.8,T.lineWidth=1,T.setLineDash([4,4]);const Se=te/3,Re=2*te/3;T.beginPath(),T.moveTo(Se,0),T.lineTo(Se,ae),T.moveTo(Re,0),T.lineTo(Re,ae),T.stroke();const Le=ae/3,Ne=2*ae/3;T.beginPath(),T.moveTo(0,Le),T.lineTo(te,Le),T.moveTo(0,Ne),T.lineTo(te,Ne),T.stroke(),T.restore()}if(E&&(T.save(),T.strokeStyle="rgba(255, 255, 0, 0.8)",T.lineWidth=1,T.setLineDash([4,2]),T.beginPath(),T.moveTo(ye-15,Ae),T.lineTo(ye+15,Ae),T.moveTo(ye,Ae-15),T.lineTo(ye,Ae+15),T.stroke(),T.restore()),l==="pinpoint"&&o&&ie){const Se=R.refScreenX??te/2,Re=R.refScreenY??ae/2;T.save(),T.translate(Se,Re),T.beginPath(),T.moveTo(0,-15),T.lineTo(0,15),T.moveTo(-15,0),T.lineTo(15,0),T.strokeStyle="red",T.lineWidth=3,T.stroke(),T.restore()}},[R,l,o,a,U,F,b,h,E,ce,q,k,pe]);Q.useImperativeHandle(w,()=>({drawToContext:(T,ue,ie=!1)=>{if(f&&(xe(T,f,ue),ie&&J&&d instanceof ImageBitmap&&M)){const te=document.createElement("canvas"),ae=150,$=d.height/d.width,ee=ae*$;te.width=ae,te.height=ee;const re=te.getContext("2d");if(re){const{pinpointRotations:ne,pinpointGlobalRotation:fe,compareRotation:me}=Fe.getState();let ye=0;l==="pinpoint"?ye=(typeof h=="string"&&ne[h]||0)+(fe||0):l==="analysis"?ye=k||0:l==="compare"&&(ye=me||0);const Ae=ye*Math.PI/180;if(re.save(),(l==="pinpoint"||l==="analysis")&&Ae!==0&&(re.translate(ae/2,ee/2),re.rotate(Ae),re.translate(-ae/2,-ee/2)),re.drawImage(d,0,0,ae,ee),l==="pinpoint"&&typeof h=="string"){const le=(a??R.scale)*U,oe=o||{x:.5,y:.5},de=R.refScreenX||M.width/2,P=R.refScreenY||M.height/2,Z=d.width,S=d.height,se=Z*le,je=S*le,g=oe.x*Z,W=oe.y*S,K=de-g*le,j=P-W*le,{pinpointRotations:I,pinpointGlobalRotation:V}=Fe.getState(),ke=((I[h]||0)+(V||0))*Math.PI/180,Pe=K+se/2,wt=j+je/2,He=Math.cos(-ke),Te=Math.sin(-ke),Ze=[{x:0,y:0},{x:M.width,y:0},{x:M.width,y:M.height},{x:0,y:M.height}].map(({x:Je,y:Qn})=>{const Ln=Je-Pe,Ge=Qn-wt,yt=Pe+Ln*He-Ge*Te,nt=wt+Ln*Te+Ge*He,Ot=(yt-K)/le,At=(nt-j)/le;return{x:Ot/Z*ae,y:At/S*ee}});re.strokeStyle="rgba(255, 0, 0, 0.9)",re.lineWidth=2,re.fillStyle="rgba(255, 0, 0, 0.2)",re.beginPath(),re.moveTo(Ze[0].x,Ze[0].y);for(let Je=1;Je<Ze.length;Je++)re.lineTo(Ze[Je].x,Ze[Je].y);re.closePath(),re.stroke(),re.fill()}else{const{scale:N,cx:le=.5,cy:oe=.5}=R;if(N){const de=d.width,P=d.height,Z=de*N,S=P*N,se=Math.min(1,M.width/Z),je=Math.min(1,M.height/S),g=ae*se,W=ee*je,K=le*ae-g/2,j=oe*ee-W/2;re.strokeStyle="rgba(255, 0, 0, 0.9)",re.lineWidth=2,re.strokeRect(Math.max(0,Math.min(ae-g,K)),Math.max(0,Math.min(ee-W,j)),Math.min(g,ae),Math.min(W,ee)),re.fillStyle="rgba(255, 0, 0, 0.2)",re.fillRect(Math.max(0,Math.min(ae-g,K)),Math.max(0,Math.min(ee-W,j)),Math.min(g,ae),Math.min(W,ee))}}re.restore();const Se=10,{minimapPosition:Re,minimapWidth:Le}=Fe.getState(),Ne=Math.max(60,Math.min(400,Le||ae)),De=Ne*(d.height/d.width);let ze=Se,Ie=Se;switch(Re){case"top-left":ze=Se,Ie=Se;break;case"top-right":ze=T.canvas.width-Ne-Se,Ie=Se;break;case"bottom-left":ze=Se,Ie=T.canvas.height-De-Se;break;case"bottom-right":default:ze=T.canvas.width-Ne-Se,Ie=T.canvas.height-De-Se;break}if(T.fillStyle="rgba(0, 0, 0, 0.7)",T.fillRect(ze-5,Ie-5,Ne+10,De+10),ae!==Ne){const N=document.createElement("canvas");N.width=Ne,N.height=De;const le=N.getContext("2d");le&&le.drawImage(te,0,0,Ne,De),T.drawImage(N,ze,Ie)}else T.drawImage(te,ze,Ie)}}},getCanvas:()=>x.current}));const X=Q.useCallback(()=>{if(!x.current||!d)return 1;const{width:T,height:ue}=x.current.getBoundingClientRect();return Math.min(T/d.width,ue/d.height)},[d]);Q.useEffect(()=>{n&&L(X)},[X,n,L]),Q.useEffect(()=>{const T=x.current;if(!T||!f)return;const ue=T.getContext("2d"),{width:ie,height:te}=T.getBoundingClientRect();T.width=Math.round(ie),T.height=Math.round(te),D({width:Math.round(ie),height:Math.round(te)}),xe(ue,f,!0)},[f,xe,R,U,F,b,E,ce,q,pe]),Q.useEffect(()=>{const T=x.current;if(!T)return;const ue=new ResizeObserver(()=>{if(f){const ie=T.getContext("2d"),{width:te,height:ae}=T.getBoundingClientRect();T.width=Math.round(te),T.height=Math.round(ae),D({width:Math.round(te),height:Math.round(ae)}),xe(ie,f,!0)}n&&d&&L(X)});return ue.observe(T),()=>ue.disconnect()},[f,xe,n,d,X,L]),Q.useEffect(()=>{const T=x.current;if(!T||!d||l!=="pinpoint"||!s||O!=="pin"||typeof h!="string")return;const ue=ie=>{const{left:te,top:ae,width:$,height:ee}=T.getBoundingClientRect(),re=ie.clientX-te,ne=ie.clientY-ae,me=(a??R.scale)*U,ye=o||{x:.5,y:.5},Ae=R.refScreenX||$/2,Se=R.refScreenY||ee/2,Re=ye.x*d.width,Le=ye.y*d.height,Ne=Ae-Re*me,De=Se-Le*me,ze=Fe.getState().pinpointRotations[h]||0,Ie=Fe.getState().pinpointGlobalRotation||0,N=(ze+Ie)*Math.PI/180;let le=re,oe=ne;if(N!==0){const Z=Ne+d.width*me/2,S=De+d.height*me/2,se=re-Z,je=ne-S,g=Math.cos(N),W=Math.sin(N);le=Z+se*g+je*W,oe=S-se*W+je*g}const de=(le-Ne)/me,P=(oe-De)/me;de>=0&&de<=d.width&&P>=0&&P<=d.height&&s(h,{x:de/d.width,y:P/d.height},{x:re,y:ne})};return T.addEventListener("click",ue),()=>T.removeEventListener("click",ue)},[d,l,s,R,h,o,O,a,U]),Q.useEffect(()=>{const T=x.current;if(!T)return;const ue=ie=>{if(l==="pinpoint"){ie.preventDefault();const{pinpointMouseMode:te,setPinpointMouseMode:ae}=Fe.getState();ae(te==="pin"?"pan":"pin")}};return T.addEventListener("contextmenu",ue),()=>T.removeEventListener("contextmenu",ue)},[l]),Q.useEffect(()=>{const T=x.current;if(!T||!d)return;let ue=!1,ie=0,te=0,ae=null;const $=fe=>{fe.preventDefault(),fe.stopPropagation();const{left:me,top:ye,width:Ae,height:Se}=T.getBoundingClientRect(),Re=fe.clientX-me,Le=fe.clientY-ye,{viewport:Ne,pinpointGlobalScale:De,setPinpointGlobalScale:ze}=Fe.getState();l==="pinpoint"?(a??Ne.scale)*De:Ne.scale;const Ie=1.2,N=Math.min(xo,Ie),le=fe.deltaY<0?N:1/N;if(l==="pinpoint"){if(typeof h=="string"){const{setActiveCanvasKey:j}=Fe.getState();j(h)}const oe=(a??Ne.scale)*De,de=oe*le,P=oe*Ie,Z=oe/Ie,S=fe.deltaY<0?Math.min(de,P):Math.max(de,Z),se=S/(a??Ne.scale);if(S>Yn||S<Kn)return;ze(se);const je=Ne.refScreenX||Ae/2,g=Ne.refScreenY||Se/2,W=Re+(je-Re)*(S/oe),K=Le+(g-Le)*(S/oe);A({refScreenX:W,refScreenY:K})}else{const oe=Ne.scale,de=oe*le,P=oe*Ie,Z=oe/Ie;let S=fe.deltaY<0?Math.min(de,P):Math.max(de,Z);if(S=Math.min(Yn,Math.max(Kn,S)),S===oe)return;let{cx:se,cy:je}=Ne;{const g=d.width,W=d.height,K=g*oe,j=Ae/2-(se||.5)*g*oe,I=Se/2-(je||.5)*W*oe,V=(Re-j)/K,Me=(Le-I)/K,_e=g*S,ke=Re-V*_e,Pe=Le-Me*_e,wt=(Ae/2-ke)/S,He=(Se/2-Pe)/S;se=wt/g,je=He/W}A({scale:S,cx:se,cy:je})}},ee=fe=>{l==="pinpoint"&&typeof h=="string"?fe.altKey?(ae="rotate",C(!0),T.style.cursor="ew-resize"):O==="pan"&&(ae="pan",T.style.cursor="grabbing"):l!=="pinpoint"&&(fe.altKey?(ae="rotate",C(!0),T.style.cursor="ew-resize"):(ae="pan",T.style.cursor="grabbing")),ae&&(ue=!0,ie=fe.clientX,te=fe.clientY)},re=()=>{ue=!1,ae=null,C(!1),T.style.cursor=l==="pinpoint"&&O==="pin"?"crosshair":"grab"},ne=fe=>{if(!ue||!ae)return;fe.preventDefault();const me=fe.clientX-ie,ye=fe.clientY-te;if(ie=fe.clientX,te=fe.clientY,ae==="rotate"){if(l==="pinpoint"&&typeof h=="string"){const{pinpointRotations:Se,setPinpointRotation:Re}=Fe.getState(),Ne=(Se[h]||0)+me/2,ze=(Math.round(Ne*10)/10%360+360)%360;Re(h,ze);return}if(l==="compare"){const{compareRotation:Se,setCompareRotation:Re}=Fe.getState(),Le=(Se||0)+me/2,De=(Math.round(Le*10)/10%360+360)%360;Re(De);return}if(l==="analysis"){const{analysisRotation:Se,setAnalysisRotation:Re}=Fe.getState(),Le=(Se||0)+me/2,De=(Math.round(Le*10)/10%360+360)%360;Re(De);return}}const{viewport:Ae}=Fe.getState();if(l==="pinpoint"){const Se=(Ae.refScreenX||T.width/2)+me,Re=(Ae.refScreenY||T.height/2)+ye;A({refScreenX:Se,refScreenY:Re})}else{const Se=d.width,Re=d.height,Le=-me/(Ae.scale*Se),Ne=-ye/(Ae.scale*Re);let De=(Ae.cx||.5)+Le,ze=(Ae.cy||.5)+Ne;De=Math.min(1.2,Math.max(-.2,De)),ze=Math.min(1.2,Math.max(-.2,ze)),A({cx:De,cy:ze})}};return T.addEventListener("wheel",$,{passive:!1,capture:!0}),T.addEventListener("mousedown",ee),window.addEventListener("mouseup",re),window.addEventListener("mousemove",ne),()=>{T.removeEventListener("wheel",$),T.removeEventListener("mousedown",ee),window.removeEventListener("mouseup",re),window.removeEventListener("mousemove",ne)}},[d,A,l,O,a,h,z]);const ge=l==="pinpoint"&&typeof h=="string"?(F[h]||0)+(b||0):l==="analysis"?k||0:l==="compare"&&pe||0,Ee=()=>{l!=="analysis"&&u&&u(h)};return p.jsxs("div",{className:`viewer ${c?"active":""}`,onClick:Ee,children:[p.jsx("div",{className:"viewer-header",children:p.jsx("div",{className:"viewer__label",children:t})}),l==="pinpoint"&&ge!==0&&p.jsxs("div",{className:"viewer__rotation-angle",children:[p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3L22 2"})}),p.jsxs("span",{children:[ge.toFixed(1),""]})]}),p.jsx("canvas",{ref:x,className:"viewer__canvas",style:{cursor:l==="pinpoint"&&O==="pin"?"crosshair":"grab"}}),!f&&p.jsx("div",{className:"viewer__placeholder",children:e?"Processing...":l==="pinpoint"?"Click Button Above to Select":"No Image"}),H&&f&&x.current&&l!=="pinpoint"&&(()=>{const T=x.current,{width:ue,height:ie}=T.getBoundingClientRect(),te=f.width,ae=f.height,$=R.scale,ee=ue/2-(R.cx||.5)*te*$,re=ie/2-(R.cy||.5)*ae*$,ne=H.cx*te,fe=H.cy*ae,me=ee+ne*$,ye=re+fe*$;return p.jsx("div",{className:"indicator-dot",style:{left:`${me}px`,top:`${ye}px`,position:"absolute"}},H.key)})(),J&&d instanceof ImageBitmap&&M&&p.jsx(W1,{bitmap:d,viewport:R,canvasSize:M,appMode:l,folderKey:h,overrideScale:a,pinpointGlobalScale:U,refPoint:o,rotationDeg:ge,width:ve,position:we})]})}),ks=({folderKey:e,folderState:t,onSelect:n,onClear:r,onUpdateAlias:i})=>{const[l,a]=Q.useState(!1),o=s=>{s.trim()&&s.trim()!==(t==null?void 0:t.alias)&&i(e,s.trim()),a(!1)};return t?p.jsxs("div",{className:"folder-control-card loaded",children:[p.jsxs("div",{className:"folder-control-header",children:[p.jsx("span",{className:"folder-key-label",children:e}),l?p.jsx("input",{type:"text",defaultValue:t.alias,onBlur:s=>o(s.target.value),onKeyDown:s=>{s.key==="Enter"&&o(s.target.value),s.key==="Escape"&&a(!1)},className:"alias-input",autoFocus:!0}):p.jsx("span",{className:"folder-name",title:t.alias,onDoubleClick:()=>a(!0),children:t.alias.length>4?`${t.alias.slice(0,4)}...`:t.alias})]}),p.jsxs("div",{className:"folder-path",title:t.data.name,children:[t.data.files.size," files"]}),p.jsxs("div",{className:"folder-actions",children:[p.jsx("button",{onClick:()=>n(e),title:"Change Folder",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),p.jsx("path",{d:"M12 11v6"}),p.jsx("path",{d:"m15 14-3 3-3-3"})]})}),p.jsx("button",{onClick:()=>r(e),title:"Clear Folder",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M18 6 6 18"}),p.jsx("path",{d:"m6 6 12 12"})]})})]})]}):p.jsxs("div",{className:"folder-control-card unloaded",children:[p.jsx("div",{className:"folder-control-header",children:p.jsx("span",{className:"folder-key-label",children:e})}),p.jsx("button",{className:"folder-select-button",onClick:()=>n(e),children:"Select Folder"})]})};function Ss({bitmapCache:e,pinpointImages:t}){var ue,ie;const{toggleModalOpen:n,closeToggleModal:r,selectedViewers:i,toggleCurrentIndex:l,setToggleCurrentIndex:a,current:o,folders:s,viewerFilters:h,viewerFilterParams:u,appMode:c,analysisFile:v,analysisFilters:y,analysisFilterParams:k,analysisRotation:w,pinpointScales:x,viewport:d,pinpointGlobalScale:m,setPinpointScale:f}=Fe(),_=Q.useRef(null),E=Q.useRef(new Map),[C,M]=Q.useState(null),[D,R]=Q.useState(""),[A,L]=Q.useState(""),[O,z]=Q.useState(""),[U,J]=Q.useState({width:800,height:600}),ce=Q.useCallback(()=>{setTimeout(()=>{const te=document.querySelector(".viewers");if(te){const fe=te.getBoundingClientRect(),me=window.innerWidth*.9,ye=window.innerHeight*.9;J({width:Math.min(fe.width,me),height:Math.min(fe.height,ye)});return}const $=window.innerHeight-120,ee=window.innerWidth,ne=ee-(c==="compare"||c==="pinpoint"?300:0);J({width:Math.min(ne,ee*.9),height:Math.min($,window.innerHeight*.9)})},100)},[c]);Q.useEffect(()=>{n&&ce()},[n,ce]),Q.useEffect(()=>(n?document.body.classList.add("toggle-modal-open"):document.body.classList.remove("toggle-modal-open"),()=>{document.body.classList.remove("toggle-modal-open")}),[n]);const q=i[l],F=()=>{var te;if(c==="compare"){const ae=q?s[q]:null,$=o&&ae?(te=Array.from(ae.data.files.entries()).find(([ne])=>ne===o.filename||ne.replace(/\.[^/.]+$/,"")===o.filename))==null?void 0:te[1]:void 0,ee=(ae==null?void 0:ae.alias)||q,re=o?`${ee}
${o.filename}`:"";return{file:$,label:re,folderKey:q}}if(c==="analysis"){const ae=parseInt(q),$=y[ae],ee=$&&$!=="none"?`[${$}]`:"",re=v?`Analysis
${v.name}${ee?`
`+ee:""}`:"";return{file:v,label:re,folderKey:ae}}if(c==="pinpoint"&&t){const ae=t[q],$=ae!=null&&ae.sourceKey?s[ae.sourceKey]:s[q];let re=ae!=null&&ae.sourceKey?($==null?void 0:$.alias)||ae.sourceKey:($==null?void 0:$.alias)||q;return ae!=null&&ae.file&&(re+=`
${ae.file.name}`),{file:ae==null?void 0:ae.file,label:re,folderKey:q}}return{file:void 0,label:"",folderKey:q}},{file:b,label:B,folderKey:G}=F(),Y=(()=>{let te=d.scale||1;if(c==="pinpoint"){const $=q;te=(x&&$&&x[$]!=null?x[$]:d.scale||1)*(m||1)}return`${Math.round((te||1)*100)}%`})();Q.useEffect(()=>{const te=parseInt(Y.replace("%",""));isNaN(te)||z(String(te))},[Y]);const pe=Q.useCallback(()=>{const te=parseFloat(O);if(isNaN(te))return;const ae=Math.max(Kn,Math.min(Yn,te/100));if(c==="pinpoint"){const $=q,re=ae/(m||1);f($,re)}else Fe.getState().setViewport({scale:ae})},[O,c,q,m,f]),ve=te=>{te.key==="Enter"&&(pe(),te.target.blur())};Q.useEffect(()=>{let te=!1;return(async()=>{try{if(!b){M(null);return}const ae=(b.name.split(".").pop()||"").toLowerCase();if(ae==="tif"||ae==="tiff"){const $=await ys(b,gs);te||M({width:$.width,height:$.height})}else{const $=await createImageBitmap(b);te||M({width:$.width,height:$.height})}}catch(ae){console.error("Failed to read image size in ToggleModal:",ae),te||M(null)}})(),()=>{te=!0}},[b]),Q.useEffect(()=>{if(!C){R(""),L("");return}const{cx:te,cy:ae}=d;typeof te=="number"&&typeof ae=="number"&&(R(Math.round(te*C.width).toString()),L(Math.round(ae*C.height).toString()))},[d.cx,d.cy,C]);const we=Q.useCallback(()=>{if(!C)return;const te=parseFloat(D),ae=parseFloat(A);if(isNaN(te)||isNaN(ae))return;const $=te/C.width,ee=ae/C.height,{setViewport:re,triggerIndicator:ne}=Fe.getState();re({cx:$,cy:ee}),ne($,ee)},[D,A,C]),xe=te=>{te.key==="Enter"&&(we(),te.target.blur())},X=Q.useCallback(()=>{if(i.length===0)return;const te=(l+1)%i.length;a(te)},[i.length,l,a]),ge=Q.useCallback(()=>{if(i.length===0)return;const te=(l-1+i.length)%i.length;a(te)},[i.length,l,a]),Ee=Q.useCallback(te=>{if(n)switch(te.key){case" ":te.preventDefault(),te.shiftKey?ge():X();break;case"Escape":r();break;case"ArrowRight":te.preventDefault(),X();break;case"ArrowLeft":te.preventDefault(),ge();break}},[n,X,ge,r]);if(Q.useEffect(()=>{if(n)return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},[n,Ee]),!n||i.length===0||c==="compare"&&!o||c==="analysis"&&!v||c==="pinpoint"&&(!t||!b))return null;const T=()=>c==="compare"&&o?`Toggle Mode - ${o.filename}`:c==="analysis"&&v?`Toggle Mode - ${v.name}`:c==="pinpoint"?"Toggle Mode - Pinpoint":"Toggle Mode";return p.jsx("div",{className:"toggle-modal-overlay",onClick:r,children:p.jsxs("div",{className:"toggle-modal",onClick:te=>te.stopPropagation(),style:{width:U.width+"px",height:U.height+"px",maxWidth:"90vw",maxHeight:"90vh"},children:[p.jsxs("div",{className:"toggle-modal-header",children:[p.jsx("h3",{children:T()}),p.jsxs("div",{className:"toggle-modal-actions",children:[p.jsxs("div",{className:"toggle-zoom",title:"Zoom",children:[p.jsx("input",{type:"text",value:O,onChange:te=>z(te.target.value),onBlur:pe,onKeyDown:ve}),p.jsx("span",{children:"%"})]}),c!=="pinpoint"&&p.jsxs("div",{className:"toggle-xy",children:[p.jsxs("label",{children:[p.jsx("span",{children:"X:"}),p.jsx("input",{type:"text",value:D,onChange:te=>R(te.target.value),onBlur:we,onKeyDown:xe,disabled:!C})]}),p.jsxs("label",{children:[p.jsx("span",{children:"Y:"}),p.jsx("input",{type:"text",value:A,onChange:te=>L(te.target.value),onBlur:we,onKeyDown:xe,disabled:!C})]})]}),p.jsx("button",{className:"close-btn",onClick:r,children:""})]})]}),p.jsxs("div",{className:"toggle-modal-content",children:[p.jsx("div",{className:"toggle-image-container",children:p.jsx(Oa,{ref:_,label:B,file:b,isReference:q==="A"||G===0,cache:e.current,filteredCache:E.current,appMode:c,folderKey:G,overrideFilterType:c==="analysis"?y[parseInt(q)]:h[q],overrideFilterParams:c==="analysis"?k[parseInt(q)]:u[q],rotation:c==="analysis"?w:void 0,overrideScale:c==="pinpoint"?x[q]:void 0,refPoint:c==="pinpoint"&&t&&((ue=t[q])==null?void 0:ue.refPoint)||null})}),p.jsxs("div",{className:"toggle-modal-info",children:[p.jsxs("div",{className:"current-viewer-info",children:[p.jsx("div",{className:"viewer-name",children:c==="analysis"?`Viewer ${parseInt(q)+1}`:c==="compare"?((ie=s[q])==null?void 0:ie.alias)||q:c==="pinpoint"?`Viewer ${q}`:q}),p.jsxs("div",{className:"viewer-position",children:[l+1," / ",i.length]})]}),p.jsxs("div",{className:"toggle-controls",children:[p.jsx("button",{className:"toggle-btn",onClick:ge,disabled:i.length<=1,children:" Previous"}),p.jsx("div",{className:"progress-bar",children:p.jsx("div",{className:"progress-fill",style:{width:`${(l+1)/i.length*100}%`}})}),p.jsx("button",{className:"toggle-btn",onClick:X,disabled:i.length<=1,children:"Next "})]}),p.jsxs("div",{className:"keyboard-hints",children:[p.jsx("div",{children:"Space: Next"}),p.jsx("div",{children:"Shift+Space: Previous"}),p.jsx("div",{children:"/: Navigate"}),p.jsx("div",{children:"Esc: Close"})]})]})]})]})})}const Ba=[{name:"None",type:"none",group:"General"},{name:"Grayscale",type:"grayscale",group:"General"},{name:"Invert",type:"invert",group:"General"},{name:"Sepia",type:"sepia",group:"General"},{name:"Linear Contrast Stretching",type:"linearstretch",group:"Contrast"},{name:"Histogram Equalization",type:"histogramequalization",group:"Contrast"},{name:"Local Histogram Equalization",type:"localhistogramequalization",group:"Contrast"},{name:"Adaptive Histogram Equalization",type:"adaptivehistogramequalization",group:"Contrast"},{name:"CLAHE",type:"clahe",group:"Contrast"},{name:"Gamma Correction",type:"gammacorrection",group:"Contrast"},{name:"Box Blur",type:"boxblur",group:"Blurring"},{name:"Gaussian Blur",type:"gaussianblur",group:"Blurring"},{name:"Median",type:"median",group:"Blurring"},{name:"Weighted Median",type:"weightedmedian",group:"Blurring"},{name:"Alpha-trimmed Mean",type:"alphatrimmedmean",group:"Blurring"},{name:"Sharpen",type:"sharpen",group:"Sharpening"},{name:"Unsharp Masking",type:"unsharpmask",group:"Sharpening"},{name:"High-pass Filter",type:"highpass",group:"Sharpening"},{name:"Laplacian",type:"laplacian",group:"Sharpening"},{name:"Sobel",type:"sobel",group:"Edge Detection"},{name:"Prewitt",type:"prewitt",group:"Edge Detection"},{name:"Scharr",type:"scharr",group:"Edge Detection"},{name:"Canny",type:"canny",group:"Edge Detection"},{name:"Roberts Cross",type:"robertscross",group:"Edge Detection"},{name:"LoG",type:"log",group:"Edge Detection"},{name:"DoG",type:"dog",group:"Edge Detection"},{name:"Marr-Hildreth",type:"marrhildreth",group:"Edge Detection"},{name:"Bilateral Filter",type:"bilateral",group:"Advanced Denoising"},{name:"Non-local Means",type:"nonlocalmeans",group:"Advanced Denoising"},{name:"Anisotropic Diffusion",type:"anisotropicdiffusion",group:"Advanced Denoising"},{name:"Gabor Filter",type:"gabor",group:"Texture Analysis"},{name:"Laws Texture Energy",type:"lawstextureenergy",group:"Texture Analysis"},{name:"Local Binary Patterns",type:"lbp",group:"Texture Analysis"},{name:"Guided Filter",type:"guided",group:"Edge-preserving Filter"},{name:"Edge-preserving (Approx.)",type:"edgepreserving",group:"Edge-preserving Filter"},{name:"Discrete Fourier Transform (DFT)",type:"dft",group:"Frequency Domain"},{name:"Discrete Cosine Transform (DCT)",type:"dct",group:"Frequency Domain"},{name:"Wavelet Transform",type:"wavelet",group:"Frequency Domain"},{name:"Morphology - Opening",type:"morph_open",group:"Morphology"},{name:"Morphology - Closing",type:"morph_close",group:"Morphology"},{name:"Morphology - Top-hat",type:"morph_tophat",group:"Morphology"},{name:"Morphology - Black-hat",type:"morph_blackhat",group:"Morphology"},{name:"Morphology - Gradient",type:"morph_gradient",group:"Morphology"},{name:"Distance Transform",type:"distancetransform",group:"Morphology"}],Qp=["General","Contrast","Blurring","Sharpening","Edge Detection","Advanced Denoising","Texture Analysis","Edge-preserving Filter","Frequency Domain","Morphology"],Jp=()=>{const{activeFilterEditor:e,tempViewerFilter:t,tempViewerFilterParams:n,closeFilterEditor:r,setTempFilterType:i,setTempFilterParams:l,applyTempFilterSettings:a}=Fe();if(e===null)return null;const o=(u,c)=>{const v=parseFloat(c);isNaN(v)||l({[u]:v})},s=(u,c)=>{l({[u]:c})},h=()=>{switch(t){case"edgepreserving":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??5,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??5})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma Color"}),p.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.sigmaColor??25,onChange:u=>o("sigmaColor",u.target.value)}),p.jsx("span",{children:n.sigmaColor??25})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma Space"}),p.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.sigmaSpace??25,onChange:u=>o("sigmaSpace",u.target.value)}),p.jsx("span",{children:n.sigmaSpace??25})]})]});case"morph_open":case"morph_close":case"morph_tophat":case"morph_blackhat":case"morph_gradient":return p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"25",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]});case"distancetransform":return p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Threshold"}),p.jsx("input",{type:"range",min:"0",max:"255",step:"1",value:n.lowThreshold??128,onChange:u=>o("lowThreshold",u.target.value)}),p.jsx("span",{children:n.lowThreshold??128})]});case"boxblur":case"median":case"weightedmedian":case"localhistogramequalization":return p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]});case"gaussianblur":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma"}),p.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:n.sigma??1,onChange:u=>o("sigma",u.target.value)}),p.jsx("span",{children:(n.sigma??1).toFixed(1)})]})]});case"log":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma"}),p.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:n.sigma??1,onChange:u=>o("sigma",u.target.value)}),p.jsx("span",{children:(n.sigma??1).toFixed(1)})]})]});case"dog":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma 1"}),p.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:n.sigma??1,onChange:u=>o("sigma",u.target.value)}),p.jsx("span",{children:(n.sigma??1).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma 2"}),p.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:n.sigma2??2,onChange:u=>o("sigma2",u.target.value)}),p.jsx("span",{children:(n.sigma2??2).toFixed(1)})]})]});case"marrhildreth":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??9,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??9})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma"}),p.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:n.sigma??1.4,onChange:u=>o("sigma",u.target.value)}),p.jsx("span",{children:(n.sigma??1.4).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Threshold"}),p.jsx("input",{type:"range",min:"0",max:"255",step:"1",value:n.threshold??10,onChange:u=>o("threshold",u.target.value)}),p.jsx("span",{children:n.threshold??10})]})]});case"alphatrimmedmean":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Alpha"}),p.jsx("input",{type:"range",min:"0",max:"0.5",step:"0.05",value:n.alpha??0,onChange:u=>o("alpha",u.target.value)}),p.jsx("span",{children:(n.alpha??0).toFixed(2)})]})]});case"sharpen":return p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Amount"}),p.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:n.sharpenAmount??1,onChange:u=>o("sharpenAmount",u.target.value)}),p.jsx("span",{children:(n.sharpenAmount??1).toFixed(1)})]});case"canny":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Low Threshold"}),p.jsx("input",{type:"range",min:"1",max:"254",value:n.lowThreshold??20,onChange:u=>o("lowThreshold",u.target.value)}),p.jsx("span",{children:n.lowThreshold??20})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"High Threshold"}),p.jsx("input",{type:"range",min:"1",max:"254",value:n.highThreshold??50,onChange:u=>o("highThreshold",u.target.value)}),p.jsx("span",{children:n.highThreshold??50})]})]});case"adaptivehistogramequalization":return p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Grid Size"}),p.jsx("input",{type:"range",min:"2",max:"16",step:"1",value:n.gridSize??8,onChange:u=>o("gridSize",u.target.value)}),p.jsx("span",{children:n.gridSize??8})]});case"clahe":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Clip Limit"}),p.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:n.clipLimit??2,onChange:u=>o("clipLimit",u.target.value)}),p.jsx("span",{children:(n.clipLimit??2).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Grid Size"}),p.jsx("input",{type:"range",min:"2",max:"16",step:"1",value:n.gridSize??8,onChange:u=>o("gridSize",u.target.value)}),p.jsx("span",{children:n.gridSize??8})]})]});case"gammacorrection":return p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Gamma"}),p.jsx("input",{type:"range",min:"0.2",max:"2.2",step:"0.1",value:n.gamma??1,onChange:u=>o("gamma",u.target.value)}),p.jsx("span",{children:(n.gamma??1).toFixed(1)})]});case"bilateral":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??3,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??3})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma Color"}),p.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.sigmaColor??20,onChange:u=>o("sigmaColor",u.target.value)}),p.jsx("span",{children:n.sigmaColor??20})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma Space"}),p.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.sigmaSpace??20,onChange:u=>o("sigmaSpace",u.target.value)}),p.jsx("span",{children:n.sigmaSpace??20})]})]});case"nonlocalmeans":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Patch Size"}),p.jsx("input",{type:"range",min:"3",max:"9",step:"2",value:n.patchSize??5,onChange:u=>o("patchSize",u.target.value)}),p.jsx("span",{children:n.patchSize??5})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Search Window"}),p.jsx("input",{type:"range",min:"5",max:"21",step:"2",value:n.searchWindowSize??11,onChange:u=>o("searchWindowSize",u.target.value)}),p.jsx("span",{children:n.searchWindowSize??11})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"H (Smoothing)"}),p.jsx("input",{type:"range",min:"1",max:"50",step:"1",value:n.h??10,onChange:u=>o("h",u.target.value)}),p.jsx("span",{children:n.h??10})]})]});case"anisotropicdiffusion":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Iterations"}),p.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.iterations??10,onChange:u=>o("iterations",u.target.value)}),p.jsx("span",{children:n.iterations??10})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kappa"}),p.jsx("input",{type:"range",min:"1",max:"100",step:"1",value:n.kappa??20,onChange:u=>o("kappa",u.target.value)}),p.jsx("span",{children:n.kappa??20})]})]});case"unsharpmask":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"21",step:"2",value:n.kernelSize??5,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??5})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma"}),p.jsx("input",{type:"range",min:"0.1",max:"10",step:"0.1",value:n.sigma??1,onChange:u=>o("sigma",u.target.value)}),p.jsx("span",{children:(n.sigma??1).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Amount"}),p.jsx("input",{type:"range",min:"0.1",max:"5",step:"0.1",value:n.sharpenAmount??1,onChange:u=>o("sharpenAmount",u.target.value)}),p.jsx("span",{children:(n.sharpenAmount??1).toFixed(1)})]})]});case"gabor":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Size"}),p.jsx("input",{type:"range",min:"3",max:"31",step:"2",value:n.kernelSize??15,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??15})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Theta ()"}),p.jsx("input",{type:"range",min:"0",max:"3.14",step:"0.1",value:n.theta??0,onChange:u=>o("theta",u.target.value)}),p.jsx("span",{children:(n.theta??0).toFixed(2)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Sigma ()"}),p.jsx("input",{type:"range",min:"1",max:"10",step:"0.5",value:n.sigma??4,onChange:u=>o("sigma",u.target.value)}),p.jsx("span",{children:(n.sigma??4).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Lambda ()"}),p.jsx("input",{type:"range",min:"3",max:"20",step:"1",value:n.lambda??10,onChange:u=>o("lambda",u.target.value)}),p.jsx("span",{children:(n.lambda??10).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Gamma ()"}),p.jsx("input",{type:"range",min:"0.2",max:"1",step:"0.1",value:n.gamma??.5,onChange:u=>o("gamma",u.target.value)}),p.jsx("span",{children:(n.gamma??.5).toFixed(1)})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Psi ()"}),p.jsx("input",{type:"range",min:"0",max:"3.14",step:"0.1",value:n.psi??0,onChange:u=>o("psi",u.target.value)}),p.jsx("span",{children:(n.psi??0).toFixed(2)})]})]});case"lawstextureenergy":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Kernel Type"}),p.jsx("select",{value:n.lawsKernelType??"L5E5",onChange:u=>s("lawsKernelType",u.target.value),children:Xp.map(u=>p.jsx("option",{value:u,children:u},u))})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Energy Window"}),p.jsx("input",{type:"range",min:"3",max:"25",step:"2",value:n.kernelSize??15,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??15})]})]});case"guided":return p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Radius"}),p.jsx("input",{type:"range",min:"1",max:"20",step:"1",value:n.kernelSize??5,onChange:u=>o("kernelSize",u.target.value)}),p.jsx("span",{children:n.kernelSize??5})]}),p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Epsilon"}),p.jsx("input",{type:"range",min:"0.01",max:"0.2",step:"0.01",value:n.epsilon??.04,onChange:u=>o("epsilon",u.target.value)}),p.jsx("span",{children:(n.epsilon??.04).toFixed(2)})]})]});default:return p.jsx("p",{children:"No parameters for this filter."})}};return p.jsx("div",{className:"filter-controls-overlay",children:p.jsxs("div",{className:"filter-controls-panel",children:[p.jsxs("div",{className:"panel-header",children:[p.jsxs("h3",{children:["Filter Editor (View ",e,")"]}),p.jsx("button",{onClick:r,className:"close-btn",children:""})]}),p.jsxs("div",{className:"panel-body",children:[p.jsxs("div",{className:"control-row",children:[p.jsx("label",{children:"Filter Type"}),p.jsx("select",{value:t,onChange:u=>i(u.target.value),children:Qp.map(u=>p.jsx("optgroup",{label:u,children:Ba.filter(c=>c.group===u).map(c=>p.jsx("option",{value:c.type,children:c.name},c.type))},u))})]}),p.jsx("div",{className:"params-container",children:h()})]}),p.jsx("div",{className:"panel-footer",children:p.jsx("button",{onClick:a,className:"apply-btn",children:"Apply Filter"})})]})})},qp=Q.forwardRef(({numViewers:e,bitmapCache:t,setPrimaryFile:n,showControls:r},i)=>{const l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],{pick:a,inputRefs:o,onInput:s,updateAlias:h,allFolders:u}=ms(),{current:c,setCurrent:v,stripExt:y,setStripExt:k,openFilterEditor:w,viewerFilters:x,clearFolder:d,viewerRows:m,viewerCols:f,selectedViewers:_,setSelectedViewers:E,toggleModalOpen:C,openToggleModal:M,closeToggleModal:D}=Fe(),[R,A]=Q.useState(""),L=l.reduce((B,G)=>(B[G]=Q.useRef(null),B),{});Q.useImperativeHandle(i,()=>({capture:async({showLabels:B,showMinimap:G})=>{var te,ae;const H=l.slice(0,e),Y=(ae=(te=L[H[0]])==null?void 0:te.current)==null?void 0:ae.getCanvas();if(!Y)return null;const{width:pe,height:ve}=Y,we=H.map($=>{const ee=L[$].current;if(!ee)return null;const re=document.createElement("canvas");re.width=pe,re.height=ve;const ne=re.getContext("2d");return ne?(ee.drawToContext(ne,!1,G),re):null}).filter($=>!!$);if(we.length===0)return null;const xe=f,X=m,ge=pe*xe,Ee=ve*X,T=document.createElement("canvas");T.width=ge,T.height=Ee;const ue=T.getContext("2d");if(!ue)return null;ue.fillStyle="#111",ue.fillRect(0,0,ge,Ee);const ie=2;return ue.fillStyle="#000",we.forEach(($,ee)=>{var ye;const re=ee%xe,ne=Math.floor(ee/xe),fe=re*pe,me=ne*ve;if(ue.drawImage($,fe,me),re>0&&ue.fillRect(fe-ie/2,me,ie,ve),ne>0&&ue.fillRect(fe,me-ie/2,pe,ie),B){const Ae=H[ee],Se=[],Re=((ye=u[Ae])==null?void 0:ye.alias)||Ae;Se.push(Re),c!=null&&c.filename&&Se.push(c.filename);const Le=ce(x[Ae]);Le&&Se.push(`[${Le}]`),ue.font="16px sans-serif";const Ne=20,De=Se.map(Ie=>ue.measureText(Ie)),ze=Math.max(...De.map(Ie=>Ie.width));ue.fillStyle="rgba(0, 0, 0, 0.7)",ue.fillRect(fe+5,me+5,ze+10,Se.length*Ne),ue.fillStyle="white",Se.forEach((Ie,N)=>{ue.fillText(Ie,fe+10,me+22+N*(Ne-4))})}}),T.toDataURL("image/png")}}));const O=(B,G)=>{if(!G)return;const H=u[B];if(!(H!=null&&H.data.files))return;const Y=y?Array.from(H.data.files.keys()).find(pe=>pe.replace(/\.[^/.]+$/,"")===G.filename):G.filename;return Y?H.data.files.get(Y):void 0};Q.useEffect(()=>{const B=O("A",c);n(B||null)},[c,u,n]);const z=Q.useMemo(()=>l.slice(0,e).reduce((B,G)=>{var H;return(H=u[G])!=null&&H.data.files&&(B[G]=u[G].data.files),B},{}),[u,e]),U=Q.useMemo(()=>B1(z,y),[z,y]),J=Q.useMemo(()=>R?U.filter(B=>B.filename.toLowerCase().includes(R.toLowerCase())):U,[U,R]),ce=B=>{var G;return!B||B==="none"?null:((G=Ba.find(H=>H.type===B))==null?void 0:G.name)||"Unknown"},q=B=>{const G=_.includes(B)?_.filter(H=>H!==B):[..._,B];E(G)},F=()=>{_.length===0||!c||M()};Q.useEffect(()=>{const B=G=>{G.key===" "&&!C&&_.length>0&&c&&(G.preventDefault(),F())};return window.addEventListener("keydown",B),()=>window.removeEventListener("keydown",B)},[C,_.length,c]);const b={"--viewers":e,"--cols":f,"--rows":m};return p.jsxs(p.Fragment,{children:[r&&p.jsxs("div",{className:"controls",children:[l.slice(0,e).map(B=>p.jsx(ks,{folderKey:B,folderState:u[B],onSelect:a,onClear:d,onUpdateAlias:h},B)),p.jsx("div",{style:{display:"none"},children:l.map(B=>p.jsx("input",{ref:o[B],type:"file",webkitdirectory:"",multiple:!0,onChange:G=>s(B,G)},B))})]}),p.jsxs("main",{className:"compare-mode-main",children:[p.jsxs("aside",{className:"filelist",children:[p.jsxs("div",{className:"filelist-header",children:[p.jsx("input",{type:"text",placeholder:"Search files...",value:R,onChange:B=>A(B.target.value)}),p.jsxs("div",{className:"filelist-options",children:[p.jsxs("div",{className:"count",children:["Matched: ",J.length]}),p.jsxs("label",{className:"strip-ext-label",children:[p.jsx("input",{type:"checkbox",checked:y,onChange:B=>k(B.target.checked)}),p.jsx("span",{children:"Ignore extension"})]})]})]}),p.jsx("ul",{children:J.map(B=>p.jsx("li",{className:(c==null?void 0:c.filename)===B.filename?"active":"",onClick:()=>v(B),children:B.filename},B.filename))})]}),p.jsx("section",{className:"viewers",style:b,children:l.slice(0,e).map(B=>{var ve,we;const G=[],H=((ve=u[B])==null?void 0:ve.alias)||B;G.push(H),c!=null&&c.filename&&G.push(c.filename);const Y=ce(x[B]);Y&&G.push(`[${Y}]`);const pe=G.join(`
`);return p.jsxs("div",{className:`viewer-container ${_.includes(B)?"selected":""}`,children:[p.jsx(Oa,{ref:L[B],label:pe,file:O(B,c),isReference:B==="A",cache:t.current,appMode:"compare",folderKey:B}),p.jsxs("div",{className:"viewer-controls",children:[p.jsx("button",{className:`viewer-select-btn ${_.includes(B)?"selected":""}`,onClick:()=>q(B),title:`Select viewer ${B} for toggle`,children:_.includes(B)?"":""}),p.jsx("button",{className:"viewer__filter-button",title:`Filter Settings for ${((we=u[B])==null?void 0:we.alias)||B}`,onClick:()=>w(B),children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),p.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),p.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),p.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),p.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),p.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),p.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),p.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})})]})]},B)})})]}),p.jsx(Ss,{bitmapCache:t})]})});function ev({folderKey:e}){const{pinpointRotations:t,setPinpointRotation:n}=Fe(),r=t[e]||0,[i,l]=Q.useState(r.toFixed(1)),a=Q.useRef(null),o=Q.useRef(0),s=Q.useRef(0);Q.useEffect(()=>{parseFloat(i)!==r&&l(r.toFixed(1))},[r]);const h=Q.useCallback(x=>{const m=(Math.round(x*10)/10%360+360)%360;n(e,m)},[e,n]),u=Q.useCallback(x=>{const d=Fe.getState().pinpointRotations[e]||0;h(d+x)},[e,h]),c=Q.useCallback(x=>{const d=performance.now();s.current=d,o.current=0;const m=f=>{const _=f-d;_>2e3?o.current=3:_>1e3?o.current=2:_>400&&(o.current=1);let E=0,C=0;switch(o.current){case 1:E=.1,C=100;break;case 2:E=1,C=50;break;case 3:E=5,C=25;break;default:a.current=requestAnimationFrame(m);return}f-s.current>C&&(u(E*x),s.current=f),a.current=requestAnimationFrame(m)};u(.1*x),a.current=requestAnimationFrame(m)},[u]),v=Q.useCallback(()=>{a.current&&(cancelAnimationFrame(a.current),a.current=null)},[]),y=x=>{l(x.target.value)},k=()=>{const x=parseFloat(i);isNaN(x)?l(r.toFixed(1)):h(x)},w=x=>{x.key==="Enter"&&(k(),x.target.blur())};return p.jsxs("div",{className:"pinpoint-rotation-control",children:[p.jsx("button",{onMouseDown:()=>c(-1),onMouseUp:v,onMouseLeave:v,title:"Rotate Left (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3L22 2"})})}),p.jsxs("div",{className:"rotation-input-wrapper",children:[p.jsx("input",{type:"number",step:"0.1",value:i,onChange:y,onBlur:k,onKeyDown:w,title:"Rotation Angle"}),p.jsx("span",{className:"degree-symbol",children:""})]}),p.jsx("button",{onMouseDown:()=>c(1),onMouseUp:v,onMouseLeave:v,title:"Rotate Right (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M2.5 22v-6h6M21.5 2v6h-6M22 12.5a10 10 0 0 1-18.8 4.3L2 22"})})}),p.jsx("button",{onClick:()=>h(0),title:"Reset Rotation",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M3 3l18 18"})})})]})}function tv({folderKey:e}){const{pinpointScales:t,setPinpointScale:n,viewport:r,pinpointGlobalScale:i}=Fe(),l=t[e]??r.scale,a=l*i,[o,s]=Q.useState((l*100).toFixed(0));Q.useEffect(()=>{Math.round(parseFloat(o))!==Math.round(l*100)&&s((l*100).toFixed(0))},[l,a]);const h=k=>{const w=Math.max(Kn/i,Math.min(Yn/i,k));n(e,w)},u=k=>{s(k.target.value)},c=()=>{const k=parseFloat(o)/100;!isNaN(k)&&k>0?h(k):s((l*100).toFixed(0))},v=k=>{k.key==="Enter"&&(c(),k.target.blur())},y=k=>{h(l*k)};return p.jsxs("div",{className:"pinpoint-scale-control",children:[p.jsx("button",{onClick:()=>y(1/xo),title:"Zoom Out",children:"-"}),p.jsxs("div",{className:"scale-inputs",children:[p.jsx("input",{type:"number",value:o,onChange:u,onBlur:c,onKeyDown:v,title:"Individual Scale"}),p.jsxs("span",{className:"total-scale",title:"Total Scale (Individual  Global)",children:["/ ",(a*100).toFixed(0),"%"]})]}),p.jsx("button",{onClick:()=>y(xo),title:"Zoom In",children:"+"})]})}const nv=Q.forwardRef(({numViewers:e,bitmapCache:t,setPrimaryFile:n,showControls:r},i)=>{const l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],{pick:a,inputRefs:o,onInput:s,updateAlias:h,allFolders:u}=ms(),{setCurrent:c,setViewport:v,pinpointScales:y,setPinpointScale:k,activeCanvasKey:w,setActiveCanvasKey:x,clearFolder:d,openFilterEditor:m,viewerFilters:f,viewerFilterParams:_,viewerRows:E,viewerCols:C,selectedViewers:M,setSelectedViewers:D,toggleModalOpen:R,openToggleModal:A,closeToggleModal:L}=Fe(),[O,z]=Q.useState({}),[U,J]=Q.useState(""),[ce,q]=Q.useState("all"),F=X=>{var ge;return!X||X==="none"?null:((ge=Ba.find(Ee=>Ee.type===X))==null?void 0:ge.name)||"Unknown"},b=X=>{const ge=M.includes(X)?M.filter(Ee=>Ee!==X):[...M,X];D(ge)},B=()=>{M.length===0||!M.some(ge=>{var Ee;return(Ee=O[ge])==null?void 0:Ee.file})||A()};Q.useEffect(()=>{const X=ge=>{ge.key===" "&&!R&&M.length>0&&(ge.preventDefault(),B())};return window.addEventListener("keydown",X),()=>window.removeEventListener("keydown",X)},[R,M.length,O]);const G=l.reduce((X,ge)=>(X[ge]=Q.useRef(null),X),{});Q.useImperativeHandle(i,()=>({capture:async({showLabels:X,showCrosshair:ge,showMinimap:Ee})=>{var Ae,Se;const T=l.slice(0,e),ue=(Se=(Ae=G[T[0]])==null?void 0:Ae.current)==null?void 0:Se.getCanvas();if(!ue)return null;const{width:ie,height:te}=ue,ae=T.map(Re=>{const Le=G[Re].current;if(!Le)return null;const Ne=document.createElement("canvas");Ne.width=ie,Ne.height=te;const De=Ne.getContext("2d");return De?(Le.drawToContext(De,ge,Ee),Ne):null}).filter(Re=>!!Re);if(ae.length===0)return null;const $=C,ee=E,re=ie*$,ne=te*ee,fe=document.createElement("canvas");fe.width=re,fe.height=ne;const me=fe.getContext("2d");if(!me)return null;me.fillStyle="#111",me.fillRect(0,0,re,ne);const ye=2;return me.fillStyle="#000",ae.forEach((Re,Le)=>{var N,le;const Ne=Le%$,De=Math.floor(Le/$),ze=Ne*ie,Ie=De*te;if(me.drawImage(Re,ze,Ie),Ne>0&&me.fillRect(ze-ye/2,Ie,ye,te),De>0&&me.fillRect(ze,Ie-ye/2,ie,ye),X){const oe=T[Le],de=O[oe],P=de!=null&&de.sourceKey?((N=u[de.sourceKey])==null?void 0:N.alias)||de.sourceKey:((le=u[oe])==null?void 0:le.alias)||oe,Z=F(f[oe]),S=[];S.push(P),de!=null&&de.file&&S.push(de.file.name),Z&&S.push(`[${Z}]`),me.font="16px sans-serif";const se=20,je=S.map(W=>me.measureText(W)),g=Math.max(...je.map(W=>W.width));me.fillStyle="rgba(0, 0, 0, 0.7)",me.fillRect(ze+5,Ie+5,g+10,S.length*se),me.fillStyle="white",S.forEach((W,K)=>{me.fillText(W,ze+10,Ie+22+K*(se-4))})}}),fe.toDataURL("image/png")}}));const H=Q.useMemo(()=>l.slice(0,e),[e]),Y=Q.useMemo(()=>{const X=[],ge=Ee=>{const T=u[Ee];if(T!=null&&T.data.files){const ue=T.alias||Ee;T.data.files.forEach(ie=>{X.push({file:ie,source:ue,folderKey:Ee})})}};return ce==="all"?H.forEach(Ee=>{ge(Ee)}):ge(ce),X.sort((Ee,T)=>Ee.file.name<T.file.name?-1:Ee.file.name>T.file.name?1:Ee.source<T.source?-1:Ee.source>T.source?1:0)},[ce,u,H]),pe=Q.useMemo(()=>U?Y.filter(({file:X})=>X.name.toLowerCase().includes(U.toLowerCase())):Y,[Y,U]);Q.useEffect(()=>{var ge;const X=(ge=O.A)==null?void 0:ge.file;n(X||null)},[O,n]);const ve=(X,ge,Ee)=>{z(T=>{const ue=T[X];return ue?{...T,[X]:{...ue,refPoint:ge}}:T}),v({refScreenX:Ee.x,refScreenY:Ee.y})},we=(X,ge)=>{var ue;if(!w){console.warn("No active viewer. Click a viewer to select it first.");return}c(null);const Ee=O[w],T=Ee&&((ue=Ee.file)==null?void 0:ue.name)===X.name?Ee.refPoint:{x:.5,y:.5};z(ie=>({...ie,[w]:{file:X,refPoint:T,sourceKey:ge}}))},xe={"--viewers":e,"--cols":C,"--rows":E};return Q.useEffect(()=>{w&&!H.includes(w)&&x(null)},[H,w,x]),p.jsxs(p.Fragment,{children:[r&&p.jsx("div",{className:"controls",children:H.map(X=>p.jsx(ks,{folderKey:X,folderState:u[X],onSelect:a,onClear:d,onUpdateAlias:h},X))}),p.jsxs("main",{className:"pinpoint-mode-main",children:[p.jsxs("aside",{className:"filelist",children:[p.jsxs("div",{className:"filelist-header",children:[p.jsx("input",{type:"text",placeholder:"Search files...",value:U,onChange:X=>J(X.target.value)}),p.jsxs("div",{className:"filelist-options",children:[p.jsxs("div",{className:"count",children:["Files: ",pe.length]}),p.jsxs("select",{value:ce,onChange:X=>q(X.target.value),children:[p.jsx("option",{value:"all",children:"All Folders"}),H.map(X=>{var ge;return u[X]&&p.jsxs("option",{value:X,children:["Folder ",((ge=u[X])==null?void 0:ge.alias)||X]},X)})]})]})]}),p.jsx("ul",{children:pe.map(({file:X,source:ge,folderKey:Ee})=>{const T=Object.values(O).some(ue=>(ue==null?void 0:ue.file)===X&&ue.sourceKey===Ee);return p.jsx("li",{className:T?"active":"",onClick:()=>we(X,Ee),children:p.jsxs("div",{className:"file-info",children:[p.jsx("span",{className:"file-name",children:X.name}),p.jsxs("span",{className:"file-source",children:["from ",ge]})]})},`${Ee}-${X.webkitRelativePath||X.name}-${X.lastModified}`)})})]}),p.jsx("section",{className:"viewers",style:xe,onClick:X=>{X.target===X.currentTarget&&x(null)},children:H.map(X=>{var te,ae,$;const ge=O[X],Ee=ge!=null&&ge.sourceKey?((te=u[ge.sourceKey])==null?void 0:te.alias)||ge.sourceKey:((ae=u[X])==null?void 0:ae.alias)||X,T=F(f[X]),ue=[];ue.push(Ee),ge!=null&&ge.file&&ue.push(ge.file.name),T&&ue.push(`[${T}]`);const ie=ue.join(`
`);return p.jsxs("div",{className:`viewer-container ${M.includes(X)?"selected":""}`,children:[p.jsx(Oa,{ref:G[X],label:ie,file:(ge==null?void 0:ge.file)||void 0,isReference:X==="A",cache:t.current,appMode:"pinpoint",overrideScale:y[X],refPoint:ge==null?void 0:ge.refPoint,onSetRefPoint:ve,folderKey:X,onClick:ee=>x(ee),isActive:w===X,overrideFilterType:f[X],overrideFilterParams:_[X]}),p.jsxs("div",{className:"viewer-controls",children:[p.jsx("button",{className:`viewer-select-btn ${M.includes(X)?"selected":""}`,onClick:()=>b(X),title:`Select viewer ${X} for toggle`,children:M.includes(X)?"":""}),p.jsx("button",{className:"viewer__filter-button",title:`Filter Settings for ${(($=u[X])==null?void 0:$.alias)||X}`,onClick:()=>m(X),children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),p.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),p.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),p.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),p.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),p.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),p.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),p.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})}),p.jsx(ev,{folderKey:X})]}),p.jsx(tv,{folderKey:X})]},X)})})]}),p.jsx("div",{style:{display:"none"},children:l.map(X=>p.jsx("input",{ref:o[X],type:"file",webkitdirectory:"",multiple:!0,onChange:ge=>s(X,ge)},X))}),p.jsx(Ss,{bitmapCache:t,pinpointImages:O})]})}),rv=Q.forwardRef(({numViewers:e,bitmapCache:t,setPrimaryFile:n,showControls:r},i)=>{const l=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],{analysisFile:a,setAnalysisFile:o,analysisFileSource:s,analysisFilters:h,analysisFilterParams:u,analysisRotation:c,openFilterEditor:v,viewerRows:y,viewerCols:k,selectedViewers:w,setSelectedViewers:x,toggleModalOpen:d,openToggleModal:m,closeToggleModal:f}=Fe(),{pick:_,inputRefs:E,onInput:C,allFolders:M,updateAlias:D,clearFolder:R}=ms(),A=Q.useRef(new Map),[L,O]=Q.useState(""),[z,U]=Q.useState("all");Q.useMemo(()=>l.slice(0,e),[e]),Q.useImperativeHandle(i,()=>({capture:async({showLabels:H,showMinimap:Y})=>{const pe=A.current.get(0);if(!pe)return null;const ve=pe.getCanvas();if(!ve)return null;const{width:we,height:xe}=ve,X=Array.from({length:e}).map(($,ee)=>{const re=A.current.get(ee);if(!re)return null;const ne=document.createElement("canvas");ne.width=we,ne.height=xe;const fe=ne.getContext("2d");return fe?(re.drawToContext(fe,!1,Y),ne):null}).filter($=>!!$);if(X.length===0)return null;const ge=k,Ee=y,T=we*ge,ue=xe*Ee,ie=document.createElement("canvas");ie.width=T,ie.height=ue;const te=ie.getContext("2d");if(!te)return null;te.fillStyle="#111",te.fillRect(0,0,T,ue);const ae=2;return te.fillStyle="#000",X.forEach(($,ee)=>{const re=ee%ge,ne=Math.floor(ee/ge),fe=re*we,me=ne*xe;if(te.drawImage($,fe,me),re>0&&te.fillRect(fe-ae/2,me,ae,xe),ne>0&&te.fillRect(fe,me-ae/2,we,ae),H){const ye=[];s&&ye.push(s),a&&ye.push(a.name);const Ae=F(h[ee]);Ae&&ye.push(`[${Ae}]`),te.font="16px sans-serif";const Se=20,Re=ye.map(Ne=>te.measureText(Ne)),Le=Math.max(...Re.map(Ne=>Ne.width));te.fillStyle="rgba(0, 0, 0, 0.7)",te.fillRect(fe+5,me+5,Le+10,ye.length*Se),te.fillStyle="white",ye.forEach((Ne,De)=>{te.fillText(Ne,fe+10,me+22+De*(Se-4))})}}),ie.toDataURL("image/png")}}));const J=Q.useMemo(()=>{const H=[],Y=pe=>{const ve=M[pe];if(ve!=null&&ve.data.files){const we=ve.alias||pe;ve.data.files.forEach(xe=>{H.push({file:xe,source:we})})}};return z==="all"?l.forEach(pe=>{M[pe]&&Y(pe)}):Y(z),H.sort((pe,ve)=>pe.file.name.localeCompare(ve.file.name))},[z,M]),ce=Q.useMemo(()=>L?J.filter(({file:H})=>H.name.toLowerCase().includes(L.toLowerCase())):J,[J,L]);Q.useEffect(()=>{n(a)},[a,n]);const q=(H,Y)=>{o(H,Y)},F=H=>{var Y;return!H||H==="none"?null:((Y=Ba.find(pe=>pe.type===H))==null?void 0:Y.name)||"Unknown Filter"},b=H=>{const Y=H.toString(),pe=w.includes(Y)?w.filter(ve=>ve!==Y):[...w,Y];x(pe)},B=()=>{w.length===0||!a||m()};Q.useEffect(()=>{const H=Y=>{Y.key===" "&&!d&&w.length>0&&a&&(Y.preventDefault(),B())};return window.addEventListener("keydown",H),()=>window.removeEventListener("keydown",H)},[d,w.length,a]);const G={"--cols":k,"--rows":y};return p.jsxs(p.Fragment,{children:[r&&p.jsxs("div",{className:"controls",children:[l.slice(0,e).map(H=>p.jsx(ks,{folderKey:H,folderState:M[H],onSelect:_,onClear:R,onUpdateAlias:D},H)),p.jsx("div",{style:{display:"none"},children:l.map(H=>p.jsx("input",{ref:E[H],type:"file",webkitdirectory:"",multiple:!0,onChange:Y=>C(H,Y)},H))})]}),p.jsxs("main",{className:"compare-mode-main",children:[p.jsxs("aside",{className:"filelist",children:[p.jsxs("div",{className:"filelist-header",children:[p.jsx("input",{type:"text",placeholder:"Search files...",value:L,onChange:H=>O(H.target.value),disabled:Object.keys(M).length===0}),p.jsxs("div",{className:"filelist-options",children:[p.jsxs("div",{className:"count",children:["Files: ",ce.length]}),p.jsxs("select",{value:z,onChange:H=>U(H.target.value),children:[p.jsx("option",{value:"all",children:"All Folders"}),l.map(H=>{var Y;return M[H]&&p.jsxs("option",{value:H,children:["Folder ",((Y=M[H])==null?void 0:Y.alias)||H]},H)})]})]})]}),p.jsx("ul",{children:ce.map(({file:H,source:Y})=>p.jsx("li",{className:(a==null?void 0:a.name)===H.name?"active":"",onClick:()=>q(H,Y),children:p.jsxs("div",{className:"file-info",children:[p.jsx("span",{className:"file-name",children:H.name}),p.jsxs("span",{className:"file-source",children:["from ",Y]})]})},`${Y}-${H.name}`))})]}),p.jsx("section",{className:"viewers",style:G,children:a?Array.from({length:e}).map((H,Y)=>{const pe=F(h[Y]),ve=[];s&&ve.push(s),a&&ve.push(a.name),pe&&ve.push(`[${pe}]`);const we=ve.join(`
`),xe=w.includes(Y.toString());return p.jsxs("div",{className:`viewer-container ${xe?"selected":""}`,children:[p.jsx(Oa,{ref:X=>X?A.current.set(Y,X):A.current.delete(Y),file:a,label:we,cache:t.current,appMode:"analysis",folderKey:Y,isActive:!1,overrideFilterType:h[Y],overrideFilterParams:u[Y],rotation:c}),p.jsxs("div",{className:"viewer-controls",children:[p.jsx("button",{className:`viewer-select-btn ${w.includes(Y.toString())?"selected":""}`,onClick:()=>b(Y),title:`Select viewer ${Y+1} for toggle`,children:w.includes(Y.toString())?"":""}),p.jsx("button",{className:"viewer__filter-button",title:`Filter Settings for Viewer ${Y+1}`,onClick:()=>v(Y),children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("line",{x1:"4",y1:"21",x2:"4",y2:"14"}),p.jsx("line",{x1:"4",y1:"10",x2:"4",y2:"3"}),p.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"12"}),p.jsx("line",{x1:"12",y1:"8",x2:"12",y2:"3"}),p.jsx("line",{x1:"20",y1:"21",x2:"20",y2:"16"}),p.jsx("line",{x1:"20",y1:"12",x2:"20",y2:"3"}),p.jsx("line",{x1:"1",y1:"14",x2:"7",y2:"14"}),p.jsx("line",{x1:"9",y1:"8",x2:"15",y2:"8"}),p.jsx("line",{x1:"17",y1:"16",x2:"23",y2:"16"})]})})]})]},Y)}):p.jsx("div",{className:"analysis-mode-placeholder--inline",children:p.jsx("p",{children:"Select a folder and then choose an image from the list to begin."})})})]}),p.jsx(Ss,{bitmapCache:t})]})}),iv=(e,t=2)=>{if(e===0)return"0 Bytes";const n=1024,r=t<0?0:t,i=["Bytes","KB","MB","GB","TB"],l=Math.floor(Math.log(e)/Math.log(n));return parseFloat((e/Math.pow(n,l)).toFixed(r))+" "+i[l]},av=({file:e,dimensions:t,onClose:n})=>!e||!t?p.jsxs("div",{className:"info-panel",children:[p.jsx("button",{onClick:n,className:"close-btn",children:""}),p.jsx("h3",{children:"Image Information"}),p.jsx("p",{children:"No image selected or data available."})]}):p.jsxs("div",{className:"info-panel",children:[p.jsx("button",{onClick:n,className:"close-btn",children:""}),p.jsx("h3",{children:"Image Information"}),p.jsxs("ul",{children:[p.jsxs("li",{children:[p.jsx("strong",{children:"Filename:"})," ",e.name]}),p.jsxs("li",{children:[p.jsx("strong",{children:"Dimensions:"})," ",t.width,"px  ",t.height,"px"]}),p.jsxs("li",{children:[p.jsx("strong",{children:"File Size:"})," ",iv(e.size)]})]})]});function lv(){const{analysisRotation:e,setAnalysisRotation:t}=Fe(),n=e,[r,i]=Q.useState(n.toFixed(1)),l=Q.useRef(null),a=Q.useRef(0),o=Q.useRef(0);Q.useEffect(()=>{parseFloat(r)!==n&&i(n.toFixed(1))},[n]);const s=Q.useCallback(w=>{const d=(Math.round(w*10)/10%360+360)%360;t(d)},[t]),h=Q.useCallback(w=>{const x=Fe.getState().analysisRotation;s(x+w)},[s]),u=Q.useCallback(w=>{const x=performance.now();o.current=x,a.current=0;const d=m=>{const f=m-x;f>2e3?a.current=3:f>1e3?a.current=2:f>400&&(a.current=1);let _=0,E=0;switch(a.current){case 1:_=.1,E=100;break;case 2:_=1,E=50;break;case 3:_=5,E=25;break;default:l.current=requestAnimationFrame(d);return}m-o.current>E&&(h(_*w),o.current=m),l.current=requestAnimationFrame(d)};h(.1*w),l.current=requestAnimationFrame(d)},[h]),c=Q.useCallback(()=>{l.current&&(cancelAnimationFrame(l.current),l.current=null)},[]),v=w=>{i(w.target.value)},y=()=>{const w=parseFloat(r);isNaN(w)?i(n.toFixed(1)):s(w)},k=w=>{w.key==="Enter"&&(y(),w.target.blur())};return p.jsxs("div",{className:"pinpoint-rotation-control",children:[p.jsx("button",{onMouseDown:()=>u(-1),onMouseUp:c,onMouseLeave:c,title:"Rotate Left (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3L22 2"})})}),p.jsxs("div",{className:"rotation-input-wrapper",children:[p.jsx("input",{type:"number",step:"0.1",value:r,onChange:v,onBlur:y,onKeyDown:k,title:"Rotation Angle"}),p.jsx("span",{className:"degree-symbol",children:""})]}),p.jsx("button",{onMouseDown:()=>u(1),onMouseUp:c,onMouseLeave:c,title:"Rotate Right (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M2.5 22v-6h6M21.5 2v6h-6M22 12.5a10 10 0 0 1-18.8 4.3L2 22"})})}),p.jsx("button",{onClick:()=>s(0),title:"Reset Rotation",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M3 3l18 18"})})})]})}function ov(){const{compareRotation:e,setCompareRotation:t}=Fe(),n=e,[r,i]=Q.useState(n.toFixed(1)),l=Q.useRef(null),a=Q.useRef(0),o=Q.useRef(0);Q.useEffect(()=>{parseFloat(r)!==n&&i(n.toFixed(1))},[n]);const s=Q.useCallback(w=>{const d=(Math.round(w*10)/10%360+360)%360;t(d)},[t]),h=Q.useCallback(w=>{const x=Fe.getState().compareRotation;s(x+w)},[s]),u=Q.useCallback(w=>{const x=performance.now();o.current=x,a.current=0;const d=m=>{const f=m-x;f>2e3?a.current=3:f>1e3?a.current=2:f>400&&(a.current=1);let _=0,E=0;switch(a.current){case 1:_=.1,E=100;break;case 2:_=1,E=50;break;case 3:_=5,E=25;break;default:l.current=requestAnimationFrame(d);return}m-o.current>E&&(h(_*w),o.current=m),l.current=requestAnimationFrame(d)};h(.1*w),l.current=requestAnimationFrame(d)},[h]),c=Q.useCallback(()=>{l.current&&(cancelAnimationFrame(l.current),l.current=null)},[]),v=w=>{i(w.target.value)},y=()=>{const w=parseFloat(r);isNaN(w)?i(n.toFixed(1)):s(w)},k=w=>{w.key==="Enter"&&(y(),w.target.blur())};return p.jsxs("div",{className:"pinpoint-rotation-control",children:[p.jsx("button",{onMouseDown:()=>u(-1),onMouseUp:c,onMouseLeave:c,title:"Rotate Left (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3L22 2"})})}),p.jsxs("div",{className:"rotation-input-wrapper",children:[p.jsx("input",{type:"number",step:"0.1",value:r,onChange:v,onBlur:y,onKeyDown:k,title:"Rotation Angle"}),p.jsx("span",{className:"degree-symbol",children:""})]}),p.jsx("button",{onMouseDown:()=>u(1),onMouseUp:c,onMouseLeave:c,title:"Rotate Right (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M2.5 22v-6h6M21.5 2v6h-6M22 12.5a10 10 0 0 1-18.8 4.3L2 22"})})}),p.jsx("button",{onClick:()=>s(0),title:"Reset Rotation",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M3 3l18 18"})})})]})}function sv(){const{pinpointGlobalRotation:e,setPinpointGlobalRotation:t}=Fe(),n=e,[r,i]=Q.useState(n.toFixed(1)),l=Q.useRef(null),a=Q.useRef(0),o=Q.useRef(0);Q.useEffect(()=>{parseFloat(r)!==n&&i(n.toFixed(1))},[n]);const s=Q.useCallback(w=>{const d=(Math.round(w*10)/10%360+360)%360;t(d)},[t]),h=Q.useCallback(w=>{const x=Fe.getState().pinpointGlobalRotation;s(x+w)},[s]),u=Q.useCallback(w=>{const x=performance.now();o.current=x,a.current=0;const d=m=>{const f=m-x;f>2e3?a.current=3:f>1e3?a.current=2:f>400&&(a.current=1);let _=0,E=0;switch(a.current){case 1:_=.1,E=100;break;case 2:_=1,E=50;break;case 3:_=5,E=25;break;default:l.current=requestAnimationFrame(d);return}m-o.current>E&&(h(_*w),o.current=m),l.current=requestAnimationFrame(d)};h(.1*w),l.current=requestAnimationFrame(d)},[h]),c=Q.useCallback(()=>{l.current&&(cancelAnimationFrame(l.current),l.current=null)},[]),v=w=>{i(w.target.value)},y=()=>{const w=parseFloat(r);isNaN(w)?i(n.toFixed(1)):s(w)},k=w=>{w.key==="Enter"&&(y(),w.target.blur())};return p.jsxs("div",{className:"pinpoint-rotation-control",children:[p.jsx("button",{onMouseDown:()=>u(-1),onMouseUp:c,onMouseLeave:c,title:"Rotate All Left (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3L22 2"})})}),p.jsxs("div",{className:"rotation-input-wrapper",children:[p.jsx("input",{type:"number",step:"0.1",value:r,onChange:v,onBlur:y,onKeyDown:k,title:"Global Rotation Angle"}),p.jsx("span",{className:"degree-symbol",children:""})]}),p.jsx("button",{onMouseDown:()=>u(1),onMouseUp:c,onMouseLeave:c,title:"Rotate All Right (Hold for speed)",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M2.5 22v-6h6M21.5 2v6h-6M22 12.5a10 10 0 0 1-18.8 4.3L2 22"})})}),p.jsx("button",{onClick:()=>s(0),title:"Reset Global Rotation",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"3",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M3 3l18 18"})})})]})}function uv({imageDimensions:e}){const{viewport:t,setViewport:n,triggerIndicator:r}=Fe(),[i,l]=Q.useState((t.scale*100).toFixed(0)),[a,o]=Q.useState(""),[s,h]=Q.useState("");Q.useEffect(()=>{l((t.scale*100).toFixed(0)),e&&t.cx&&t.cy?(o(Math.round(t.cx*e.width).toString()),h(Math.round(t.cy*e.height).toString())):(o(""),h(""))},[t,e]);const u=()=>{const v=parseFloat(i)/100,y=e?parseFloat(a)/e.width:NaN,k=e?parseFloat(s)/e.height:NaN,w={};isNaN(v)||(w.scale=Math.max(Kn,Math.min(Yn,v))),isNaN(y)||(w.cx=y),isNaN(k)||(w.cy=k),n(w),!isNaN(y)&&!isNaN(k)&&r(y,k)},c=v=>{v.key==="Enter"&&(u(),v.target.blur())};return p.jsxs("div",{className:"viewport-controls",children:[p.jsxs("label",{children:[p.jsx("span",{children:"Scale:"}),p.jsx("input",{type:"text",value:i,onChange:v=>l(v.target.value),onBlur:u,onKeyDown:c}),p.jsx("span",{children:"%"})]}),p.jsxs("label",{children:[p.jsx("span",{children:"X:"}),p.jsx("input",{type:"text",value:a,disabled:!e,onChange:v=>o(v.target.value),onBlur:u,onKeyDown:c})]}),p.jsxs("label",{children:[p.jsx("span",{children:"Y:"}),p.jsx("input",{type:"text",value:s,disabled:!e,onChange:v=>h(v.target.value),onBlur:u,onKeyDown:c})]})]})}function cv(){const{appMode:e,setAppMode:t,pinpointMouseMode:n,setPinpointMouseMode:r,setViewport:i,fitScaleFn:l,current:a,clearPinpointScales:o,pinpointGlobalScale:s,setPinpointGlobalScale:h,numViewers:u,viewerRows:c,viewerCols:v,setViewerLayout:y,showMinimap:k,setShowMinimap:w,showGrid:x,setShowGrid:d,gridColor:m,setGridColor:f,selectedViewers:_,openToggleModal:E,analysisFile:C,minimapPosition:M,setMinimapPosition:D,minimapWidth:R,setMinimapWidth:A}=Fe(),[L,O]=Q.useState(null),[z,U]=Q.useState(!1),[J,ce]=Q.useState(!0),[q,F]=Q.useState(!1),[b,B]=Q.useState(!1),G=Q.useRef(new Map),H=Q.useRef(null),Y=Q.useRef(null),pe=Q.useRef(null),ve=Q.useRef(null),[we,xe]=Q.useState(!1),[X,ge]=Q.useState(null),[Ee,T]=Q.useState({showLabels:!0,showCrosshair:!0,showMinimap:!1}),[ue,ie]=Q.useState("idle"),te=Q.useCallback(async()=>{if(!we)return;let ne=null;const fe={...Ee};e==="compare"&&Y.current?ne=await Y.current.capture(fe):e==="pinpoint"&&pe.current?ne=await pe.current.capture(fe):e==="analysis"&&ve.current&&(ne=await ve.current.capture(fe)),ne&&ge(ne)},[e,we,Ee]);Q.useEffect(()=>{te()},[te]);const ae=()=>{ie("idle"),xe(!0)},$=async()=>{if(X)try{const ne=await(await fetch(X)).blob();await navigator.clipboard.write([new ClipboardItem({"image/png":ne})]),ie("success")}catch(ne){console.error("Failed to copy to clipboard:",ne),ie("error")}},ee=()=>{const ne=l?l():1;e==="pinpoint"?(o(),h(1),i({scale:ne,refScreenX:void 0,refScreenY:void 0})):i({scale:ne,cx:.5,cy:.5})};Q.useEffect(()=>{const ne=H.current;if(ne){let fe=!1;return(async()=>{try{const ye=(ne.name.split(".").pop()||"").toLowerCase();let Ae;if(ye==="tif"||ye==="tiff"){const Se=await ys(ne,gs);Ae={width:Se.width,height:Se.height}}else{const Se=await createImageBitmap(ne);Ae={width:Se.width,height:Se.height}}fe||O(Ae)}catch(ye){console.error("Failed to get image dimensions:",ye),fe||O(null)}})(),()=>{fe=!0}}else O(null)},[a,H]),Q.useEffect(()=>{const ne=fe=>{if(fe.target instanceof HTMLInputElement||fe.target instanceof HTMLSelectElement)return;const me=Fe.getState(),{viewport:ye,appMode:Ae,activeCanvasKey:Se,pinpointScales:Re,pinpointGlobalScale:Le,setAppMode:Ne,setViewport:De}=me,ze=50,Ie=fe.key.toLowerCase();if(Ae==="pinpoint"&&Se&&(Ie==="="||Ie==="+"||Ie==="-")){fe.preventDefault();const de=(Re[Se]??ye.scale)+.01*(Ie==="="||Ie==="+"?1:-1),P=de*Le;if(P>Yn||P<Kn)return;me.setPinpointScale(Se,de);return}switch(Ie){case"1":Ne("compare");break;case"2":Ne("pinpoint");break;case"3":Ne("analysis");break;case"r":ee();break;case"i":U(N=>!N);break;case"=":case"+":De({scale:Math.min(Yn,(ye.scale||1)+.01)});break;case"-":De({scale:Math.max(Kn,(ye.scale||1)-.01)});break;case"arrowup":fe.preventDefault(),L&&ye.cy&&De({cy:ye.cy-ze/((ye.scale||1)*L.height)});break;case"arrowdown":fe.preventDefault(),L&&ye.cy&&De({cy:ye.cy+ze/((ye.scale||1)*L.height)});break;case"arrowleft":fe.preventDefault(),L&&ye.cx&&De({cx:ye.cx-ze/((ye.scale||1)*L.width)});break;case"arrowright":fe.preventDefault(),L&&ye.cx&&De({cx:ye.cx+ze/((ye.scale||1)*L.width)});break}};return window.addEventListener("keydown",ne),()=>window.removeEventListener("keydown",ne)},[i,ee,L,t]);const re=()=>{const ne=fe=>{H.current=fe};switch(e){case"compare":return p.jsx(qp,{ref:Y,numViewers:u,bitmapCache:G,setPrimaryFile:ne,showControls:J});case"pinpoint":return p.jsx(nv,{ref:pe,numViewers:u,bitmapCache:G,setPrimaryFile:ne,showControls:J});case"analysis":return p.jsx(rv,{ref:ve,numViewers:u,bitmapCache:G,setPrimaryFile:ne,showControls:J});default:return null}};return p.jsxs("div",{className:"app",children:[p.jsxs("header",{children:[p.jsxs("div",{className:"title-container",children:[p.jsx("h1",{className:"app-title",onClick:()=>window.location.reload(),title:"Reset (refresh)",children:"CompareX"}),p.jsxs("button",{onClick:()=>ce(!J),className:"toggle-controls-btn",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),p.jsx("path",{d:"M18.37 3.63a2.12 2.12 0 1 1 3 3L12 16l-4 1 1-4Z"})]}),p.jsxs("span",{children:[J?"Hide":"Show"," Folderlist"]})]})]}),p.jsxs("div",{className:"top-controls-wrapper",children:[p.jsxs("div",{className:"controls-main",children:[p.jsxs("label",{children:[p.jsx("span",{children:"Mode:"}),p.jsxs("select",{value:e,onChange:ne=>t(ne.target.value),children:[p.jsx("option",{value:"compare",children:"Compare"}),p.jsx("option",{value:"pinpoint",children:"Pinpoint"}),p.jsx("option",{value:"analysis",children:"Analysis"})]})]}),(e==="compare"||e==="pinpoint"||e==="analysis")&&p.jsxs("label",{children:[p.jsx("span",{children:"Layout:"}),p.jsxs("select",{value:`${c}x${v}`,onChange:ne=>{const[fe,me]=ne.target.value.split("x").map(Number);y(fe,me)},children:[p.jsx("option",{value:"1x2",children:"12 (2)"}),p.jsx("option",{value:"1x3",children:"13 (3)"}),p.jsx("option",{value:"1x4",children:"14 (4)"}),p.jsx("option",{value:"1x5",children:"15 (5)"}),p.jsx("option",{value:"1x6",children:"16 (6)"}),p.jsx("option",{value:"1x7",children:"17 (7)"}),p.jsx("option",{value:"1x8",children:"18 (8)"}),p.jsx("option",{value:"1x9",children:"19 (9)"}),p.jsx("option",{value:"1x10",children:"110 (10)"}),p.jsx("option",{value:"1x12",children:"112 (12)"}),p.jsx("option",{value:"1x15",children:"115 (15)"}),p.jsx("option",{value:"1x18",children:"118 (18)"}),p.jsx("option",{value:"1x20",children:"120 (20)"}),p.jsx("option",{value:"2x2",children:"22 (4)"}),p.jsx("option",{value:"2x3",children:"23 (6)"}),p.jsx("option",{value:"2x4",children:"24 (8)"}),p.jsx("option",{value:"2x5",children:"25 (10)"}),p.jsx("option",{value:"2x6",children:"26 (12)"}),p.jsx("option",{value:"2x8",children:"28 (16)"}),p.jsx("option",{value:"2x9",children:"29 (18)"}),p.jsx("option",{value:"2x10",children:"210 (20)"}),p.jsx("option",{value:"3x2",children:"32 (6)"}),p.jsx("option",{value:"3x3",children:"33 (9)"}),p.jsx("option",{value:"3x4",children:"34 (12)"}),p.jsx("option",{value:"3x5",children:"35 (15)"}),p.jsx("option",{value:"3x6",children:"36 (18)"}),p.jsx("option",{value:"4x2",children:"42 (8)"}),p.jsx("option",{value:"4x3",children:"43 (12)"}),p.jsx("option",{value:"4x4",children:"44 (16)"}),p.jsx("option",{value:"4x5",children:"45 (20)"}),p.jsx("option",{value:"5x2",children:"52 (10)"}),p.jsx("option",{value:"5x3",children:"53 (15)"}),p.jsx("option",{value:"5x4",children:"54 (20)"}),p.jsx("option",{value:"6x3",children:"63 (18)"}),p.jsx("option",{value:"6x4",children:"64 (24)"}),p.jsx("option",{value:"8x3",children:"83 (24)"}),p.jsx("option",{value:"10x2",children:"102 (20)"})]})]}),p.jsxs("button",{className:"toggle-main-btn",onClick:()=>E(),title:"Toggle Mode (Space)",disabled:_.length===0||e==="compare"&&!a||e==="analysis"&&!C,children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("polyline",{points:"16 3 21 3 21 8"}),p.jsx("line",{x1:"4",y1:"20",x2:"21",y2:"3"}),p.jsx("polyline",{points:"21 16 21 21 16 21"}),p.jsx("line",{x1:"15",y1:"15",x2:"21",y2:"21"}),p.jsx("line",{x1:"4",y1:"4",x2:"9",y2:"9"})]}),"Toggle (",_.length,")"]}),e==="pinpoint"&&p.jsxs("label",{children:[p.jsx("span",{children:"Mouse:"}),p.jsxs("select",{value:n,onChange:ne=>r(ne.target.value),children:[p.jsx("option",{value:"pin",children:"Pin"}),p.jsx("option",{value:"pan",children:"Pan"})]})]}),p.jsxs("button",{onClick:ae,children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}),p.jsx("path",{d:"M21 4H14.82A2 2 0 0 0 13 2H8a2 2 0 0 0-1.82 2H3v16h18v-8Z"}),p.jsx("circle",{cx:"12",cy:"13",r:"4"})]}),"Capture"]}),p.jsxs("div",{className:"minimap-button-unified",children:[p.jsxs("button",{onClick:()=>w(!k),className:k?"active":"",children:[p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),p.jsx("rect",{x:"7",y:"7",width:"4",height:"4",rx:"1",ry:"1"})]}),"Minimap"]}),p.jsx("button",{className:`minimap-options-indicator ${k?"":"disabled"}`,onClick:()=>k&&B(!0),title:"Minimap options",children:p.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("circle",{cx:"12",cy:"12",r:"3"}),p.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 1 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 1 1-4 0v-.09a1.65 1.65 0 0 0-1-1.51 1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 1 1-2.83-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 1 1 0-4h.09a1.65 1.65 0 0 0 1.51-1 1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 1 1 2.83-2.83l.06.06a1.65 1.65 0 0 0 1.82.33h0A1.65 1.65 0 0 0 9 3.09V3a2 2 0 1 1 4 0v.09a1.65 1.65 0 0 0 1 1.51h0a1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 1 1 2.83 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82v0A1.65 1.65 0 0 0 20.91 12H21a2 2 0 1 1 0 4h-.09a1.65 1.65 0 0 0-1.51-1Z"})]})})]}),p.jsxs("div",{className:"grid-button-unified",children:[p.jsx("button",{className:`grid-button-toggle ${x?"active":""}`,onClick:()=>d(!x),title:x?"Hide Grid":"Show Grid",children:p.jsxs("svg",{xmlns:"http://www.w.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[p.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}),p.jsx("path",{d:"M3 9h18M3 15h18M9 3v18M15 3v18"})]})}),p.jsx("div",{className:"grid-button-color-indicator",style:{backgroundColor:x?m:"transparent"},onClick:()=>x&&F(!0),title:"Change Grid Color"})]})]}),p.jsxs("div",{className:"controls-right",children:[e==="compare"&&p.jsx(ov,{}),e==="analysis"&&p.jsx(lv,{}),e==="pinpoint"&&p.jsx(sv,{}),e==="pinpoint"&&p.jsx("div",{className:"global-controls-wrapper",children:p.jsxs("div",{className:"global-scale-control",children:[p.jsx("label",{children:"Global Scale:"}),p.jsxs("span",{children:[(s*100).toFixed(0),"%"]}),p.jsx("button",{onClick:()=>h(1),children:"Reset"})]})}),e!=="pinpoint"&&p.jsx(uv,{imageDimensions:L}),p.jsx("button",{onClick:ee,title:"Reset View",className:"controls-main-button",children:p.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:p.jsx("path",{d:"M4 8V4h4M20 8V4h-4M4 16v4h4M20 16v4h-4M12 12l-8 8M12 12l8 8M12 12l-8-8M12 12l8-8"})})})]})]})]}),re(),z&&p.jsx(av,{file:H.current||void 0,dimensions:L,onClose:()=>U(!1)}),we&&p.jsx("div",{className:"capture-modal",onClick:()=>xe(!1),children:p.jsxs("div",{className:"capture-modal-content",onClick:ne=>ne.stopPropagation(),children:[p.jsx("h3",{children:"Capture Options"}),p.jsx("div",{className:"capture-modal-preview",children:X?p.jsx("img",{src:X,alt:"Captured content"}):p.jsx("div",{className:"loading-spinner"})}),p.jsxs("div",{className:"capture-modal-options",children:[p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:Ee.showLabels,onChange:ne=>T(fe=>({...fe,showLabels:ne.target.checked}))}),"Show Labels"]}),e==="pinpoint"&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:Ee.showCrosshair,onChange:ne=>T(fe=>({...fe,showCrosshair:ne.target.checked}))}),"Show Crosshair"]}),k&&p.jsxs("label",{children:[p.jsx("input",{type:"checkbox",checked:Ee.showMinimap,onChange:ne=>T(fe=>({...fe,showMinimap:ne.target.checked}))}),"Show Minimap"]})]}),p.jsxs("div",{className:"capture-modal-actions",children:[p.jsxs("button",{onClick:$,children:[ue==="idle"&&"Copy to Clipboard",ue==="success"&&"Copied!",ue==="error"&&"Error!"]}),X&&p.jsx("a",{href:X,download:`capture-${new Date().toISOString()}.png`,children:"Save as File..."}),p.jsx("button",{onClick:()=>xe(!1),className:"close-button",children:"Close"})]})]})}),q&&x&&p.jsx("div",{className:"grid-color-modal-overlay",onClick:()=>F(!1),children:p.jsxs("div",{className:"grid-color-modal-content",onClick:ne=>ne.stopPropagation(),children:[p.jsx("h3",{children:"Select Grid Color"}),p.jsx("div",{className:"grid-color-palette-modal",children:["white","red","yellow","blue"].map(ne=>p.jsx("button",{title:ne.charAt(0).toUpperCase()+ne.slice(1),style:{backgroundColor:ne},className:`grid-color-swatch ${m===ne?"active":""}`,onClick:()=>{f(ne),F(!1)}},ne))})]})}),b&&p.jsx("div",{className:"minimap-options-modal-overlay",onClick:()=>B(!1),children:p.jsxs("div",{className:"minimap-options-modal-content",onClick:ne=>ne.stopPropagation(),children:[p.jsxs("div",{className:"minimap-options-header",children:[p.jsx("h3",{children:"Minimap Options"}),p.jsx("button",{className:"close-btn",onClick:()=>B(!1),children:""})]}),p.jsxs("div",{className:"minimap-options-grid",children:[p.jsxs("div",{className:"minimap-position-preview",children:[p.jsx("div",{className:`preview-corner tl ${M==="top-left"?"active":""}`,onClick:()=>D("top-left")}),p.jsx("div",{className:`preview-corner tr ${M==="top-right"?"active":""}`,onClick:()=>D("top-right")}),p.jsx("div",{className:`preview-corner bl ${M==="bottom-left"?"active":""}`,onClick:()=>D("bottom-left")}),p.jsx("div",{className:`preview-corner br ${M==="bottom-right"?"active":""}`,onClick:()=>D("bottom-right")})]}),p.jsxs("div",{className:"minimap-size-buttons",children:[p.jsx("button",{className:R===120?"active":"",onClick:()=>A(120),children:"Small"}),p.jsx("button",{className:R===150?"active":"",onClick:()=>A(150),children:"Medium"}),p.jsx("button",{className:R===200?"active":"",onClick:()=>A(200),children:"Large"}),p.jsx("button",{className:R===240?"active":"",onClick:()=>A(240),children:"XL"})]})]}),p.jsx("div",{className:"minimap-options-actions",children:p.jsx("button",{onClick:()=>B(!1),className:"apply-btn",children:"OK"})})]})}),p.jsx(Jp,{})]})}jl.createRoot(document.getElementById("root")).render(p.jsx(fc.StrictMode,{children:p.jsx(cv,{})}));
